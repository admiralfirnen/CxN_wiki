<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About - CxN Clan</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/about.css">
</head>
<body>
    <nav id="main-nav"></nav>
    <div class="container">
        <header class="about-hero">
            <h1 class="clan-name">About CxN</h1>
        </header>

        <section class="clan-stats" aria-label="Clan statistics">
            <div class="clan-stat">
                <div>
                    <span class="clan-stat-label">Might</span>
                    <div id="stat-might" class="clan-stat-value formatted">Loading...</div>
                </div>
            </div>
            <div class="clan-stat">
                <div>
                    <span class="clan-stat-label">Wealth</span>
                    <div id="stat-wealth" class="clan-stat-value formatted">Loading...</div>
                </div>
            </div>
            <div class="clan-stat">
                <div>
                    <span class="clan-stat-label">Kingdom</span>
                    <div class="clan-stat-value">277</div>
                </div>
            </div>
            <div class="clan-stat clan-capital">
                <div>
                    <span class="clan-stat-label">Clan Capital</span>
                    <div class="clan-stat-value">K:277 X:286 Y:902</div>
                </div>
            </div>
        </section>

        <section class="hierarchy-section" aria-labelledby="hierarchy-heading">
            <h2 id="hierarchy-heading" class="visually-hidden">Clan leadership hierarchy</h2>

            <h3 class="hierarchy-title leader">Leader</h3>
            <div class="members-list">
                <span class="member-tag has-badge" tabindex="0">
                    Nico MAJORJOHNSON95
                    <span class="member-badge-icon" aria-hidden="true">★</span>
                    <span class="badge-tooltip">Clan Leader, Clan Diplomat</span>
                </span>
            </div>

            <h3 class="hierarchy-title superiors">Superiors</h3>
            <div class="members-list">
                <span class="member-tag has-badge" tabindex="0">
                    Phoenix
                    <span class="member-badge-icon" aria-hidden="true">★</span>
                    <span class="badge-tooltip">Tournament Coordinator</span>
                </span>
                <span class="member-tag has-badge" tabindex="0">
                    Billy Irish
                    <span class="member-badge-icon" aria-hidden="true">★</span>
                    <span class="badge-tooltip">Chat Mediator, Lead Recruiter</span>
                </span>
                <span class="member-tag">NERO</span>
                <span class="member-tag has-badge" tabindex="0">
                    Mave
                    <span class="member-badge-icon" aria-hidden="true">★</span>
                    <span class="badge-tooltip">Co-Recruiter</span>
                </span>
                <span class="member-tag has-badge" tabindex="0">
                    Goramar
                    <span class="member-badge-icon" aria-hidden="true">★</span>
                    <span class="badge-tooltip">Clan Raid Coordinator, Lead Recruiter</span>
                </span>
                <span class="member-tag has-badge" tabindex="0">
                    RoseyxMini
                    <span class="member-badge-icon" aria-hidden="true">★</span>
                    <span class="badge-tooltip">Clan Diplomat</span>
                </span>
            </div>

            <h3 class="hierarchy-title officers">Officers</h3>
            <div class="members-list">
                <span class="member-tag">Mazurr</span>
                <span class="member-tag has-badge" tabindex="0">
                    Goll
                    <span class="member-badge-icon" aria-hidden="true">★</span>
                    <span class="badge-tooltip">CoT Coordinator</span>
                </span>
                <span class="member-tag">KINGPIN</span>
                <span class="member-tag">Darloting</span>
                <span class="member-tag has-badge" tabindex="0">
                    ANKOU
                    <span class="member-badge-icon" aria-hidden="true">★</span>
                    <span class="badge-tooltip">Co-Recruiter</span>
                </span>
                <span class="member-tag">joro</span>
                <span class="member-tag">Bludbringer</span>
                <span class="member-tag">Beanara</span>
                <span class="member-tag">Tyler Durden</span>
                <span class="member-tag">Eydaen</span>
                <span class="member-tag">Akinobar</span>
                <span class="member-tag">Mebar</span>
                <span class="member-tag">Aeglinil</span>
                <span class="member-tag">Gagis</span>
                <span class="member-tag">Gunnelbrand</span>
                <span class="member-tag">Markimus</span>
                <span class="member-tag">Argolejl</span>
                <span class="member-tag">Thonrad</span>
                <span class="member-tag">Malann</span>
                <span class="member-tag">Levictus</span>
                <span class="member-tag">Cazurrin</span>
                <span class="member-tag">Gumby</span>
                <span class="member-tag">JaviviAstur</span>
                <span class="member-tag">Nizragore</span>
                <span class="member-tag">Ragekiller</span>
                <span class="member-tag">AdmiralFirnen</span>
                <span class="member-tag">RainDog</span>
                <span class="member-tag">SHAKDA</span>
                <span class="member-tag">Cameron of Lochaber</span>
                <span class="member-tag">Ildriilas</span>
                <span class="member-tag">victory</span>
                <span class="member-tag">Sir Zohran</span>
                <span class="member-tag has-badge" tabindex="0">
                    Mini Lil Egg
                    <span class="member-badge-icon" aria-hidden="true">★</span>
                    <span class="badge-tooltip">Clan Mascot</span>
                </span>
            </div>

            <h3 class="hierarchy-title veterans">Veterans</h3>
            <div class="members-list">
                <span class="member-tag">Alpshudor</span>
                <span class="member-tag">Gromitgirl</span>
                <span class="member-tag">Keleve</span>
                <span class="member-tag">Tedi1982</span>
                <span class="member-tag">Jos of Oz</span>
                <span class="member-tag">Mikajar</span>
                <span class="member-tag">Gova</span>
                <span class="member-tag">Kerodor</span>
                <span class="member-tag">Chazz</span>
                <span class="member-tag">Galbin</span>
                <span class="member-tag">Nimvening</span>
                <span class="member-tag">Tanos</span>
                <span class="member-tag">alghorabi</span>
                <span class="member-tag">Kelerne</span>
                <span class="member-tag">Rail</span>
                <span class="member-tag">Allegra</span>
                <span class="member-tag">Konstantin</span>
                <span class="member-tag">Nantrius</span>
                <span class="member-tag">Dein</span>
                <span class="member-tag">CintiHu</span>
                <span class="member-tag">Princess</span>
                <span class="member-tag">Paraoan Alicia</span>
                <span class="member-tag">Cogamand</span>
                <span class="member-tag">Kakazahn</span>
                <span class="member-tag">Melinad</span>
                <span class="member-tag">Kem</span>
                <span class="member-tag">SAXON</span>
                <span class="member-tag">Fotius</span>
                <span class="member-tag">Eldriilas</span>
                <span class="member-tag">Sedtis</span>
                <span class="member-tag">Lordisen</span>
                <span class="member-tag">Rarin</span>
                <span class="member-tag">Glelinin</span>
                <span class="member-tag">Rurin</span>
                <span class="member-tag">Dabei</span>
                <span class="member-tag">hesoyam</span>
            </div>

            <h3 class="hierarchy-title soldiers">Soldiers</h3>
            <div class="members-list">
                <span class="member-tag">Khuzar</span>
                <span class="member-tag">Marafad</span>
                <span class="member-tag">Lindis</span>
            </div>
        </section>
    </div>
    <footer id="main-footer"></footer>
    <script src="../js/nav.js"></script>
    <script>
        // Click-to-toggle badge tooltip for touch/keyboard
        document.querySelectorAll('.member-tag.has-badge').forEach(function (el) {
            el.addEventListener('click', function (e) {
                e.preventDefault();
                var open = this.getAttribute('data-badge-open') === 'true';
                document.querySelectorAll('.member-tag.has-badge').forEach(function (o) {
                    o.classList.remove('badge-open');
                    o.setAttribute('data-badge-open', 'false');
                });
                if (!open) {
                    this.classList.add('badge-open');
                    this.setAttribute('data-badge-open', 'true');
                }
            });
        });
        document.addEventListener('click', function (e) {
            if (!e.target.closest('.member-tag.has-badge')) {
                document.querySelectorAll('.member-tag.has-badge').forEach(function (o) {
                    o.classList.remove('badge-open');
                    o.setAttribute('data-badge-open', 'false');
                });
            }
        });
    </script>
    <script>
        // Load clan stats dynamically
        (function() {
            'use strict';
            
            const STATS_KEY = 'cxn_clan_stats';
            
            function formatNumber(num) {
                return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            }
            
            function getStats() {
                try {
                    const data = localStorage.getItem(STATS_KEY);
                    return data ? JSON.parse(data) : null;
                } catch (e) {
                    return null;
                }
            }
            
            async function loadStatsFromFile() {
                try {
                    const response = await fetch('../data/clan_stats.json');
                    if (!response.ok) throw new Error('Failed to load');
                    return await response.json();
                } catch (e) {
                    console.error('Error loading clan stats:', e);
                    return { might: 0, wealth: 0 };
                }
            }
            
            async function init() {
                let stats = getStats();
                
                if (!stats) {
                    stats = await loadStatsFromFile();
                    if (stats) {
                        localStorage.setItem(STATS_KEY, JSON.stringify(stats));
                    }
                }
                
                const mightEl = document.getElementById('stat-might');
                const wealthEl = document.getElementById('stat-wealth');
                
                if (mightEl && stats.might) {
                    mightEl.textContent = formatNumber(stats.might);
                }
                if (wealthEl && stats.wealth) {
                    wealthEl.textContent = formatNumber(stats.wealth);
                }
            }
            
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', init);
            } else {
                init();
            }
        })();
    </script>
</body>
</html>
