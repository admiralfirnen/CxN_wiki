/*! For license information please see site-unauth-modern.1ba7c580cc86ba6f5bfb.js.LICENSE.txt */
(()=>{var e,t,n,i,r,o={276:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(52797),r=n(7247),o=n(85408),s=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=s},1492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.of=function(t,n){var i=new e;return i.bindings=t,i.middleware=n,i},e}();t.ContainerSnapshot=n},1797:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46987),r=n(58478);function o(e,t,n,r,o){var s={},a="number"==typeof o,c=void 0!==o&&a?o.toString():n;if(a&&void 0!==n)throw new Error(i.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(s=Reflect.getMetadata(e,t));var l=s[c];if(Array.isArray(l))for(var u=0,d=l;u<d.length;u++){var h=d[u];if(h.key===r.key)throw new Error(i.DUPLICATED_METADATA+" "+h.key)}else l=[];l.push(r),s[c]=l,Reflect.defineMetadata(e,s,t)}function s(e,t){Reflect.decorate(e,t)}function a(e,t){return function(n,i){t(n,i,e)}}t.tagParameter=function(e,t,n,i){o(r.TAGGED,e,t,i,n)},t.tagProperty=function(e,t,n){o(r.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,n){"number"==typeof n?s([a(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):s([e],t)}},1824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46987),r=n(2209),o=n(58478);t.resolveInstance=function(e,t,n){var s,a,c=null;t.length>0?(a=t.filter(function(e){return null!==e.target&&e.target.type===r.TargetTypeEnum.ConstructorArgument}).map(n),c=function(e,t,n){var i=t.filter(function(e){return null!==e.target&&e.target.type===r.TargetTypeEnum.ClassProperty}),o=i.map(n);return i.forEach(function(t,n){var i;i=t.target.name.value();var r=o[n];e[i]=r}),e}(c=new((s=e).bind.apply(s,[void 0].concat(a))),t,n)):c=new e;return function(e,t){if(Reflect.hasMetadata(o.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(o.POST_CONSTRUCT,e);try{t[n.value]()}catch(t){throw new Error(i.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,c),c}},2209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},3949:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationsRequest=void 0;var o=n(50670),s=n(20280),a=n(47245),c=function(e){function t(t,n,i){var r=this,o=(0,s.v4)();return(r=e.call(this,n,i,o)||this).url=t,r.setTransformerAdapter(new a.NormalJsonrpcTransformer),r}return r(t,e),t}(o.JsonRpcRequestWrapper);t.NotificationsRequest=c},4494:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CheckUserCmd=void 0;var o=n(3949),s=n(41079),a=function(e){function t(t,n){return e.call(this,t,s.NotificationsRpcMethods.CHECK,n)||this}return r(t,e),t}(o.NotificationsRequest);t.CheckUserCmd=a},5624:(e,t,n)=>{var i,r;i=[n(44436),n(77452)],void 0===(r=function(e,t){let n,i="",r=!1;try{switch(n=[[/(Amigo)\/([\w\.]+)/i],[t.BROWSER.NAME,t.BROWSER.VERSION]],(t=new t({browser:n})).setUA(app.config.user_agent),app.config.user_os=t.getOS(),app.config.user_browser=t.getBrowser(),i=app.config.user_browser.name.toLowerCase(),i=i.replace(/mobile\s*/i,""),i){case"chrome":r=1;break;case"yandex":r=2;break;case"opera":r=3;break;case"firefox":r=4;break;case"amigo":r=5;break;case"ie":case"edge":r=6;break;case"safari":r=7}r&&void 0!==window._funnel&&window._funnel.send({type:"e",name:"initialize_web.browser",value:r,reg:0}),""!==i&&e("body").addClass(i);try{window.Sentry.configureScope(function(e){e.setTag("cpu_arch",t.getCPU().architecture)})}catch(e){console.error(e)}return t}catch(e){console.log("browsercheck error",e)}}.apply(t,i))||(e.exports=r)},6151:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},6272:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(91691),r=n(62406),o=n(59836),s=n(56561),a=n(48244),c=n(55586);class l{constructor(e,t){this.Cs=e,this.Fi=t,this.Cs=e,this.Fi=t}getUserId(e){const t=this.Cs.getUserId();if("function"!=typeof e)return t;r.A.warn("The callback for getUserId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getUser().getUserId()`)"),e(t)}addAlias(e,t){return!(0,s.rK)(e,"add alias","the alias",!1)||e.length<=0?(r.A.error("addAlias requires a non-empty alias"),!1):!(0,s.rK)(t,"add alias","the label",!1)||t.length<=0?(r.A.error("addAlias requires a non-empty label"),!1):this.Fi.Cn(e,t).tt}setFirstName(e){return!!(0,s.rK)(e,"set first name","the firstName",!0)&&this.Cs.nu("first_name",e)}setLastName(e){return!!(0,s.rK)(e,"set last name","the lastName",!0)&&this.Cs.nu("last_name",e)}setEmail(e){return null===e||(0,s.B9)(e)?this.Cs.nu("email",e):(r.A.error(`Cannot set email address - "${e}" did not pass RFC-5322 validation.`),!1)}setGender(e){return"string"==typeof e&&(e=e.toLowerCase()),!(null!==e&&!(0,i.BY)(l.Genders,e,`Gender "${e}" is not a valid gender.`,"User.Genders"))&&this.Cs.nu("gender",e)}setDateOfBirth(e,t,n){return null===e&&null===t&&null===n?this.Cs.nu("dob",null):(e=null!=e?parseInt(e.toString()):null,t=null!=t?parseInt(t.toString()):null,n=null!=n?parseInt(n.toString()):null,null==e||null==t||null==n||isNaN(e)||isNaN(t)||isNaN(n)||t>12||t<1||n>31||n<1?(r.A.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.Cs.nu("dob",`${e}-${t}-${n}`))}setCountry(e){return!!(0,s.rK)(e,"set country","the country",!0)&&this.Cs.nu("country",e)}setHomeCity(e){return!!(0,s.rK)(e,"set home city","the homeCity",!0)&&this.Cs.nu("home_city",e)}setLanguage(e){return!!(0,s.rK)(e,"set language","the language",!0)&&this.Cs.nu("language",e)}setEmailNotificationSubscriptionType(e){return!!(0,i.BY)(l.NotificationSubscriptionTypes,e,`Email notification setting "${e}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.Cs.nu("email_subscribe",e)}setPushNotificationSubscriptionType(e){return!!(0,i.BY)(l.NotificationSubscriptionTypes,e,`Push notification setting "${e}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.Cs.nu("push_subscribe",e)}setPhoneNumber(e){return!!(0,s.rK)(e,"set phone number","the phoneNumber",!0)&&(null===e||e.match(l.Fn)?this.Cs.nu("phone",e):(r.A.error(`Cannot set phone number - "${e}" did not pass validation.`),!1))}setLastKnownLocation(e,t,n,i,o){return null==e||null==t?(r.A.error("Cannot set last-known location - latitude and longitude are required."),!1):(e=parseFloat(e.toString()),t=parseFloat(t.toString()),null!=n&&(n=parseFloat(n.toString())),null!=i&&(i=parseFloat(i.toString())),null!=o&&(o=parseFloat(o.toString())),isNaN(e)||isNaN(t)||null!=n&&isNaN(n)||null!=i&&isNaN(i)||null!=o&&isNaN(o)?(r.A.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):e>90||e<-90||t>180||t<-180?(r.A.error("Cannot set last-known location - latitude and longitude are bounded by ±90 and ±180 respectively."),!1):null!=n&&n<0||null!=o&&o<0?(r.A.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.Fi.setLastKnownLocation(this.Cs.getUserId(),e,t,i,n,o).tt)}setCustomUserAttribute(e,t,n){if(!(0,s.ZJ)(e))return!1;const r=t=>{const[n]=(0,s.fB)(t,a.KG,"attribute value",`set custom user attribute "${e}"`,"custom user attribute");return n};if((0,i.cy)(t)){const[n,i]=(0,s.Z2)(e,t);if(!n&&!i&&0!==t.length)return!1;if(n||0===t.length)return this.Fi.Ln(o.w.$n,e,t).tt;for(const e of t)if(!r(e))return!1}else if((0,i.Gv)(t)){if(!r(t))return!1;if(n)return this.Fi.Ln(o.w.Bn,e,t).tt}else{if(void 0===t||!(0,s.uZ)(t))return!1;if((0,i.$P)(t)&&(t=(0,c.EQ)(t)),"string"==typeof t&&!(0,s.Dz)(t,`set custom user attribute "${e}"`,"the element in the given array"))return!1}return this.Cs.setCustomUserAttribute(e,t)}addToCustomAttributeArray(e,t){return!!(0,s.Dz)(e,"add to custom user attribute array","the given key")&&!(null!=t&&!(0,s.Dz)(t,"add to custom user attribute array","the given value"))&&this.Fi.Ln(o.w.On,e,t).tt}removeFromCustomAttributeArray(e,t){return!!(0,s.Dz)(e,"remove from custom user attribute array","the given key")&&!(null!=t&&!(0,s.Dz)(t,"remove from custom user attribute array","the given value"))&&this.Fi.Ln(o.w.Gn,e,t).tt}incrementCustomUserAttribute(e,t){if(!(0,s.Dz)(e,"increment custom user attribute","the given key"))return!1;null==t&&(t=1);const n=parseInt(t.toString());return isNaN(n)||n!==parseFloat(t.toString())?(r.A.error(`Cannot increment custom user attribute because the given incrementValue "${t}" is not an integer.`),!1):this.Fi.Ln(o.w.Hn,e,n).tt}setCustomLocationAttribute(e,t,n){return!!(0,s.Dz)(e,"set custom location attribute","the given key")&&((null!==t||null!==n)&&(t=null!=t?parseFloat(t.toString()):null,n=null!=n?parseFloat(n.toString()):null,null==t&&null!=n||null!=t&&null==n||null!=t&&(isNaN(t)||t>90||t<-90)||null!=n&&(isNaN(n)||n>180||n<-180))?(r.A.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by ±90 and ±180 respectively, or must both be null for removal."),!1):this.Fi.Kn(e,t,n).tt)}addToSubscriptionGroup(e){return!(0,s.rK)(e,"add user to subscription group","subscription group ID",!1)||e.length<=0?(r.A.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Fi.Mn(e,l.Yn.SUBSCRIBED).tt}removeFromSubscriptionGroup(e){return!(0,s.rK)(e,"remove user from subscription group","subscription group ID",!1)||e.length<=0?(r.A.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Fi.Mn(e,l.Yn.UNSUBSCRIBED).tt}setLineId(e){return(0,s.rK)(e,"set LINE user ID","the ID",!0)&&0!==(null==e?void 0:e.length)?e&&e.length>l.Jn?(r.A.error(`Rejected LINE user ID ${e} because it is longer than ${l.Jn} characters.`),!1):this.Cs.nu("native_line_id",e):(r.A.error("setLineId requires a non-empty ID"),!1)}An(e,t,n,i,r){this.Cs.An(e,t,n,i,r),this.Fi.Qn()}xn(e){this.Cs.xn(e)}}l.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},l.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},l.Fn=/^[0-9 .\\(\\)\\+\\-]+$/,l.Yn={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},l.Xn="user_id",l.lu="custom",l.ur=997,l.Jn=33},6423:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(62406),r=n(63539),o=n(91691),s=n(13786);class a{constructor(e,t,n){this.eu=e,null==e&&(e=r.A.ce()),!n||isNaN(n)?this.Gl=(new Date).valueOf():this.Gl=n,this.eu=e,this.ql=(new Date).valueOf(),this.kl=t}bt(){return`g:${encodeURIComponent(this.eu)}|e:${this.kl}|c:${this.Gl}|l:${this.ql}`}static hE(e){if("string"!=typeof e)return null;const t=e.lastIndexOf("|e:"),n=e.substring(0,t),i=n.split("g:")[1];let r;return r=/[|:]/.test(i)?encodeURIComponent(i):i,e.replace(n,`g:${r}`)}static Rn(e){let t;if("string"==typeof e)try{const n=e.split("|");if(!(0,o.cy)(n)||4!==n.length)return null;const i=e=>e.split(":")[1],r=e=>{const t=parseInt(i(e));if(!isNaN(t))return t};t=new a(decodeURIComponent(i(n[0])),r(n[1]),r(n[2])),t.ql=r(n[3])}catch(t){i.A.info(`Unable to parse cookie string ${e}, failed with error: ${(0,s.u)(t)}`)}else{if(null==e||null==e.g)return null;t=new a(e.g,e.e,e.c),t.ql=e.l}return t}}},6813:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46987),r=n(58478);t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,e))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(r.PARAM_TYPES,t,e),e}}},7126:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(62406),r=n(93039),o=n(13537),s=n(98853);const a={ut:(e,t,n)=>{var a,c;const l=new s.A,u=r.Ay.P();if(!u)return i.A.info(`Not logging event with type "${e}" because the current session ID could not be found.`),l;const d=u.Qo();return l.$e.push(new o.A(n||(null===(a=r.Ay.ir())||void 0===a?void 0:a.getUserId()),e,(new Date).valueOf(),d,t)),l.tt=(null===(c=r.Ay.j())||void 0===c?void 0:c.Vo(l.$e))||!1,l}}},7247:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(85408),r=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new i.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=r},8289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(58478),r=n(29043),o=n(13089),s=n(62408),a=function(){function e(e,t,n,a){this.guid=r.guid(),this.type=e,this.serviceIdentifier=n,this.name=new s.QueryableString(t||""),this.metadata=new Array;var c=null;"string"==typeof a?c=new o.Metadata(i.NAMED_TAG,a):a instanceof o.Metadata&&(c=a),null!==c&&this.metadata.push(c)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++)if(n[t].key===e)return!0;return!1},e.prototype.isArray=function(){return this.hasTag(i.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(i.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(i.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some(function(e){return e.key!==i.INJECT_TAG&&e.key!==i.MULTI_INJECT_TAG&&e.key!==i.NAME_TAG&&e.key!==i.UNMANAGED_TAG&&e.key!==i.NAMED_TAG})},e.prototype.isOptional=function(){return this.matchesTag(i.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===i.NAMED_TAG})[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return e.key!==i.INJECT_TAG&&e.key!==i.MULTI_INJECT_TAG&&e.key!==i.NAME_TAG&&e.key!==i.UNMANAGED_TAG&&e.key!==i.NAMED_TAG}):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(i.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var i=0,r=t.metadata;i<r.length;i++){var o=r[i];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=a},8792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(58478),r=n(13089),o=n(1797);t.optional=function(){return function(e,t,n){var s=new r.Metadata(i.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(e,t,n,s):o.tagProperty(e,t,s)}}},10866:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(e,t){this.database=e,this.vd=t,this.parent="undefined"==typeof window?self:window,this.database=e,this.vd=t}Dd(){if("indexedDB"in this.parent)return this.parent.indexedDB}isSupported(){var e;try{if(null==this.Dd())return!1;{const t=null===(e=this.Dd())||void 0===e?void 0:e.open("Braze IndexedDB Support Test");if(t&&(t.onupgradeneeded=()=>t.result.close(),t.onsuccess=()=>t.result.close()),"undefined"!=typeof window){const e=window,t=e.chrome||e.browser||e.pd;if(t&&t.runtime&&t.runtime.id)return this.vd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}}catch(e){return this.vd.info("Not using IndexedDB for storage due to following error: "+e),!1}}Bd(e,t){var n;const i=null===(n=this.Dd())||void 0===n?void 0:n.open(this.database.Sd,this.database.VERSION);if(null==i)return"function"==typeof t&&t(),!1;const r=this;return i.onupgradeneeded=e=>{var t;r.vd.info("Upgrading indexedDB "+r.database.Sd+" to v"+r.database.VERSION+"...");const n=null===(t=e.target)||void 0===t?void 0:t.result;for(const e in r.database.Ms){const t=e;r.database.Ms.hasOwnProperty(e)&&!n.objectStoreNames.contains(r.database.Ms[t])&&n.createObjectStore(r.database.Ms[t])}},i.onsuccess=n=>{var i;const o=null===(i=n.target)||void 0===i?void 0:i.result;o.onversionchange=()=>{o.close(),"function"==typeof t&&t(),r.vd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},e(o)},i.onerror=e=>{var n;const i=e;return r.vd.info("Could not open indexedDB "+r.database.Sd+" v"+r.database.VERSION+": "+(null===(n=i.target)||void 0===n?void 0:n.errorCode)),"function"==typeof t&&t(),!0},!0}setItem(e,t,n,i,r){if(!this.isSupported())return"function"==typeof r&&r(),!1;const o=this;return this.Bd(s=>{if(!s.objectStoreNames.contains(e))return o.vd.error("Could not store object "+t+" in "+e+" on indexedDB "+o.database.Sd+" - "+e+" is not a valid objectStore"),"function"==typeof r&&r(),void s.close();const a=s.transaction([e],"readwrite");a.oncomplete=()=>s.close();const c=a.objectStore(e).put(n,t);c.onerror=()=>{o.vd.error("Could not store object "+t+" in "+e+" on indexedDB "+o.database.Sd),"function"==typeof r&&r()},c.onsuccess=()=>{"function"==typeof i&&i()}},r)}getItem(e,t,n){if(!this.isSupported())return!1;const i=this;return this.Bd(r=>{if(!r.objectStoreNames.contains(e))return i.vd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+i.database.Sd+" - "+e+" is not a valid objectStore"),void r.close();const o=r.transaction([e],"readonly");o.oncomplete=()=>r.close();const s=o.objectStore(e).get(t);s.onerror=()=>{i.vd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+i.database.Sd)},s.onsuccess=e=>{var t;const i=null===(t=e.target)||void 0===t?void 0:t.result;null!=i&&n(i)}})}cr(e,t,n){if(!this.isSupported())return"function"==typeof n&&n(),!1;const i=this;return this.Bd(r=>{if(!r.objectStoreNames.contains(e))return i.vd.error("Could not retrieve last record from "+e+" on indexedDB "+i.database.Sd+" - "+e+" is not a valid objectStore"),"function"==typeof n&&n(),void r.close();const o=r.transaction([e],"readonly");o.oncomplete=()=>r.close();const s=o.objectStore(e).openCursor(null,"prev");s.onerror=()=>{i.vd.error("Could not open cursor for "+e+" on indexedDB "+i.database.Sd),"function"==typeof n&&n()},s.onsuccess=e=>{var i;const r=null===(i=e.target)||void 0===i?void 0:i.result;null!=r&&null!=r.value&&null!=r.key?t(r.key,r.value):"function"==typeof n&&n()}},n)}ge(e,t){if(!this.isSupported())return!1;const n=this;return this.Bd(i=>{if(!i.objectStoreNames.contains(e))return n.vd.error("Could not delete record "+t+" from "+e+" on indexedDB "+n.database.Sd+" - "+e+" is not a valid objectStore"),void i.close();const r=i.transaction([e],"readwrite");r.oncomplete=()=>i.close(),r.objectStore(e).delete(t).onerror=()=>{n.vd.error("Could not delete record "+t+" from "+e+" on indexedDB "+n.database.Sd)}})}Ns(e,t){if(!this.isSupported())return!1;const n=this;return this.Bd(i=>{if(!i.objectStoreNames.contains(e))return n.vd.error("Could not retrieve objects from "+e+" on indexedDB "+n.database.Sd+" - "+e+" is not a valid objectStore"),void i.close();const r=i.transaction([e],"readwrite");r.oncomplete=()=>i.close();const o=r.objectStore(e),s=o.openCursor(),a=[];s.onerror=()=>{a.length>0?(n.vd.info("Cursor closed midway through for "+e+" on indexedDB "+n.database.Sd),t(a)):n.vd.error("Could not open cursor for "+e+" on indexedDB "+n.database.Sd)},s.onsuccess=e=>{var n;const i=null===(n=e.target)||void 0===n?void 0:n.result;null!=i?(null!=i.value&&null!=i.key&&(o.delete(i.key).onsuccess=()=>{a.push(i.value)}),"function"==typeof i.continue&&i.continue()):a.length>0&&t(a)}})}clearData(){if(!this.isSupported())return!1;const e=[];for(const t in this.database.Ms){const n=t;this.database.Ms.hasOwnProperty(t)&&this.database.Ms[n]!==this.database.Ms.pe&&e.push(this.database.Ms[n])}const t=this;return this.Bd(function(n){const i=n.transaction(e,"readwrite");i.oncomplete=()=>n.close();for(let n=0;n<e.length;n++){const r=e[n];i.objectStore(r).clear().onerror=function(){t.vd.error("Could not clear "+this.source.name+" on indexedDB "+t.database.Sd)}}i.onerror=function(){t.vd.error("Could not clear object stores on indexedDB "+t.database.Sd)}})}}i.Ls={Fs:{Sd:"AppboyServiceWorkerAsyncStorage",VERSION:6,Ms:{Nu:"data",jr:"pushClicks",cu:"pushSubscribed",Cd:"fallbackDevice",Js:"cardUpdates",pe:"optOut",kr:"pendingData",yh:"sdkAuthenticationSignature"},be:1}}},11223:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeoutError=void 0,t.isTimeoutError=function(e){return"code"in e&&"ECONNABORTED"===e.code}},12242:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(42996),r=n(46987),o=n(2209),s=n(58478),a=n(38108),c=n(51588),l=n(62317),u=n(13089),d=n(96899),h=n(38323),p=n(78699),f=n(8289);function g(e){return e._bindingDictionary}function m(e,t,n,o,s){var a,l=_(n.container,s.serviceIdentifier);return l.length===i.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof s.serviceIdentifier&&e.getConstructorMetadata(s.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(s.serviceIdentifier).toSelf(),l=_(n.container,s.serviceIdentifier)),a=t?l:l.filter(function(e){var t=new p.Request(e.serviceIdentifier,n,o,e,s);return e.constraint(t)}),function(e,t,n,o){switch(t.length){case i.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var s=c.getServiceIdentifierAsString(e),a=r.NOT_REGISTERED;throw a+=c.listMetadataForTarget(s,n),a+=c.listRegisteredBindingsForServiceIdentifier(o,s,_),new Error(a);case i.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case i.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;throw s=c.getServiceIdentifierAsString(e),a=r.AMBIGUOUS_MATCH+" "+s,a+=c.listRegisteredBindingsForServiceIdentifier(o,s,_),new Error(a)}}(s.serviceIdentifier,a,s,n.container),a}function v(e,t,n,i,s,a){var c,l;if(null===s){c=m(e,t,i,null,a),l=new p.Request(n,i,null,c,a);var u=new d.Plan(i,l);i.addPlan(u)}else c=m(e,t,i,s,a),l=s.addChildRequest(a.serviceIdentifier,c,a);c.forEach(function(t){var n=null;if(a.isArray())n=l.addChildRequest(t.serviceIdentifier,t,a);else{if(t.cache)return;n=l}if(t.type===o.BindingTypeEnum.Instance&&null!==t.implementationType){var s=h.getDependencies(e,t.implementationType);if(!i.container.options.skipBaseClassChecks){var c=h.getBaseClassDependencyCount(e,t.implementationType);if(s.length<c){var u=r.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(t.implementationType));throw new Error(u)}}s.forEach(function(t){v(e,!1,t.serviceIdentifier,i,n,t)})}})}function _(e,t){var n=[],i=g(e);return i.hasKey(t)?n=i.get(t):null!==e.parent&&(n=_(e.parent,t)),n}t.getBindingDictionary=g,t.plan=function(e,t,n,i,r,o,d,h){void 0===h&&(h=!1);var p=new l.Context(t),g=function(e,t,n,i,r,o){var a=e?s.MULTI_INJECT_TAG:s.INJECT_TAG,c=new u.Metadata(a,n),l=new f.Target(t,"",n,c);if(void 0!==r){var d=new u.Metadata(r,o);l.metadata.push(d)}return l}(n,i,r,0,o,d);try{return v(e,h,r,p,null,g),p}catch(e){throw a.isStackOverflowExeption(e)&&p.plan&&c.circularDependencyToException(p.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,i){var r=new f.Target(o.TargetTypeEnum.Variable,"",t,new u.Metadata(n,i)),s=new l.Context(e);return new p.Request(t,s,null,[],r)}},12421:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},13089:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(58478),r=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===i.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=r},13537:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(93039),r=n(86009),o=n(91691),s=n(55586);class a{constructor(e,t,n,i,r){this.userId=e,this.type=t,this.time=n,this.sessionId=i,this.data=r,this.userId=e,this.type=t,this.time=(0,s.S3)(n),this.sessionId=i,this.data=r}Nr(){var e;const t={name:this.type,time:(0,s.UK)(this.time),data:this.data||{},session_id:this.sessionId};null!=this.userId&&(t.user_id=this.userId);const n=(null===(e=i.Ay.Sr())||void 0===e?void 0:e.jh())||!1;if(!t.user_id&&!n){const e=(0,r.b)(i.Ay.j());e&&(t.alias=e)}return t}bt(){return{u:this.userId,t:this.type,ts:this.time,s:this.sessionId,d:this.data}}static fromJson(e){return new a(e.user_id,e.name,e.time,e.session_id,e.data)}static RE(e){return null!=e&&(0,o.Gv)(e)&&null!=e.t&&""!==e.t}static Rn(e){return new a(e.u,e.t,e.ts,e.s,e.d)}}},13762:function(e,t){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidRpcError=void 0;var r=function(e){function t(n){var i=e.call(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i.name="InvalidRpcError",i}return i(t,e),t}(Error);t.InvalidRpcError=r},13786:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});const i=e=>e instanceof Error?e.message:String(e)},14528:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={OPEN:"open",Rr:"purchase",hr:"push_click",Ee:"custom_event",Zr:"iam_click",As:"test"}},14596:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeAccountStateCmd=void 0;var o=n(3949),s=n(41079),a=function(e){function t(t,n){return e.call(this,t,s.NotificationsRpcMethods.CHANGE_ACCOUNT_STATE,n)||this}return r(t,e),t}(o.NotificationsRequest);t.ChangeAccountStateCmd=a},14971:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(91691);class r{constructor(){}ef(){}ff(){}ec(e){}static nf(e,t){if(e&&t)if(e=e.toLowerCase(),(0,i.cy)(t.cf)){for(let n=0;n<t.cf.length;n++)if(-1!==e.indexOf(t.cf[n].toLowerCase()))return t.identity}else if(-1!==e.indexOf(t.cf.toLowerCase()))return t.identity}}const o={rO:"Chrome",eO:"Edge",oO:"Opera",Bg:"Safari",OO:"Firefox"},s="Android",a="iOS";class c extends r{constructor(){if(super(),this.userAgentData=navigator.userAgentData,this.browser=null,this.version=null,this.userAgentData){const e=this.Bc();this.browser=e.browser||"Unknown Browser",this.version=e.version||"Unknown Version"}this.OS=null}ef(){return this.browser}ff(){return this.version}ec(e){if(this.OS)return Promise.resolve(this.OS);const t=t=>{for(let n=0;n<e.length;n++){const i=c.nf(t,e[n]);if(i)return this.OS=i,this.OS}return t};return this.userAgentData.platform?Promise.resolve(t(this.userAgentData.platform)):this.getHighEntropyValues().then(e=>e.platform?t(e.platform):navigator.platform).catch(()=>navigator.platform)}Bc(){const e={},t=this.userAgentData.brands;if(t&&t.length)for(const n of t){const t=this.Vc(o),i=n.brand.match(t);if(i&&i.length>0){e.browser=i[0],e.version=n.version;break}}return e}Vc(e){const t=[];for(const n in e){const i=n;t.push(e[i])}return new RegExp("("+t.join("|")+")","i")}getHighEntropyValues(){return this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()}}class l extends r{constructor(){super(),this.fd=l.Bc(navigator.userAgent||"")}ef(){return this.fd[0]||"Unknown Browser"}ff(){return this.fd[1]||"Unknown Version"}ec(e){for(let t=0;t<e.length;t++){const n=e[t].string;let i=l.nf(n,e[t]);if(i)return"Mac"===i&&navigator.maxTouchPoints>1&&(i=a),Promise.resolve(i)}return Promise.resolve(navigator.platform)}static Bc(e){let t,n=e.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];if(-1!==e.indexOf("(Web0S; Linux/SmartTV)"))return["LG Smart TV",null];if(-1!==e.indexOf("CrKey"))return["Chromecast",null];if(-1!==e.indexOf("BRAVIA")||-1!==e.indexOf("SonyCEBrowser")||-1!==e.indexOf("SonyDTV"))return["Sony Smart TV",null];if(-1!==e.indexOf("PhilipsTV"))return["Philips Smart TV",null];if(e.match(/\b(Roku)\b/))return["Roku",null];if(e.match(/\bAFTM\b/))return["Amazon Fire Stick",null];if(n[1]===o.rO&&(t=e.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/),null!=t))return t=t.slice(1),t[0]=t[0].replace("OPR",o.oO),t[0]=t[0].replace("EdgA",o.eO),"Edg"===t[0]&&(t[0]=o.eO),[t[0],t[1]];if(n[1]===o.Bg&&(t=e.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/),null!=t))return t=t.slice(1),t[0]=t[0].replace("EdgiOS",o.eO),[t[0],t[1]];if(n=n[2]?[n[1],n[2]]:[null,null],n[0]===o.Bg&&null!=(t=e.match(/version\/(\.?\d+(\.\d+)*)/i))&&n.splice(1,1,t[1]),null!=(t=e.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&n.splice(1,1,t[2]),n[0]===o.oO&&null!=(t=e.match(/mini\/(\.?\d+(\.\d+)*)/i)))return["Opera Mini",t[1]||""];if(n[0]){const e=n[0].toLowerCase();"crios"===e&&(n[0]=o.rO),"tizen"===e&&(n[0]="Samsung Smart TV",n[1]=null),"samsungbrowser"===e&&(n[0]="Samsung Browser")}return n}}class u{constructor(){const e=navigator.userAgentData?c:l;this.Sg=new e,this.userAgent=navigator.userAgent,this.browser=this.Sg.ef(),this.version=this.Sg.ff(),this.OS=null,this.ec().then(e=>this.OS=e);const t=navigator;this.language=(t.userLanguage||t.language||t.browserLanguage||t.systemLanguage||"").toLowerCase(),this.Ja=u.vg(this.userAgent)}fE(){return this.browser===o.Bg}ic(){return this.OS||null}ec(){return this.OS?Promise.resolve(this.OS):this.Sg.ec(u.kg).then(e=>(this.OS=e,e))}static vg(e){e=e.toLowerCase();const t=["googlebot","bingbot","slurp","duckduckbot","baiduspider","yandex","facebookexternalhit","sogou","ia_archiver","https://github.com/prerender/prerender","aolbuild","bingpreview","msnbot","adsbot","mediapartners-google","teoma","taiko"];for(let n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1}}u.kg=[{string:navigator.platform,cf:"Win",identity:"Windows"},{string:navigator.platform,cf:"Mac",identity:"Mac"},{string:navigator.platform,cf:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,cf:"FreeBSD",identity:"FreeBSD"},{string:navigator.platform,cf:"OpenBSD",identity:"OpenBSD"},{string:navigator.platform,cf:"Nintendo",identity:"Nintendo"},{string:navigator.platform,cf:"SunOS",identity:"SunOS"},{string:navigator.platform,cf:"PlayStation",identity:"PlayStation"},{string:navigator.platform,cf:"X11",identity:"X11"},{string:navigator.userAgent,cf:["iPhone","iPad","iPod"],identity:a},{string:navigator.platform,cf:"Pike v",identity:a},{string:navigator.userAgent,cf:["Web0S"],identity:"WebOS"},{string:navigator.userAgent,cf:"Tizen",identity:"Tizen"},{string:navigator.platform,cf:["Linux armv7l","Android"],identity:s},{string:navigator.userAgent,cf:["Android"],identity:s},{string:navigator.platform,cf:"Linux",identity:"Linux"}];const d=new u},16508:(e,t,n)=>{"use strict";t.d=void 0;var i=n(25384),r=n(26539),o=n(4494),s=n(14596),a=function(){function e(e){this.url=e}return e.prototype.addUser=function(e){return new r.AddUserCmd(this.url,e).run()},e.prototype.changeAccountState=function(e){return new s.ChangeAccountStateCmd(this.url,e).run()},e.prototype.checkUserState=function(e){return new o.CheckUserCmd(this.url,e).run()},e.prototype.getProviderToken=function(e){return new i.GetProviderTokenCmd(this.url,e).run()},e}();t.d=a},17248:(e,t,n)=>{"use strict";var i=n(6151),r=n(82304),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(o,"")}var h=[["#","hash"],["?","query"],function(e,t){return g(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function f(e){var t,i=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},r={},o=typeof(e=e||i);if("blob:"===e.protocol)r=new v(unescape(e.pathname),{});else if("string"===o)for(t in r=new v(e,{}),p)delete r[t];else if("object"===o){for(t in e)t in p||(r[t]=e[t]);void 0===r.slashes&&(r.slashes=a.test(e.href))}return r}function g(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=(e=d(e)).replace(s,""),t=t||{};var n,i=l.exec(e),r=i[1]?i[1].toLowerCase():"",o=!!i[2],a=!!i[3],c=0;return o?a?(n=i[2]+i[3]+i[4],c=i[2].length+i[3].length):(n=i[2]+i[4],c=i[2].length):a?(n=i[3]+i[4],c=i[3].length):n=i[4],"file:"===r?c>=2&&(n=n.slice(2)):g(r)?n=i[4]:r?o&&(n=n.slice(2)):c>=2&&g(t.protocol)&&(n=i[4]),{protocol:r,slashes:o||g(r),slashesCount:c,rest:n}}function v(e,t,n){if(e=(e=d(e)).replace(s,""),!(this instanceof v))return new v(e,t,n);var o,a,c,l,p,_,w=h.slice(),y=typeof t,b=this,E=0;for("object"!==y&&"string"!==y&&(n=t,t=null),n&&"function"!=typeof n&&(n=r.parse),o=!(a=m(e||"",t=f(t))).protocol&&!a.slashes,b.slashes=a.slashes||o&&t.slashes,b.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!g(b.protocol)))&&(w[3]=[/(.*)/,"pathname"]);E<w.length;E++)"function"!=typeof(l=w[E])?(c=l[0],_=l[1],c!=c?b[_]=e:"string"==typeof c?~(p="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(b[_]=e.slice(0,p),e=e.slice(p+l[2])):(b[_]=e.slice(p),e=e.slice(0,p))):(p=c.exec(e))&&(b[_]=p[1],e=e.slice(0,p.index)),b[_]=b[_]||o&&l[3]&&t[_]||"",l[4]&&(b[_]=b[_].toLowerCase())):e=l(e,b);n&&(b.query=n(b.query)),o&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=n.length,r=n[i-1],o=!1,s=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),s++):s&&(0===i&&(o=!0),n.splice(i,1),s--);return o&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&g(b.protocol)&&(b.pathname="/"+b.pathname),i(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(p=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,p),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(p+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&g(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}v.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||r.parse)(t)),o[e]=t;break;case"port":o[e]=t,i(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(o.username=t.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<h.length;l++){var u=h[l];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&g(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=r.stringify);var t,n=this,i=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(n.protocol&&n.slashes||g(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):"file:"!==n.protocol&&g(n.protocol)&&!i&&"/"!==n.pathname&&(s+="@"),(":"===i[i.length-1]||c.test(n.hostname)&&!n.port)&&(i+=":"),s+=i+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},v.extractProtocol=m,v.location=f,v.trimLeft=d,v.qs=r,e.exports=v},18062:(e,t,n)=>{!function(e){"use strict";var t={item:3,autoWidth:!1,slideMove:1,slideMargin:10,addClass:"",mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:400,auto:!1,pauseOnHover:!1,loop:!1,slideEndAnimation:!0,pause:2e3,keyPress:!1,controls:!0,prevHtml:"",nextHtml:"",rtl:!1,adaptiveHeight:!1,vertical:!1,verticalHeight:500,vThumbWidth:100,thumbItem:10,pager:!0,gallery:!1,galleryMargin:5,thumbMargin:5,currentPagerPosition:"middle",enableTouch:!0,enableDrag:!0,freeMove:!0,swipeThreshold:40,responsive:[],onBeforeStart:function(e){},onSliderLoad:function(e){},onBeforeSlide:function(e,t){},onAfterSlide:function(e,t){},onBeforeNextSlide:function(e,t){},onBeforePrevSlide:function(e,t){}};e.fn.lightSlider=function(n){if(0===this.length)return this;if(this.length>1)return this.each(function(){e(this).lightSlider(n)}),this;var i={},r=e.extend(!0,{},t,n),o={},s=this;i.$el=this,"fade"===r.mode&&(r.vertical=!1);var a=s.children(),c=e(window).width(),l=null,u=0,d=0,h=!1,p=0,f="",g=0,m=!0===r.vertical?"height":"width",v=!0===r.vertical?"margin-bottom":"margin-right",_=0,w=0,y=0,b=0,E=null,S="ontouchstart"in document.documentElement,T={chbreakpoint:function(){if(c=e(window).width(),r.responsive.length){var t;if(!1===r.autoWidth&&(t=r.item),c<r.responsive[0].breakpoint)for(var n=0;n<r.responsive.length;n++)c<r.responsive[n].breakpoint&&(r.responsive[n].breakpoint,l=r.responsive[n]);if(null!=l)for(var i in l.settings)l.settings.hasOwnProperty(i)&&(void 0!==o[i]&&null!==o[i]||(o[i]=r[i]),r[i]=l.settings[i]);if(!e.isEmptyObject(o)&&c>r.responsive[0].breakpoint)for(var s in o)o.hasOwnProperty(s)&&(r[s]=o[s]);!1===r.autoWidth&&_>0&&y>0&&t!==r.item&&(g=Math.round(_/((y+r.slideMargin)*r.slideMove)))}},calSW:function(){!1===r.autoWidth&&(y=(p-(r.item*r.slideMargin-r.slideMargin))/r.item)},calWidth:function(e){var t=!0===e?f.find(".lslide").length:a.length;if(!1===r.autoWidth)d=t*(y+r.slideMargin);else{d=0;for(var n=0;n<t;n++)d+=parseInt(a.eq(n).width())+r.slideMargin}return d}};return(i={doCss:function(){return!(!r.useCSS||!function(){for(var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],t=document.documentElement,n=0;n<e.length;n++)if(e[n]in t.style)return!0}())},keyPress:function(){r.keyPress&&e(document).on("keyup.lightslider",function(t){e(":focus").is("input, textarea")||(t.preventDefault?t.preventDefault():t.returnValue=!1,37===t.keyCode?s.goToPrevSlide():39===t.keyCode&&s.goToNextSlide())})},controls:function(){r.controls&&(s.after('<div class="lSAction"><a class="lSPrev">'+r.prevHtml+'</a><a class="lSNext">'+r.nextHtml+"</a></div>"),r.autoWidth?T.calWidth(!1)<p&&f.find(".lSAction").hide():u<=r.item&&f.find(".lSAction").hide(),f.find(".lSAction a").on("click",function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,"lSPrev"===e(this).attr("class")?s.goToPrevSlide():s.goToNextSlide(),!1}))},initialStyle:function(){var e=this;"fade"===r.mode&&(r.autoWidth=!1,r.slideEndAnimation=!1),r.auto&&(r.slideEndAnimation=!1),r.autoWidth&&(r.slideMove=1,r.item=1),r.loop&&(r.slideMove=1,r.freeMove=!1),r.onBeforeStart.call(this,s),T.chbreakpoint(),s.addClass("lightSlider").wrap('<div class="lSSlideOuter '+r.addClass+'"><div class="lSSlideWrapper"></div></div>'),f=s.parent(".lSSlideWrapper"),!0===r.rtl&&f.parent().addClass("lSrtl"),r.vertical?(f.parent().addClass("vertical"),p=r.verticalHeight,f.css("height",p+"px")):p=s.outerWidth(),a.addClass("lslide"),!0===r.loop&&"slide"===r.mode&&(T.calSW(),T.clone=function(){if(T.calWidth(!0)>p){for(var t=0,n=0,i=0;i<a.length&&(n++,!((t+=parseInt(s.find(".lslide").eq(i).width())+r.slideMargin)>=p+r.slideMargin));i++);var o=!0===r.autoWidth?n:r.item;if(o<s.find(".clone.left").length)for(var c=0;c<s.find(".clone.left").length-o;c++)a.eq(c).remove();if(o<s.find(".clone.right").length)for(var l=a.length-1;l>a.length-1-s.find(".clone.right").length;l--)g--,a.eq(l).remove();for(var u=s.find(".clone.right").length;u<o;u++)s.find(".lslide").eq(u).clone().removeClass("lslide").addClass("clone right").appendTo(s),g++;for(var d=s.find(".lslide").length-s.find(".clone.left").length;d>s.find(".lslide").length-o;d--)s.find(".lslide").eq(d-1).clone().removeClass("lslide").addClass("clone left").prependTo(s);a=s.children()}else a.hasClass("clone")&&(s.find(".clone").remove(),e.move(s,0))},T.clone()),T.sSW=function(){u=a.length,!0===r.rtl&&!1===r.vertical&&(v="margin-left"),!1===r.autoWidth&&a.css(m,y+"px"),a.css(v,r.slideMargin+"px"),d=T.calWidth(!1),s.css(m,d+"px"),!0===r.loop&&"slide"===r.mode&&!1===h&&(g=s.find(".clone.left").length)},T.calL=function(){a=s.children(),u=a.length},this.doCss()&&f.addClass("usingCss"),T.calL(),"slide"===r.mode?(T.calSW(),T.sSW(),!0===r.loop&&(_=e.slideValue(),this.move(s,_)),!1===r.vertical&&this.setHeight(s,!1)):(this.setHeight(s,!0),s.addClass("lSFade"),this.doCss()||(a.fadeOut(0),a.eq(g).fadeIn(0))),!0===r.loop&&"slide"===r.mode?a.eq(g).addClass("active"):a.first().addClass("active")},pager:function(){var e=this;if(T.createPager=function(){b=(p-(r.thumbItem*r.thumbMargin-r.thumbMargin))/r.thumbItem;var t=f.find(".lslide"),n=f.find(".lslide").length,i=0,o="",a=0;for(i=0;i<n;i++){"slide"===r.mode&&(r.autoWidth?a+=(parseInt(t.eq(i).width())+r.slideMargin)*r.slideMove:a=i*((y+r.slideMargin)*r.slideMove));var c=t.eq(i*r.slideMove).attr("data-thumb");if(!0===r.gallery?o+='<li style="width:100%;'+m+":"+b+"px;"+v+":"+r.thumbMargin+'px"><a href="#"><img src="'+c+'" /></a></li>':o+='<li><a href="#">'+(i+1)+"</a></li>","slide"===r.mode&&a>=d-p-r.slideMargin){i+=1;var l=2;r.autoWidth&&(o+='<li><a href="#">'+(i+1)+"</a></li>",l=1),i<l?(o=null,f.parent().addClass("noPager")):f.parent().removeClass("noPager");break}}var u=f.parent();u.find(".lSPager").html(o),!0===r.gallery&&(!0===r.vertical&&u.find(".lSPager").css("width",r.vThumbWidth+"px"),w=i*(r.thumbMargin+b)+.5,u.find(".lSPager").css({property:w+"px","transition-duration":r.speed+"ms"}),!0===r.vertical&&f.parent().css("padding-right",r.vThumbWidth+r.galleryMargin+"px"),u.find(".lSPager").css(m,w+"px"));var h=u.find(".lSPager").find("li");h.first().addClass("active"),h.on("click",function(){return!0===r.loop&&"slide"===r.mode?g+=h.index(this)-u.find(".lSPager").find("li.active").index():g=h.index(this),s.mode(!1),!0===r.gallery&&e.slideThumb(),!1})},r.pager){var t="lSpg";r.gallery&&(t="lSGallery"),f.after('<ul class="lSPager '+t+'"></ul>');var n=r.vertical?"margin-left":"margin-top";f.parent().find(".lSPager").css(n,r.galleryMargin+"px"),T.createPager()}setTimeout(function(){T.init()},0)},setHeight:function(e,t){var n=null,i=this;n=r.loop?e.children(".lslide ").first():e.children().first();var o=function(){var i=n.outerHeight(),r=0,o=i;t&&(i=0,r=100*o/p),e.css({height:i+"px","padding-bottom":r+"%"})};o(),n.find("img").length?n.find("img")[0].complete?(o(),E||i.auto()):n.find("img").on("load",function(){setTimeout(function(){o(),E||i.auto()},100)}):E||i.auto()},active:function(e,t){this.doCss()&&"fade"===r.mode&&f.addClass("on");var n,i,o=0;g*r.slideMove<u?(e.removeClass("active"),this.doCss()||"fade"!==r.mode||!1!==t||e.fadeOut(r.speed),o=!0===t?g:g*r.slideMove,!0===t&&(i=(n=e.length)-1,o+1>=n&&(o=i)),!0===r.loop&&"slide"===r.mode&&(o=!0===t?g-s.find(".clone.left").length:g*r.slideMove,!0===t&&(i=(n=e.length)-1,o+1===n?o=i:o+1>n&&(o=0))),this.doCss()||"fade"!==r.mode||!1!==t||e.eq(o).fadeIn(r.speed),e.eq(o).addClass("active")):(e.removeClass("active"),e.eq(e.length-1).addClass("active"),this.doCss()||"fade"!==r.mode||!1!==t||(e.fadeOut(r.speed),e.eq(o).fadeIn(r.speed)))},move:function(e,t){!0===r.rtl&&(t=-t),this.doCss()?!0===r.vertical?e.css({transform:"translate3d(0px, "+-t+"px, 0px)","-webkit-transform":"translate3d(0px, "+-t+"px, 0px)"}):e.css({transform:"translate3d("+-t+"px, 0px, 0px)","-webkit-transform":"translate3d("+-t+"px, 0px, 0px)"}):!0===r.vertical?e.css("position","relative").animate({top:-t+"px"},r.speed,r.easing):e.css("position","relative").animate({left:-t+"px"},r.speed,r.easing);var n=f.parent().find(".lSPager").find("li");this.active(n,!0)},fade:function(){this.active(a,!1);var e=f.parent().find(".lSPager").find("li");this.active(e,!0)},slide:function(){var e=this;T.calSlide=function(){d>p&&(_=e.slideValue(),e.active(a,!1),_>d-p-r.slideMargin?_=d-p-r.slideMargin:_<0&&(_=0),e.move(s,_),!0===r.loop&&"slide"===r.mode&&(g>=u-s.find(".clone.left").length/r.slideMove&&e.resetSlide(s.find(".clone.left").length),0===g&&e.resetSlide(f.find(".lslide").length)))},T.calSlide()},resetSlide:function(e){var t=this;f.find(".lSAction a").addClass("disabled"),setTimeout(function(){g=e,f.css("transition-duration","0ms"),_=t.slideValue(),t.active(a,!1),i.move(s,_),setTimeout(function(){f.css("transition-duration",r.speed+"ms"),f.find(".lSAction a").removeClass("disabled")},50)},r.speed+100)},slideValue:function(){var e=0;if(!1===r.autoWidth)e=g*((y+r.slideMargin)*r.slideMove);else{e=0;for(var t=0;t<g;t++)e+=parseInt(a.eq(t).width())+r.slideMargin}return e},slideThumb:function(){var e;switch(r.currentPagerPosition){case"left":e=0;break;case"middle":e=p/2-b/2;break;case"right":e=p-b}var t=g-s.find(".clone.left").length,n=f.parent().find(".lSPager");"slide"===r.mode&&!0===r.loop&&(t>=n.children().length?t=0:t<0&&(t=n.children().length));var i=t*(b+r.thumbMargin)-e;i+p>w&&(i=w-p-r.thumbMargin),i<0&&(i=0),this.move(n,i)},auto:function(){r.auto&&(clearInterval(E),E=setInterval(function(){s.goToNextSlide()},r.pause))},pauseOnHover:function(){var t=this;r.auto&&r.pauseOnHover&&(f.on("mouseenter",function(){e(this).addClass("ls-hover"),s.pause(),r.auto=!0}),f.on("mouseleave",function(){e(this).removeClass("ls-hover"),f.find(".lightSlider").hasClass("lsGrabbing")||t.auto()}))},touchMove:function(e,t){if(f.css("transition-duration","0ms"),"slide"===r.mode){var n=_-(e-t);if(n>=d-p-r.slideMargin)if(!1===r.freeMove)n=d-p-r.slideMargin;else{var i=d-p-r.slideMargin;n=i+(n-i)/5}else n<0&&(!1===r.freeMove?n=0:n/=5);this.move(s,n)}},touchEnd:function(e){if(f.css("transition-duration",r.speed+"ms"),"slide"===r.mode){var t=!1,n=!0;(_-=e)>d-p-r.slideMargin?(_=d-p-r.slideMargin,!1===r.autoWidth&&(t=!0)):_<0&&(_=0);var i=function(e){var n=0;if(t||e&&(n=1),r.autoWidth)for(var i=0,o=0;o<a.length&&(i+=parseInt(a.eq(o).width())+r.slideMargin,g=o+n,!(i>=_));o++);else{var s=_/((y+r.slideMargin)*r.slideMove);g=parseInt(s)+n,_>=d-p-r.slideMargin&&s%1!=0&&g++}};e>=r.swipeThreshold?(i(!1),n=!1):e<=-r.swipeThreshold&&(i(!0),n=!1),s.mode(n),this.slideThumb()}else e>=r.swipeThreshold?s.goToPrevSlide():e<=-r.swipeThreshold&&s.goToNextSlide()},enableDrag:function(){var t=this;if(!S){var n=0,i=0,o=!1;f.find(".lightSlider").addClass("lsGrab"),f.on("mousedown",function(t){if(d<p&&0!==d)return!1;"lSPrev"!==e(t.target).attr("class")&&"lSNext"!==e(t.target).attr("class")&&(n=!0===r.vertical?t.pageY:t.pageX,o=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,f.scrollLeft+=1,f.scrollLeft-=1,f.find(".lightSlider").removeClass("lsGrab").addClass("lsGrabbing"),clearInterval(E))}),e(window).on("mousemove",function(e){o&&(i=!0===r.vertical?e.pageY:e.pageX,t.touchMove(i,n))}),e(window).on("mouseup",function(s){if(o){f.find(".lightSlider").removeClass("lsGrabbing").addClass("lsGrab"),o=!1;var a=(i=!0===r.vertical?s.pageY:s.pageX)-n;Math.abs(a)>=r.swipeThreshold&&e(window).on("click.ls",function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopImmediatePropagation(),t.stopPropagation(),e(window).off("click.ls")}),t.touchEnd(a)}})}},enableTouch:function(){var e=this;if(S){var t={},n={};f.on("touchstart",function(e){n=e.originalEvent.targetTouches[0],t.pageX=e.originalEvent.targetTouches[0].pageX,t.pageY=e.originalEvent.targetTouches[0].pageY,clearInterval(E)}),f.on("touchmove",function(i){if(d<p&&0!==d)return!1;var o=i.originalEvent;n=o.targetTouches[0];var s=Math.abs(n.pageX-t.pageX),a=Math.abs(n.pageY-t.pageY);!0===r.vertical?(3*a>s&&i.preventDefault(),e.touchMove(n.pageY,t.pageY)):(3*s>a&&i.preventDefault(),e.touchMove(n.pageX,t.pageX))}),f.on("touchend",function(){if(d<p&&0!==d)return!1;var i;i=!0===r.vertical?n.pageY-t.pageY:n.pageX-t.pageX,e.touchEnd(i)})}},build:function(){var t=this;t.initialStyle(),this.doCss()&&(!0===r.enableTouch&&t.enableTouch(),!0===r.enableDrag&&t.enableDrag()),e(window).on("focus",function(){t.auto()}),e(window).on("blur",function(){clearInterval(E)}),t.pager(),t.pauseOnHover(),t.controls(),t.keyPress()}}).build(),T.init=function(){T.chbreakpoint(),!0===r.vertical?(p=r.item>1?r.verticalHeight:a.outerHeight(),f.css("height",p+"px")):p=f.outerWidth(),!0===r.loop&&"slide"===r.mode&&T.clone(),T.calL(),"slide"===r.mode&&s.removeClass("lSSlide"),"slide"===r.mode&&(T.calSW(),T.sSW()),setTimeout(function(){"slide"===r.mode&&s.addClass("lSSlide")},1e3),r.pager&&T.createPager(),!0===r.adaptiveHeight&&!1===r.vertical&&s.css("height",a.eq(g).outerHeight(!0)),!1===r.adaptiveHeight&&("slide"===r.mode?!1===r.vertical?i.setHeight(s,!1):i.auto():i.setHeight(s,!0)),!0===r.gallery&&i.slideThumb(),"slide"===r.mode&&i.slide(),!1===r.autoWidth?a.length<=r.item?f.find(".lSAction").hide():f.find(".lSAction").show():T.calWidth(!1)<p&&0!==d?f.find(".lSAction").hide():f.find(".lSAction").show()},s.goToPrevSlide=function(){g>0?(r.onBeforePrevSlide.call(this,s,g),g--,s.mode(!1),!0===r.gallery&&i.slideThumb()):!0===r.loop?(r.onBeforePrevSlide.call(this,s,g),"fade"===r.mode&&(g=parseInt((u-1)/r.slideMove)),s.mode(!1),!0===r.gallery&&i.slideThumb()):!0===r.slideEndAnimation&&(s.addClass("leftEnd"),setTimeout(function(){s.removeClass("leftEnd")},400))},s.goToNextSlide=function(){var e=!0;"slide"===r.mode&&(e=i.slideValue()<d-p-r.slideMargin),g*r.slideMove<u-r.slideMove&&e?(r.onBeforeNextSlide.call(this,s,g),g++,s.mode(!1),!0===r.gallery&&i.slideThumb()):!0===r.loop?(r.onBeforeNextSlide.call(this,s,g),g=0,s.mode(!1),!0===r.gallery&&i.slideThumb()):!0===r.slideEndAnimation&&(s.addClass("rightEnd"),setTimeout(function(){s.removeClass("rightEnd")},400))},s.mode=function(e){!0===r.adaptiveHeight&&!1===r.vertical&&s.css("height",a.eq(g).outerHeight(!0)),!1===h&&("slide"===r.mode?i.doCss()&&(s.addClass("lSSlide"),""!==r.speed&&f.css("transition-duration",r.speed+"ms"),""!==r.cssEasing&&f.css("transition-timing-function",r.cssEasing)):i.doCss()&&(""!==r.speed&&s.css("transition-duration",r.speed+"ms"),""!==r.cssEasing&&s.css("transition-timing-function",r.cssEasing))),e||r.onBeforeSlide.call(this,s,g),"slide"===r.mode?i.slide():i.fade(),f.hasClass("ls-hover")||i.auto(),setTimeout(function(){e||r.onAfterSlide.call(this,s,g)},r.speed),h=!0},s.play=function(){s.goToNextSlide(),r.auto=!0,i.auto()},s.pause=function(){r.auto=!1,clearInterval(E)},s.refresh=function(){T.init()},s.getCurrentSlideCount=function(){var e=g;if(r.loop){var t=f.find(".lslide").length,n=s.find(".clone.left").length;e=g<=n-1?t+(g-n):g>=t+n?g-t-n:g-n}return e+1},s.getTotalSlideCount=function(){return f.find(".lslide").length},s.goToSlide=function(e){g=r.loop?e+s.find(".clone.left").length-1:e,s.mode(!1),!0===r.gallery&&i.slideThumb()},s.destroy=function(){s.lightSlider&&(s.goToPrevSlide=function(){},s.goToNextSlide=function(){},s.mode=function(){},s.play=function(){},s.pause=function(){},s.refresh=function(){},s.getCurrentSlideCount=function(){},s.getTotalSlideCount=function(){},s.goToSlide=function(){},s.lightSlider=null,T={init:function(){}},s.parent().parent().find(".lSAction, .lSPager").remove(),s.removeClass("lightSlider lSFade lSSlide lsGrab lsGrabbing leftEnd right").removeAttr("style").unwrap().unwrap(),s.children().removeAttr("style"),a.removeClass("lslide active"),s.find(".clone").remove(),a=null,E=null,h=!1,g=0)},setTimeout(function(){r.onSliderLoad.call(this,s)},10),e(window).on("resize orientationchange",function(e){setTimeout(function(){e.preventDefault?e.preventDefault():e.returnValue=!1,T.init()},200)}),this}}(n(44436))},19747:(e,t,n)=>{var i,r,o;o=function(){function e(e,t){for(var n=0,i=e.length;n<i;++n)if(!t(e[n]))return c;return 1}function t(t,n){e(t,function(e){return n(e),1})}function n(o,s,a){function c(e){return e.call?e():h[e]}function u(){if(! --_)for(var n in h[v]=1,m&&m(),f)e(n.split("|"),c)&&!t(f[n],c)&&(f[n]=[])}o=o[l]?o:[o];var d=s&&s.call,m=d?s:a,v=d?o.join(""):s,_=o.length;return setTimeout(function(){t(o,function e(t,n){return null===t?u():(!n&&!/^https?:\/\//.test(t)&&r&&(t=-1===t.indexOf(".js")?r+t+".js":r+t),g[t]?(v&&(p[v]=1),2==g[t]?u():setTimeout(function(){e(t,!0)},0)):(g[t]=1,v&&(p[v]=1),void i(t,u)))})},0),n}function i(e,t){var n,i=s.createElement("script");i.onload=i.onerror=i[d]=function(){i[u]&&!/^c|loade/.test(i[u])||n||(i.onload=i[d]=null,n=1,g[e]=2,t())},i.async=1,i.src=o?e+(-1===e.indexOf("?")?"?":"&")+o:e,a.insertBefore(i,a.lastChild)}var r,o,s=document,a=s.getElementsByTagName("head")[0],c=!1,l="push",u="readyState",d="onreadystatechange",h={},p={},f={},g={};return n.get=i,n.order=function(e,t,i){!function r(o){o=e.shift(),e.length?n(o,r):n(o,t,i)}()},n.path=function(e){r=e},n.urlArgs=function(e){o=e},n.ready=function(i,r,o){i=i[l]?i:[i];var s=[];return!t(i,function(e){h[e]||s[l](e)})&&e(i,function(e){return h[e]})?r():function(e){f[e]=f[e]||[],f[e][l](r),o&&o(s)}(i.join("|")),n},n.done=function(e){n([null],e)},n},e.exports?e.exports=o():void 0===(r="function"==typeof(i=o)?i.call(t,n,t,e):i)||(e.exports=r)},20280:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NIL:()=>A,parse:()=>d,stringify:()=>s.A,v1:()=>l,v3:()=>y,v4:()=>b.A,v5:()=>T,validate:()=>u.A,version:()=>C});var i,r,o=n(31127),s=n(34431),a=0,c=0;const l=function(e,t,n){var l=t&&n||0,u=t||new Array(16),d=(e=e||{}).node||i,h=void 0!==e.clockseq?e.clockseq:r;if(null==d||null==h){var p=e.random||(e.rng||o.A)();null==d&&(d=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=r=16383&(p[6]<<8|p[7]))}var f=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:c+1,m=f-a+(g-c)/1e4;if(m<0&&void 0===e.clockseq&&(h=h+1&16383),(m<0||f>a)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=g,r=h;var v=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var _=f/4294967296*1e4&268435455;u[l++]=_>>>8&255,u[l++]=255&_,u[l++]=_>>>24&15|16,u[l++]=_>>>16&255,u[l++]=h>>>8|128,u[l++]=255&h;for(var w=0;w<6;++w)u[l+w]=d[w];return t||(0,s.A)(u)};var u=n(22582);const d=function(e){if(!(0,u.A)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function h(e,t,n){function i(e,i,r,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof i&&(i=d(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(i),a.set(e,i.length),(a=n(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,r){o=o||0;for(var c=0;c<16;++c)r[o+c]=a[c];return r}return(0,s.A)(a)}try{i.name=e}catch(e){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i}function p(e){return 14+(e+64>>>9<<4)+1}function f(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function g(e,t,n,i,r,o){return f((s=f(f(t,e),f(i,o)))<<(a=r)|s>>>32-a,n);var s,a}function m(e,t,n,i,r,o,s){return g(t&n|~t&i,e,t,r,o,s)}function v(e,t,n,i,r,o,s){return g(t&i|n&~i,e,t,r,o,s)}function _(e,t,n,i,r,o,s){return g(t^n^i,e,t,r,o,s)}function w(e,t,n,i,r,o,s){return g(n^(t|~i),e,t,r,o,s)}const y=h("v3",48,function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,i="0123456789abcdef",r=0;r<n;r+=8){var o=e[r>>5]>>>r%32&255,s=parseInt(i.charAt(o>>>4&15)+i.charAt(15&o),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[p(t)-1]=t;for(var n=1732584193,i=-271733879,r=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=n,c=i,l=r,u=o;n=m(n,i,r,o,e[s],7,-680876936),o=m(o,n,i,r,e[s+1],12,-389564586),r=m(r,o,n,i,e[s+2],17,606105819),i=m(i,r,o,n,e[s+3],22,-1044525330),n=m(n,i,r,o,e[s+4],7,-176418897),o=m(o,n,i,r,e[s+5],12,1200080426),r=m(r,o,n,i,e[s+6],17,-1473231341),i=m(i,r,o,n,e[s+7],22,-45705983),n=m(n,i,r,o,e[s+8],7,1770035416),o=m(o,n,i,r,e[s+9],12,-1958414417),r=m(r,o,n,i,e[s+10],17,-42063),i=m(i,r,o,n,e[s+11],22,-1990404162),n=m(n,i,r,o,e[s+12],7,1804603682),o=m(o,n,i,r,e[s+13],12,-40341101),r=m(r,o,n,i,e[s+14],17,-1502002290),n=v(n,i=m(i,r,o,n,e[s+15],22,1236535329),r,o,e[s+1],5,-165796510),o=v(o,n,i,r,e[s+6],9,-1069501632),r=v(r,o,n,i,e[s+11],14,643717713),i=v(i,r,o,n,e[s],20,-373897302),n=v(n,i,r,o,e[s+5],5,-701558691),o=v(o,n,i,r,e[s+10],9,38016083),r=v(r,o,n,i,e[s+15],14,-660478335),i=v(i,r,o,n,e[s+4],20,-405537848),n=v(n,i,r,o,e[s+9],5,568446438),o=v(o,n,i,r,e[s+14],9,-1019803690),r=v(r,o,n,i,e[s+3],14,-187363961),i=v(i,r,o,n,e[s+8],20,1163531501),n=v(n,i,r,o,e[s+13],5,-1444681467),o=v(o,n,i,r,e[s+2],9,-51403784),r=v(r,o,n,i,e[s+7],14,1735328473),n=_(n,i=v(i,r,o,n,e[s+12],20,-1926607734),r,o,e[s+5],4,-378558),o=_(o,n,i,r,e[s+8],11,-2022574463),r=_(r,o,n,i,e[s+11],16,1839030562),i=_(i,r,o,n,e[s+14],23,-35309556),n=_(n,i,r,o,e[s+1],4,-1530992060),o=_(o,n,i,r,e[s+4],11,1272893353),r=_(r,o,n,i,e[s+7],16,-155497632),i=_(i,r,o,n,e[s+10],23,-1094730640),n=_(n,i,r,o,e[s+13],4,681279174),o=_(o,n,i,r,e[s],11,-358537222),r=_(r,o,n,i,e[s+3],16,-722521979),i=_(i,r,o,n,e[s+6],23,76029189),n=_(n,i,r,o,e[s+9],4,-640364487),o=_(o,n,i,r,e[s+12],11,-421815835),r=_(r,o,n,i,e[s+15],16,530742520),n=w(n,i=_(i,r,o,n,e[s+2],23,-995338651),r,o,e[s],6,-198630844),o=w(o,n,i,r,e[s+7],10,1126891415),r=w(r,o,n,i,e[s+14],15,-1416354905),i=w(i,r,o,n,e[s+5],21,-57434055),n=w(n,i,r,o,e[s+12],6,1700485571),o=w(o,n,i,r,e[s+3],10,-1894986606),r=w(r,o,n,i,e[s+10],15,-1051523),i=w(i,r,o,n,e[s+1],21,-2054922799),n=w(n,i,r,o,e[s+8],6,1873313359),o=w(o,n,i,r,e[s+15],10,-30611744),r=w(r,o,n,i,e[s+6],15,-1560198380),i=w(i,r,o,n,e[s+13],21,1309151649),n=w(n,i,r,o,e[s+4],6,-145523070),o=w(o,n,i,r,e[s+11],10,-1120210379),r=w(r,o,n,i,e[s+2],15,718787259),i=w(i,r,o,n,e[s+9],21,-343485551),n=f(n,a),i=f(i,c),r=f(r,l),o=f(o,u)}return[n,i,r,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(p(t)),i=0;i<t;i+=8)n[i>>5]|=(255&e[i/8])<<i%32;return n}(e),8*e.length))});var b=n(28682);function E(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:case 3:return t^n^i;case 2:return t&n^t&i^n&i}}function S(e,t){return e<<t|e>>>32-t}const T=h("v5",80,function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=[];for(var r=0;r<i.length;++r)e.push(i.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),c=0;c<s;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=e[64*c+4*u]<<24|e[64*c+4*u+1]<<16|e[64*c+4*u+2]<<8|e[64*c+4*u+3];a[c]=l}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<s;++d){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=a[d][p];for(var f=16;f<80;++f)h[f]=S(h[f-3]^h[f-8]^h[f-14]^h[f-16],1);for(var g=n[0],m=n[1],v=n[2],_=n[3],w=n[4],y=0;y<80;++y){var b=Math.floor(y/20),T=S(g,5)+E(b,m,v,_)+w+t[b]+h[y]>>>0;w=_,_=v,v=S(m,30)>>>0,m=g,g=T}n[0]=n[0]+g>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+v>>>0,n[3]=n[3]+_>>>0,n[4]=n[4]+w>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}),A="00000000-0000-0000-0000-000000000000",C=function(e){if(!(0,u.A)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},20759:e=>{"use strict";e.exports=function(e,t){for(var n={},i=Object.keys(e),r=Array.isArray(t),o=0;o<i.length;o++){var s=i[o],a=e[s];(r?-1!==t.indexOf(s):t(s,a,e))&&(n[s]=a)}return n}},20986:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46987),r=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(i.NULL_ARGUMENT);if(null==t)throw new Error(i.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(i.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(i.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(i.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(i.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach(function(n,i){var r=n.filter(function(t){return!e(t)});r.length>0?t._map.set(i,r):t._map.delete(i)})},e.prototype.hasKey=function(e){if(null==e)throw new Error(i.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach(function(e,n){e.forEach(function(e){return t.add(n,e.clone())})}),t},e.prototype.traverse=function(e){this._map.forEach(function(t,n){e(n,t)})},e}();t.Lookup=r},21135:(e,t,n)=>{"use strict";const i=n(61840),r=n(68014),o=n(60136),s=n(20759);function a(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function l(e,t){return t.decode?r(e):e}function u(e){return Array.isArray(e)?e.sort():"object"==typeof e?u(Object.keys(e)).sort((e,t)=>Number(e)-Number(t)).map(t=>e[t]):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function f(e,t){a((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,i)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===i[e]&&(i[e]={}),i[e][t[1]]=n):i[e]=n};case"bracket":return(e,n,i)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==i[e]?i[e]=[].concat(i[e],n):i[e]=[n]:i[e]=n};case"comma":case"separator":return(t,n,i)=>{const r="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!r&&l(n,e).includes(e.arrayFormatSeparator);n=o?l(n,e):n;const s=r||o?n.split(e.arrayFormatSeparator).map(t=>l(t,e)):null===n?n:l(n,e);i[t]=s};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const r of e.split("&")){if(""===r)continue;let[e,s]=o(t.decode?r.replace(/\+/g," "):r,"=");s=void 0===s?null:["comma","separator"].includes(t.arrayFormat)?s:l(s,t),n(l(e,t),s,i)}for(const e of Object.keys(i)){const n=i[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=p(n[e],t);else i[e]=p(n,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce((e,t)=>{const n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=u(n):e[t]=n,e},Object.create(null))}t.extract=h,t.parse=f,t.stringify=(e,t)=>{if(!e)return"";a((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],i=function(e){switch(e.arrayFormat){case"index":return t=>(n,i)=>{const r=n.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[c(t,e),"[",r,"]"].join("")]:[...n,[c(t,e),"[",c(r,e),"]=",c(i,e)].join("")]};case"bracket":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[c(t,e),"[]"].join("")]:[...n,[c(t,e),"[]=",c(i,e)].join("")];case"comma":case"separator":return t=>(n,i)=>null==i||0===i.length?n:0===n.length?[[c(t,e),"=",c(i,e)].join("")]:[[n,c(i,e)].join(e.arrayFormatSeparator)];default:return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,c(t,e)]:[...n,[c(t,e),"=",c(i,e)].join("")]}}(t),r={};for(const t of Object.keys(e))n(t)||(r[t]=e[t]);const o=Object.keys(r);return!1!==t.sort&&o.sort(t.sort),o.map(n=>{const r=e[n];return void 0===r?"":null===r?c(n,t):Array.isArray(r)?r.reduce(i(n),[]).join("&"):c(n,t)+"="+c(r,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,i]=o(e,"#");return Object.assign({url:n.split("?")[0]||"",query:f(h(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:l(i,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const i=d(e.url).split("?")[0]||"",r=t.extract(e.url),o=t.parse(r,{sort:!1}),s=Object.assign(o,e.query);let a=t.stringify(s,n);a&&(a=`?${a}`);let l=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l=`#${c(e.fragmentIdentifier,n)}`),`${i}${a}${l}`},t.pick=(e,n,i)=>{i=Object.assign({parseFragmentIdentifier:!0},i);const{url:r,query:o,fragmentIdentifier:a}=t.parseUrl(e,i);return t.stringifyUrl({url:r,query:s(o,n),fragmentIdentifier:a},i)},t.exclude=(e,n,i)=>{const r=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,r,i)}},22582:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(12421);const r=function(e){return"string"==typeof e&&i.A.test(e)}},25384:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.GetProviderTokenCmd=void 0;var o=n(3949),s=n(41079),a=function(e){function t(t,n){return e.call(this,t,s.NotificationsRpcMethods.GET_PROVIDER_TOKEN,n)||this}return r(t,e),t}(o.NotificationsRequest);t.GetProviderTokenCmd=a},25530:function(e,t,n){var i,r,o;!function(){"use strict";r=[n(44436)],void 0===(o="function"==typeof(i=function(e){var t={data:{index:0,name:"scrollbar"},firefox:/firefox/i.test(navigator.userAgent),macosx:/mac/i.test(navigator.platform),msedge:/edge\/\d+/i.test(navigator.userAgent),msie:/(msie|trident)/i.test(navigator.userAgent),mobile:/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),overlay:null,scroll:null,scrolls:[],webkit:/webkit/i.test(navigator.userAgent)&&!/edge\/\d+/i.test(navigator.userAgent)};t.scrolls.add=function(e){this.remove(e).push(e)},t.scrolls.remove=function(t){for(;e.inArray(t,this)>=0;)this.splice(e.inArray(t,this),1);return this};var n={autoScrollSize:!0,autoUpdate:!0,debug:!1,disableBodyScroll:!1,duration:200,ignoreMobile:!1,ignoreOverlay:!1,isRtl:!1,scrollStep:30,showArrows:!1,stepScrolling:!0,scrollx:null,scrolly:null,onDestroy:null,onFallback:null,onInit:null,onScroll:null,onUpdate:null},i=function(i){var r;t.scroll||(t.overlay=!((r=c(!0)).height||r.width),t.scroll=c(),a(),e(window).resize(function(){var e=!1;if(t.scroll&&(t.scroll.height||t.scroll.width)){var n=c();n.height===t.scroll.height&&n.width===t.scroll.width||(t.scroll=n,e=!0)}a(e)})),this.container=i,this.namespace=".scrollbar_"+t.data.index++,this.options=e.extend({},n,window.jQueryScrollbarOptions||{}),this.scrollTo=null,this.scrollx={},this.scrolly={},i.data(t.data.name,this),t.scrolls.add(this)};i.prototype={destroy:function(){if(this.wrapper){this.container.removeData(t.data.name),t.scrolls.remove(this);var n=this.container.scrollLeft(),i=this.container.scrollTop();this.container.insertBefore(this.wrapper).css({height:"",margin:"","max-height":""}).removeClass("scroll-content scroll-scrollx_visible scroll-scrolly_visible").off(this.namespace).scrollLeft(n).scrollTop(i),this.scrollx.scroll.removeClass("scroll-scrollx_visible").find("div").addBack().off(this.namespace),this.scrolly.scroll.removeClass("scroll-scrolly_visible").find("div").addBack().off(this.namespace),this.wrapper.remove(),e(document).add("body").off(this.namespace),e.isFunction(this.options.onDestroy)&&this.options.onDestroy.apply(this,[this.container])}},init:function(n){var i=this,r=this.container,o=this.containerWrapper||r,s=this.namespace,a=e.extend(this.options,n||{}),c={x:this.scrollx,y:this.scrolly},u=this.wrapper,d={},h={scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop()};if(t.mobile&&a.ignoreMobile||t.overlay&&a.ignoreOverlay||t.macosx&&!t.webkit)return e.isFunction(a.onFallback)&&a.onFallback.apply(this,[r]),!1;if(u)(d={height:"auto","margin-bottom":-1*t.scroll.height+"px","max-height":""})[a.isRtl?"margin-left":"margin-right"]=-1*t.scroll.width+"px",o.css(d);else{if(this.wrapper=u=e("<div>").addClass("scroll-wrapper").addClass(r.attr("class")).css("position","absolute"===r.css("position")?"absolute":"relative").insertBefore(r).append(r),a.isRtl&&u.addClass("scroll--rtl"),r.is("textarea")&&(this.containerWrapper=o=e("<div>").insertBefore(r).append(r),u.addClass("scroll-textarea")),(d={height:"auto","margin-bottom":-1*t.scroll.height+"px","max-height":""})[a.isRtl?"margin-left":"margin-right"]=-1*t.scroll.width+"px",o.addClass("scroll-content").css(d),r.on("scroll"+s,function(n){var o=r.scrollLeft(),s=r.scrollTop();if(a.isRtl)switch(!0){case t.firefox:o=Math.abs(o);case t.msedge||t.msie:o=r[0].scrollWidth-r[0].clientWidth-o}e.isFunction(a.onScroll)&&a.onScroll.call(i,{maxScroll:c.y.maxScrollOffset,scroll:s,size:c.y.size,visible:c.y.visible},{maxScroll:c.x.maxScrollOffset,scroll:o,size:c.x.size,visible:c.x.visible}),c.x.isVisible&&c.x.scroll.bar.css("left",o*c.x.kx+"px"),c.y.isVisible&&c.y.scroll.bar.css("top",s*c.y.kx+"px")}),u.on("scroll"+s,function(){u.scrollTop(0).scrollLeft(0)}),a.disableBodyScroll){var p=function(e){l(e)?c.y.isVisible&&c.y.mousewheel(e):c.x.isVisible&&c.x.mousewheel(e)};u.on("MozMousePixelScroll"+s,p),u.on("mousewheel"+s,p),t.mobile&&u.on("touchstart"+s,function(t){var n=t.originalEvent.touches&&t.originalEvent.touches[0]||t,i=n.pageX,o=n.pageY,a=r.scrollLeft(),c=r.scrollTop();e(document).on("touchmove"+s,function(e){var t=e.originalEvent.targetTouches&&e.originalEvent.targetTouches[0]||e;r.scrollLeft(a+i-t.pageX),r.scrollTop(c+o-t.pageY),e.preventDefault()}),e(document).on("touchend"+s,function(){e(document).off(s)})})}e.isFunction(a.onInit)&&a.onInit.apply(this,[r])}e.each(c,function(n,o){var u=null,d=1,h="x"===n?"scrollLeft":"scrollTop",p=a.scrollStep,f=function(){var e=r[h]();r[h](e+p),1==d&&e+p>=g&&(e=r[h]()),-1==d&&e+p<=g&&(e=r[h]()),r[h]()==e&&u&&u()},g=0;o.scroll||(o.scroll=i._getScroll(a["scroll"+n]).addClass("scroll-"+n),a.showArrows&&o.scroll.addClass("scroll-element_arrows_visible"),o.mousewheel=function(e){if(!o.isVisible||"x"===n&&l(e))return!0;if("y"===n&&!l(e))return c.x.mousewheel(e),!0;var t=-1*e.originalEvent.wheelDelta||e.originalEvent.detail,s=o.size-o.visible-o.offset;return t||("x"===n&&e.originalEvent.deltaX?t=40*e.originalEvent.deltaX:"y"===n&&e.originalEvent.deltaY&&(t=40*e.originalEvent.deltaY)),(t>0&&g<s||t<0&&g>0)&&((g+=t)<0&&(g=0),g>s&&(g=s),i.scrollTo=i.scrollTo||{},i.scrollTo[h]=g,setTimeout(function(){i.scrollTo&&(r.stop().animate(i.scrollTo,240,"linear",function(){g=r[h]()}),i.scrollTo=null)},1)),e.preventDefault(),!1},o.scroll.on("MozMousePixelScroll"+s,o.mousewheel).on("mousewheel"+s,o.mousewheel).on("mouseenter"+s,function(){g=r[h]()}),o.scroll.find(".scroll-arrow, .scroll-element_track").on("mousedown"+s,function(s){if(1!=s.which)return!0;d=1;var c={eventOffset:s["x"===n?"pageX":"pageY"],maxScrollValue:o.size-o.visible-o.offset,scrollbarOffset:o.scroll.bar.offset()["x"===n?"left":"top"],scrollbarSize:o.scroll.bar["x"===n?"outerWidth":"outerHeight"]()},l=0,m=0;if(e(this).hasClass("scroll-arrow")){if(d=e(this).hasClass("scroll-arrow_more")?1:-1,p=a.scrollStep*d,g=d>0?c.maxScrollValue:0,a.isRtl)switch(!0){case t.firefox:g=d>0?0:-1*c.maxScrollValue;case t.msie||t.msedge:}}else d=c.eventOffset>c.scrollbarOffset+c.scrollbarSize?1:c.eventOffset<c.scrollbarOffset?-1:0,"x"===n&&a.isRtl&&(t.msie||t.msedge)&&(d*=-1),p=Math.round(.75*o.visible)*d,g=c.eventOffset-c.scrollbarOffset-(a.stepScrolling?1==d?c.scrollbarSize:0:Math.round(c.scrollbarSize/2)),g=r[h]()+g/o.kx;return i.scrollTo=i.scrollTo||{},i.scrollTo[h]=a.stepScrolling?r[h]()+p:g,a.stepScrolling&&(u=function(){g=r[h](),clearInterval(m),clearTimeout(l),l=0,m=0},l=setTimeout(function(){m=setInterval(f,40)},a.duration+100)),setTimeout(function(){i.scrollTo&&(r.animate(i.scrollTo,a.duration),i.scrollTo=null)},1),i._handleMouseDown(u,s)}),o.scroll.bar.on("mousedown"+s,function(c){if(1!=c.which)return!0;var l=c["x"===n?"pageX":"pageY"],u=r[h]();return o.scroll.addClass("scroll-draggable"),e(document).on("mousemove"+s,function(e){var i=parseInt((e["x"===n?"pageX":"pageY"]-l)/o.kx,10);"x"===n&&a.isRtl&&(t.msie||t.msedge)&&(i*=-1),r[h](u+i)}),i._handleMouseDown(function(){o.scroll.removeClass("scroll-draggable"),g=r[h]()},c)}))}),e.each(c,function(e,t){var n="scroll-scroll"+e+"_visible",i="x"==e?c.y:c.x;t.scroll.removeClass(n),i.scroll.removeClass(n),o.removeClass(n)}),e.each(c,function(t,n){e.extend(n,"x"==t?{offset:parseInt(r.css("left"),10)||0,size:r.prop("scrollWidth"),visible:u.width()}:{offset:parseInt(r.css("top"),10)||0,size:r.prop("scrollHeight"),visible:u.height()})}),this._updateScroll("x",this.scrollx),this._updateScroll("y",this.scrolly),e.isFunction(a.onUpdate)&&a.onUpdate.apply(this,[r]),e.each(c,function(e,t){var n="x"===e?"left":"top",i="x"===e?"outerWidth":"outerHeight",o="x"===e?"width":"height",s=parseInt(r.css(n),10)||0,c=t.size,l=t.visible+s,u=t.scroll.size[i]()+(parseInt(t.scroll.size.css(n),10)||0);a.autoScrollSize&&(t.scrollbarSize=parseInt(u*l/c,10),t.scroll.bar.css(o,t.scrollbarSize+"px")),t.scrollbarSize=t.scroll.bar[i](),t.kx=(u-t.scrollbarSize)/(c-l)||1,t.maxScrollOffset=c-l}),r.scrollLeft(h.scrollLeft).scrollTop(h.scrollTop).trigger("scroll")},_getScroll:function(t){var n={advanced:['<div class="scroll-element">','<div class="scroll-element_corner"></div>','<div class="scroll-arrow scroll-arrow_less"></div>','<div class="scroll-arrow scroll-arrow_more"></div>','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_inner-wrapper">','<div class="scroll-element_inner scroll-element_track">','<div class="scroll-element_inner-bottom"></div>',"</div>","</div>",'<div class="scroll-bar">','<div class="scroll-bar_body">','<div class="scroll-bar_body-inner"></div>',"</div>",'<div class="scroll-bar_bottom"></div>','<div class="scroll-bar_center"></div>',"</div>","</div>","</div>"].join(""),simple:['<div class="scroll-element">','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_track"></div>','<div class="scroll-bar"></div>',"</div>","</div>"].join("")};return n[t]&&(t=n[t]),t||(t=n.simple),t="string"==typeof t?e(t).appendTo(this.wrapper):e(t),e.extend(t,{bar:t.find(".scroll-bar"),size:t.find(".scroll-element_size"),track:t.find(".scroll-element_track")}),t},_handleMouseDown:function(t,n){var i=this.namespace;return e(document).on("blur"+i,function(){e(document).add("body").off(i),t&&t()}),e(document).on("dragstart"+i,function(e){return e.preventDefault(),!1}),e(document).on("mouseup"+i,function(){e(document).add("body").off(i),t&&t()}),e("body").on("selectstart"+i,function(e){return e.preventDefault(),!1}),n&&n.preventDefault(),!1},_updateScroll:function(n,i){var r=this.container,o=this.containerWrapper||r,s="scroll-scroll"+n+"_visible",a="x"===n?this.scrolly:this.scrollx,c=parseInt(this.container.css("x"===n?"left":"top"),10)||0,l=this.wrapper,u=i.size,d=i.visible+c;i.isVisible=u-d>1,i.isVisible?(i.scroll.addClass(s),a.scroll.addClass(s),o.addClass(s)):(i.scroll.removeClass(s),a.scroll.removeClass(s),o.removeClass(s)),"y"===n&&(r.is("textarea")||u<d?o.css({height:d+t.scroll.height+"px","max-height":"none"}):o.css({"max-height":d+t.scroll.height+"px"})),i.size==r.prop("scrollWidth")&&a.size==r.prop("scrollHeight")&&i.visible==l.width()&&a.visible==l.height()&&i.offset==(parseInt(r.css("left"),10)||0)&&a.offset==(parseInt(r.css("top"),10)||0)||(e.extend(this.scrollx,{offset:parseInt(r.css("left"),10)||0,size:r.prop("scrollWidth"),visible:l.width()}),e.extend(this.scrolly,{offset:parseInt(r.css("top"),10)||0,size:this.container.prop("scrollHeight"),visible:l.height()}),this._updateScroll("x"===n?"y":"x",a))}};var r=i;e.fn.scrollbar=function(n,i){return"string"!=typeof n&&(i=n,n="init"),void 0===i&&(i=[]),e.isArray(i)||(i=[i]),this.not("body, .scroll-wrapper").each(function(){var o=e(this),s=o.data(t.data.name);(s||"init"===n)&&(s||(s=new r(o)),s[n]&&s[n].apply(s,i))}),this},e.fn.scrollbar.options=n;var o,s,a=(o=0,function(e){var n,i,r,s,c,l,u;for(n=0;n<t.scrolls.length;n++)i=(s=t.scrolls[n]).container,r=s.options,c=s.wrapper,l=s.scrollx,u=s.scrolly,(e||r.autoUpdate&&c&&c.is(":visible")&&(i.prop("scrollWidth")!=l.size||i.prop("scrollHeight")!=u.size||c.width()!=l.visible||c.height()!=u.visible))&&(s.init(),r.debug&&(window.console&&console.log({scrollHeight:i.prop("scrollHeight")+":"+s.scrolly.size,scrollWidth:i.prop("scrollWidth")+":"+s.scrollx.size,visibleHeight:c.height()+":"+s.scrolly.visible,visibleWidth:c.width()+":"+s.scrollx.visible},!0)));clearTimeout(o),o=setTimeout(a,300)});function c(n){if(t.webkit&&!n)return{height:0,width:0};if(!t.data.outer){var i={border:"none","box-sizing":"content-box",height:"200px",margin:"0",padding:"0",width:"200px"};t.data.inner=e("<div>").css(e.extend({},i)),t.data.outer=e("<div>").css(e.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},i)).append(t.data.inner).appendTo("body")}return t.data.outer.scrollLeft(1e3).scrollTop(1e3),{height:Math.ceil(t.data.outer.offset().top-t.data.inner.offset().top||0),width:Math.ceil(t.data.outer.offset().left-t.data.inner.offset().left||0)}}function l(e){var t=e.originalEvent;return!(t.axis&&t.axis===t.HORIZONTAL_AXIS||t.wheelDeltaX)}window.angular&&(s=window.angular).module("jQueryScrollbar",[]).provider("jQueryScrollbar",function(){var e=n;return{setOptions:function(t){s.extend(e,t)},$get:function(){return{options:s.copy(e)}}}}).directive("jqueryScrollbar",["jQueryScrollbar","$parse",function(e,t){return{restrict:"AC",link:function(n,i,r){var o=t(r.jqueryScrollbar)(n);i.scrollbar(o||e.options).on("$destroy",function(){i.scrollbar("destroy")})}}}])})?i.apply(t,r):i)||(e.exports=o)}()},25984:function(e){var t;t=function(){return function(){var e={686:function(e,t,n){"use strict";n.d(t,{default:function(){return y}});var i=n(279),r=n.n(i),o=n(370),s=n.n(o),a=n(817),c=n.n(a);function l(e){try{return document.execCommand(e)}catch(e){return!1}}var u=function(e){var t=c()(e);return l("cut"),t},d=function(e,t){var n=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(i,"px"),n.setAttribute("readonly",""),n.value=e,n}(e);t.container.appendChild(n);var i=c()(n);return l("copy"),n.remove(),i},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof e?n=d(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?n=d(e.value,t):(n=c()(e),l("copy")),n};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function _(e,t){var n="data-clipboard-".concat(e);if(t.hasAttribute(n))return t.getAttribute(n)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,n,i,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=a.call(this)).resolveOptions(t),n.listenClick(e),n}return t=c,n=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===f(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=s()(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,n=this.action(t)||"copy",i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,n=void 0===t?"copy":t,i=e.container,r=e.target,o=e.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==r){if(!r||"object"!==p(r)||1!==r.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&r.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(r.hasAttribute("readonly")||r.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return o?h(o,{container:i}):r?"cut"===n?u(r):h(r,{container:i}):void 0}({action:n,container:this.container,target:this.target(t),text:this.text(t)});this.emit(i?"success":"error",{action:n,text:i,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return _("action",e)}},{key:"defaultTarget",value:function(e){var t=_("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return _("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],i=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return h(e,t)}},{key:"cut",value:function(e){return u(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}],n&&g(t.prototype,n),i&&g(t,i),c}(r()),y=w},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,n){var i=n(828);function r(e,t,n,i,r){var s=o.apply(this,arguments);return e.addEventListener(n,s,r),{destroy:function(){e.removeEventListener(n,s,r)}}}function o(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&r.call(e,n)}}e.exports=function(e,t,n,i,o){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return r(e,t,n,i,o)}))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,n){var i=n(879),r=n(438);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(i.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}(e,t,n);if(i.string(e))return function(e,t,n){return r(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(e),i.removeAllRanges(),i.addRange(r),t=i.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var i=this;function r(){i.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,s=i.length;o<s;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(686)}().default},e.exports=t()},26539:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AddUserCmd=void 0;var o=n(3949),s=n(41079),a=function(e){function t(t,n){return e.call(this,t,s.NotificationsRpcMethods.NEW,n)||this}return r(t,e),t}(o.NotificationsRequest);t.AddUserCmd=a},28191:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=function(e){return function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach(function(n){return e.bind(n).toService(t)})}}}},28682:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(31127),r=n(34431);const o=function(e,t,n){var o=(e=e||{}).random||(e.rng||i.A)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=o[s];return t}return(0,r.A)(o)}},28975:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(48244),r=n(32287);const o={O:{Nu:"data",wi:"content_cards/sync",Le:"feature_flags/sync",Er:"template",K:"banners/sync"},Vu:e=>null==e?void 0:e.ft(r.d.gt.lE),sm:e=>null==e?void 0:e.ft(r.d.gt.SE),nm:(e,t)=>{null==e||e.Bt(r.d.gt.lE,t)},rm:(e,t)=>{null==e||e.Bt(r.d.gt.SE,t)},zu:(e,t)=>{if(!e||!t)return-1;const n=o.Vu(e);if(null==n)return-1;const i=n[t];return null==i||isNaN(i)?-1:i},ju:(e,t)=>{let n=i.et;if(!e||!t)return n;const r=o.sm(e);return null==r?n:(n=r[t],null==n||isNaN(n)?i.et:n)},W:(e,t,n)=>{if(!e||!t)return;let i=o.Vu(e);null==i&&(i={}),i[t]=n,o.nm(e,i)},Mu:(e,t,n)=>{if(!e||!t)return;let i=o.sm(e);null==i&&(i={}),i[t]=n,o.rm(e,i)},vi:(e,t)=>{e&&t&&o.Mu(e,t,i.et)},Uu:(e,t)=>{if(!e||!t)return;const n=o.ju(e,t);o.Mu(e,t,n+1)}},s=o},29043:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guid=function(){function e(){return Math.floor(65536*(Math.random()+1)).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},31127:(e,t,n)=>{"use strict";var i;n.d(t,{A:()=>o});var r=new Uint8Array(16);function o(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)}},31635:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(58478),r=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(i.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(i.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(i.TAGGED_PROP,e)||[]},e}();t.MetadataReader=r},32287:(e,t,n)=>{"use strict";n.d(t,{A:()=>h,d:()=>d});var i=n(13537),r=n(6423),o=n(91691),s=n(62406),a=n(59836),c=n(6272),l=n(14971),u=n(13786);const d={iu:{su:"ab.storage.userId",Na:"ab.storage.deviceId",Nl:"ab.storage.sessionId"},gt:{ac:"ab.test",tE:"ab.storage.events",eE:"ab.storage.attributes",sE:"ab.storage.attributes.anonymous_user",oc:"ab.storage.device",pu:"ab.storage.sdk_metadata",Ru:"ab.storage.session_id_for_cached_metadata",zn:"ab.storage.pushToken",qi:"ab.storage.newsFeed",zi:"ab.storage.lastNewsFeedRefresh",Zt:"ab.storage.cardImpressions",ml:"ab.storage.serverConfig",rE:"ab.storage.triggers",oE:"ab.storage.triggers.ts",Hl:"ab.storage.messagingSessionStart",Hs:"ab.storage.cc",Os:"ab.storage.ccLastFullSync",Qs:"ab.storage.ccLastCardUpdated",Hu:"ab.storage.globalRateLimitCurrentTokenCount",_u:"ab.storage.dynamicRateLimitCurrentTokenCount",Kt:"ab.storage.ccClicks",Yt:"ab.storage.ccImpressions",Vt:"ab.storage.ccDismissals",nE:"ab.storage.lastDisplayedTriggerTimesById",aE:"ab.storage.lastDisplayedTriggerTime",iE:"ab.storage.triggerFireInstancesById",qh:"ab.storage.signature",EE:"ab.storage.brazeSyncRetryCount",Zs:"ab.storage.sdkVersion",Xe:"ab.storage.ff",Ge:"ab.storage.ffImpressions",Ze:"ab.storage.ffLastRefreshAt",Ve:"ab.storage.ff.sessionId",lE:"ab.storage.lastReqToEndpoint",SE:"ab.storage.requestAttempts",Kr:"ab.storage.deferredIam",Ku:"ab.storage.lastSdkReq",_E:"ab.storage.alias",vt:"ab.storage.banners",Nt:"ab.storage.banners.impressions",yt:"ab.storage.banners.sessionId"},me:"ab.optOut"};class h{constructor(e,t){this.uE=e,this.cE=t,this.uE=e,this.cE=t}Ha(e){const t=(0,o.HP)(d.iu),n=new h.se(e);for(const e of t)n.remove(d.iu[e])}uu(e,t){let n=null;null!=t&&t instanceof r.A&&(n=t.bt()),this.uE.store(e,n)}TE(e){const t=this.tu(e);null!=t&&(t.ql=(new Date).valueOf(),this.uu(e,t))}tu(e){const t=this.uE.gr(e),n=(e=>{let t;try{t=JSON.parse(e)}catch(e){t=null}return t})(t);let i;if(n)i=r.A.Rn(n)||null,i&&this.uu(e,i);else{const n=r.A.hE(t);i=r.A.Rn(n)||null,n!==t&&i&&this.uu(e,i)}return i}Jl(e){this.uE.remove(e)}Xa(){const e=(0,o.HP)(d.iu);let t;for(const n of e)t=this.tu(d.iu[n]),null!=t&&this.uu(d.iu[n],t)}Vo(e){let t;if(null==e||0===e.length)return!1;t=(0,o.cy)(e)?e:[e];let n=this.cE.gr(d.gt.tE);null!=n&&(0,o.cy)(n)||(n=[]);for(let e=0;e<t.length;e++)n.push(t[e].bt());return this.cE.store(d.gt.tE,n)}Al(e){return null!=e&&this.Vo([e])}AE(){let e=this.cE.gr(d.gt.tE);this.cE.remove(d.gt.tE),null==e&&(e=[]);const t=[];let n=!1,r=null;if((0,o.cy)(e))for(let n=0;n<e.length;n++)i.A.RE(e[n])?t.push(i.A.Rn(e[n])):r=n;else n=!0;if(n||null!=r){let o="Stored events could not be deserialized as Events";n&&(o+=", was "+Object.prototype.toString.call(e)+" not an array"),null!=r&&(o+=", value at index "+r+" does not look like an event"),o+=", serialized values were of type "+typeof e+": "+JSON.stringify(e),t.push(new i.A(null,a.w.qu,(new Date).valueOf(),null,{e:o}))}return t}Bt(e,t){return!!(0,o.BY)(d.gt,e,"StorageManager cannot store object.","STORAGE_KEYS.OBJECTS")&&this.cE.store(e,t)}ft(e){return!!(0,o.BY)(d.gt,e,"StorageManager cannot retrieve object.","STORAGE_KEYS.OBJECTS")&&this.cE.gr(e)}Ut(e){return!!(0,o.BY)(d.gt,e,"StorageManager cannot remove object.","STORAGE_KEYS.OBJECTS")&&(this.cE.remove(e),!0)}clearData(){const e=(0,o.HP)(d.iu),t=(0,o.HP)(d.gt);for(let t=0;t<e.length;t++){const n=e[t];this.uE.remove(d.iu[n])}for(let e=0;e<t.length;e++){const n=t[e];this.cE.remove(d.gt[n])}}gE(e){return e||d.gt.sE}Cu(e){let t=this.cE.gr(d.gt.eE);null==t&&(t={});const n=this.gE(e[c.A.Xn]),i=t[n];for(const r in e)r!==c.A.Xn&&(null==t[n]||i&&null==i[r])&&this.mu(e[c.A.Xn],r,e[r])}mu(e,t,n){let i=this.cE.gr(d.gt.eE);null==i&&(i={});const r=this.gE(e);let o=i[r];if(null==o&&(o={},null!=e&&(o[c.A.Xn]=e)),t===c.A.lu){null==o[t]&&(o[t]={});for(const e in n)o[t][e]=n[e]}else o[t]=n;return i[r]=o,this.cE.store(d.gt.eE,i)}OE(){const e=this.cE.gr(d.gt.eE);this.cE.remove(d.gt.eE);const t=[];for(const n in e)null!=e[n]&&t.push(e[n]);return t}ru(e){const t=this.cE.gr(d.gt.eE);if(null!=t){const n=this.gE(null),i=t[n];null!=i&&(t[n]=void 0,this.cE.store(d.gt.eE,t),i[c.A.Xn]=e,this.Cu(i))}const n=this.tu(d.iu.Nl);let i=null;null!=n&&(i=n.eu);const r=this.AE();if(null!=r)for(let t=0;t<r.length;t++){const n=r[t];null==n.userId&&n.sessionId==i&&(n.userId=e),this.Al(n)}}IE(){return this.cE.dE}}h.gc=class{constructor(e){this.an=e,this.an=e,this.dE=l.A.fE()?3:10}bE(e){return e+"."+this.an}store(e,t){const n={v:t};try{return localStorage.setItem(this.bE(e),JSON.stringify(n)),!0}catch(e){return s.A.info("Storage failure: "+(0,u.u)(e)),!1}}gr(e){try{let t=null;const n=localStorage.getItem(this.bE(e));return null!=n&&(t=JSON.parse(n)),null==t?null:t.v}catch(e){return s.A.info("Storage retrieval failure: "+(0,u.u)(e)),null}}remove(e){try{localStorage.removeItem(this.bE(e))}catch(e){return s.A.info("Storage removal failure: "+(0,u.u)(e)),!1}}},h.uc=class{constructor(){this.KE={},this.mE=5242880,this.dE=3}store(e,t){const n={value:t},i=this.YE(t);return i>this.mE?(s.A.info("Storage failure: object is ≈"+i+" bytes which is greater than the max of "+this.mE),!1):(this.KE[e]=n,!0)}YE(e){const t=[],n=[e];let i=0;for(;n.length;){const e=n.pop();if("boolean"==typeof e)i+=4;else if("string"==typeof e)i+=2*e.length;else if("number"==typeof e)i+=8;else if("object"==typeof e&&-1===t.indexOf(e)){let i,r;t.push(e);for(const t in e)r=e,i=t,n.push(r[i])}}return i}gr(e){const t=this.KE[e];return null==t?null:t.value}remove(e){this.KE[e]=null}},h.se=class{constructor(e,t){this.an=e,this.NE=t,this.an=e,this.GE=this.DE(),this.CE=576e3,this.NE=!!t}bE(e){return null!=this.an?e+"."+this.an:e}DE(){let e=0,t=document.location.hostname;const n=t.split("."),i="ab._gd";for(;e<n.length-1&&-1===document.cookie.indexOf(i+"="+i);)e++,t="."+n.slice(-1-e).join("."),document.cookie=i+"="+i+";domain="+t+";";return document.cookie=i+"=;expires="+new Date(0).toUTCString()+";domain="+t+";",t}le(){const e=new Date;return e.setTime(e.getTime()+60*this.CE*1e3),e.getFullYear()}ME(){const e=(0,o.zu)(d.iu),t=document.cookie.split(";");for(let n=0;n<t.length;n++){let i=t[n];for(;" "===i.charAt(0);)i=i.substring(1);let r=!1;for(let t=0;t<e.length;t++)if(0===i.indexOf(e[t])){r=!0;break}if(r){const e=i.split("=")[0];-1===e.indexOf("."+this.an)&&this.pE(e)}}}store(e,t){this.ME();const n=new Date;n.setTime(n.getTime()+60*this.CE*1e3);const i="expires="+n.toUTCString(),r="domain="+this.GE;let o;o=this.NE?t:encodeURIComponent(t);const a=this.bE(e)+"="+o+";"+i+";"+r+";path=/";return a.length>=4093?(s.A.info("Storage failure: string is "+a.length+" chars which is too large to store as a cookie."),!1):(document.cookie=a,!0)}gr(e){const t=[],n=this.bE(e)+"=",i=document.cookie.split(";");for(let r=0;r<i.length;r++){let o=i[r];for(;" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(n))try{let e;e=this.NE?o.substring(n.length,o.length):decodeURIComponent(o.substring(n.length,o.length)),t.push(e)}catch(t){return s.A.info("Storage retrieval failure: "+(0,u.u)(t)),this.remove(e),null}}return t.length>0?t[t.length-1]:null}remove(e){this.pE(this.bE(e))}pE(e){const t=e+"=;expires="+new Date(0).toUTCString();document.cookie=t,document.cookie=t+";path=/";const n=t+";domain="+this.GE;document.cookie=n,document.cookie=n+";path=/"}},h.lc=class{constructor(e,t,n){this.an=e,this.vE=[],t&&this.vE.push(new h.se(e)),n&&this.vE.push(new h.gc(e)),this.vE.push(new h.uc)}store(e,t){let n=!0;for(let i=0;i<this.vE.length;i++)n=this.vE[i].store(e,t)&&n;return n}gr(e){for(let t=0;t<this.vE.length;t++){const n=this.vE[t].gr(e);if(null!=n)return n}return null}remove(e){new h.se(this.an).remove(e);for(let t=0;t<this.vE.length;t++)this.vE[t].remove(e)}}},33575:(e,t,n)=>{"use strict";n(74423),n(69479),n(75044),n(28845),n(373),n(59848);var i=n(51181);n(68259);let r=function(e){return e.ACCOUNT_MANAGEMENT="account_management",e.CARDHOLDERS_CREDENTIALS="cardholders_credentials",e.DOWNLOAD_CLIENT_POPUP="download_client_popup",e.ECOMMPAY_ORDER_BOX_POPUP="ecommpay_order_box_popup",e.EULA_POLICY="eula_policy",e.FB_LIKE_PAGE="fb_like_page",e.LOGIN="login",e.NEW_PASS="new_pass",e.PAYMENT_POLICY="payment_policy",e.POLLING_WINDOW="polling_window_popup",e.PRIVACY_POLICY="privacy_policy",e.REFUND_POLICY="refund_policy",e.REGISTRATION="registration",e.RESTORE_PASS="restore_pass",e.OTP_LOGIN="otp_login",e.OTP_REQUEST_CODE="otp_request_code",e.SUPPORT_SUCCESS="support_success",e.SUPPORT_TICKET="support_ticket",e.TERMS_OF_SERVICE="terms_of_service",e.WEBGL_INFO_POPUP="webgl_info_popup",e.SUPPORT_WINDOW="support_window_popup",e.CANCEL_ACCOUNT_DELETION="cancel_account_deletion",e.IMPRESSUM="impressum",e}({});const o={SITE_INDEX:[r.CARDHOLDERS_CREDENTIALS,r.EULA_POLICY,r.LOGIN,r.NEW_PASS,r.PAYMENT_POLICY,r.PRIVACY_POLICY,r.REFUND_POLICY,r.REGISTRATION,r.RESTORE_PASS,r.OTP_REQUEST_CODE,r.OTP_LOGIN,r.TERMS_OF_SERVICE,r.IMPRESSUM],SITE_PLATFORM:[r.CARDHOLDERS_CREDENTIALS,r.EULA_POLICY,r.PAYMENT_POLICY,r.PRIVACY_POLICY,r.REFUND_POLICY,r.TERMS_OF_SERVICE]};function s(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a{constructor(e,t){s(this,"id",void 0),s(this,"hideclass",void 0),s(this,"alignoff",void 0),s(this,"autoposoff",void 0);let n=t;t||(n={}),this.id=e||null,this.hideclass=!!n.hideclass&&n.hideclass,this.alignoff=!!n.alignoff&&n.alignoff,this.autoposoff=!!n.autoposoff&&n.autoposoff}}function c(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=new class{constructor(){c(this,"configs",{[r.REGISTRATION]:{alignoff:!0},[r.RESTORE_PASS]:{alignoff:!0},[r.NEW_PASS]:{alignoff:!0},[r.LOGIN]:{alignoff:!0},[r.OTP_REQUEST_CODE]:{alignoff:!0},[r.OTP_LOGIN]:{alignoff:!0},[r.ACCOUNT_MANAGEMENT]:{alignoff:!0,firstInputFocus:!1},[r.EULA_POLICY]:{url:"policies/eula_policy"},[r.PAYMENT_POLICY]:{url:"policies/payment_policy"},[r.PRIVACY_POLICY]:{url:"policies/privacy_policy"},[r.REFUND_POLICY]:{url:"policies/refund_policy"},[r.TERMS_OF_SERVICE]:{url:"policies/terms_of_service"}}),c(this,"getPopupOpenConfig",e=>{let t;return this.configs[e]?(t=this.configs[e],t.id=e,t):this.getDefaultConfig(e)}),c(this,"getDefaultConfig",e=>{const t=new a(null);return t.id=e,t})}};function u(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d{constructor(e){u(this,"jsonrpc",void 0),u(this,"result",void 0),this.result=e}}function h(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p{constructor(e){h(this,"jsonrpc",void 0),h(this,"error",void 0),h(this,"id",void 0),this.error=e}}class f{getJsonRpcResponseFromObject(e){if(void 0===e.jsonrpc||void 0===e.result&&void 0===e.error)throw new Error(`Invalid json rpc response, ${JSON.stringify(e)}`);if(void 0!==e.result)return new d(e.result);if(void 0!==e.error)return new p(e.error);throw new Error(`Unhandled case detected, response object ${JSON.stringify(e)}`)}}let g=function(e){return e.ANDROID2="android2",e.DESKTOP="desktop",e.DESKTOP2="desktop2",e.FB="fb",e.FB2="fb2",e.IOS2="ios2",e.SITE="site",e.SITE2="site2",e.STEAM2="steam2",e}({});var m=n(59584);let v=function(e){return e.TRIUMPH="triumph",e.TOTALBATTLE="totalbattle",e}({});function _(){switch(window.app.config.current_entry_point){case g.SITE:case g.FB:case g.DESKTOP:return v.TRIUMPH;case g.SITE2:case g.DESKTOP2:case g.FB2:return v.TOTALBATTLE;default:throw new Error("Cant get project name by entry point")}}n(35709);var w=n(78615);const y=new w.mc,b={CONFIG:Symbol.for("CONFIG"),FEATURE_FLAG_LOADER:Symbol.for("FEATURE_FLAG_LOADER"),FEE_SERVICE:Symbol.for("FEE_SERVICE"),VAT_SERVICE:Symbol.for("VAT_SERVICE"),FB_ADAPTER:Symbol.for("FB_ADAPTER"),GOOGLE_SIGN_IN:Symbol.for("GOOGLE_SIGN_IN")};function E(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){let[t,n]=e.match(/(https?:\/\/)?(.*)/).slice(1,3);return n=n.replace(/\/+/g,"/"),`${null!=t?t:""}${n}`}class T{constructor(e){if(E(this,"domain","https"),E(this,"protocol",void 0),E(this,"requestUrl",void 0),E(this,"queryParams",void 0),E(this,"hash",void 0),e&&"string"!=typeof e)throw new TypeError("String expected")}static getNotificationsServiceUrl(){return`${window.app.config.web_push_service.rpc}`}static getFullLangUrl(e){return this.getDeduplicatedSlashedPathByPrefix(`${window.app.config.site_url}${window.app.config.language}`,e)}static getNoLangUrl(e){const t=this.getSiteUrl();return this.getDeduplicatedSlashedPathByPrefix(t,e)}static getServiceWorkerUrl(e){return S(`https:${this.getSiteUrl()}/${e}`)}static getSiteUrl(){return y.get(b.CONFIG).site_url}static getPayserviceUrl(e){return S(`${window.app.config.payservice_url}/${e}`)}static getSiteLangUrl(e){return this.getDeduplicatedSlashedPathByPrefix(`${window.app.config.game_site_url}/${window.app.config.language}`,e)}static getSiteNoLangUrl(e){return this.getDeduplicatedSlashedPathByPrefix(window.app.config.game_site_url,e)}static getCurrentUrl(){return location.href}static getAjaxUrl(e){return this.getDeduplicatedSlashedPathByPrefix(`${window.app.config.site_url}${window.app.config.ajax_url}`,e)}static getHubClientRestapiUrl(){const e=_();return S(`https:${window.app.config.game_site_url}/restapi/${e}/web/`)}static getGdprUrl(){let e=T.getNoLangUrl("delete-personal-data/auth");return window.app.config.user_auth_token&&(e+=`?${[`token=${encodeURIComponent(window.app.config.user_auth_token)}`,`language=${encodeURIComponent(window.app.config.language)}`].join("&")}`),e}static current(){const e=window.location.href;return new T(e)}setQueryParams(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||window.location.search;this.queryParams=new URLSearchParams(e)}addQueryParam(e,t){this.queryParams||this.setQueryParams(),this.queryParams.append(e,t)}getQueryParam(e){return this.queryParams||this.setQueryParams(),this.queryParams.get(e)}setDomain(e){this.domain=e}setProtocol(e){this.protocol=e}setHash(e){this.hash=e}getDomain(){return this.domain}getRequestUrl(){return this.requestUrl}getProtocol(){return this.protocol}getHash(){return this.hash}toString(){return""}buildUrl(){const e=window.location;return`${e.protocol}//${e.hostname}${e.pathname}?${this.queryParams.toString()}`}setHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";window.location.href=e||this.buildUrl()}static getDeduplicatedSlashedPathByPrefix(e,t){if(!t)return S(`https:${e}/`);const[n,i]=t.split("#"),[r,o]=n.split("?");let s=S(`https:${e}/${r}/`);return o&&(s+=`?${o}`),i&&(s+=`#${i}`),s}}let A=function(e){return e[e.KEY_NOT_FOUND=1]="KEY_NOT_FOUND",e}({});class C{static _n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.keyExists(e))return this.getNonExistantKey(e);let n=C.localizationStorage[e];return Object.entries(t).forEach(e=>{let[t,i]=e;const r=`%${t}%`;n.includes(r)&&(n=n.replace(r,i))}),n}static addLinkToText(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"%";const r=new RegExp(`${i}[\\w\\W ]*${i}`,"gim"),o=e.match(r);if(!o)return e;const s=`<a href="${t}" ${n}>${o[0].replace(i,"")}</a>`;return e.replace(r,s).replace(i,"")}static getNonExistantKey(e){return console.error(`Key '${e}' not found`),`f_${e}#${A.KEY_NOT_FOUND}`}static keyExists(e){return void 0!==C.localizationStorage[e]}}var I,O,N;I=C,O="localizationStorage",N=window.app.localization,(O=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(O))in I?Object.defineProperty(I,O,{value:N,enumerable:!0,configurable:!0,writable:!0}):I[O]=N;var P=n(44436);function k(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let R=function(e){return e.LEFT="left",e.RIGHT="right",e.BOTTOM="bottom",e.UP="up",e}({}),L=function(e){return e.CENTER_CENTER="center_center",e.CENTER_BOTTOM="center_bottom",e}({});class x{constructor(){k(this,"tooltipElement",void 0),k(this,"alignMode",L.CENTER_CENTER),k(this,"lastTarget",void 0),k(this,"lastDirection",void 0),k(this,"tooltipClass","error_tooltip"),k(this,"showTooltipElement",(e,t,n,i)=>{if(void 0===t&&(t=R.LEFT),void 0===e||!e.length)throw new Error("arg `from` empty");switch(this.lastTarget=e,this.lastDirection=t,this.tooltipElement.removeClass(`${this.tooltipClass}_direction_${R.LEFT} ${this.tooltipClass}_direction_${R.RIGHT} ${this.tooltipClass}_direction_${R.BOTTOM} ${this.tooltipClass}_direction_${R.UP} terms`),this.tooltipElement.addClass(`${this.tooltipClass}_direction_${t}`),i&&this.tooltipElement.addClass("terms"),this.setMessage(n),t){case R.RIGHT:this.placeTooltipLeft(e);break;case R.BOTTOM:this.placeTooltipBottom(e);break;case R.UP:this.placeTooltipUp(e);break;case R.LEFT:this.placeTooltipRight(e)}this.tooltipElement.show()}),k(this,"moveTooltipElement",()=>{switch(this.lastDirection){case R.RIGHT:this.placeTooltipLeft(this.lastTarget);break;case R.BOTTOM:this.placeTooltipBottom(this.lastTarget);break;case R.UP:this.placeTooltipUp(this.lastTarget);break;case R.LEFT:this.placeTooltipRight(this.lastTarget)}}),k(this,"onResize",()=>{this.lastTarget&&this.lastTarget.length&&this.tooltipElement.is(":visible")&&this.moveTooltipElement()});const e=P(".error_tooltip");if(0===e.length)throw new Error("tooltipNotPlaced");P(window).on("resize",this.onResize),this.tooltipElement=e}static getTooltipElement(){return void 0===x.tooltipInstance&&(x.tooltipInstance=new x),x.tooltipInstance}setTooltipElement(e){this.tooltipElement=e}getThemedCopy(e){const t=new x;return t.setTheme(e),t}setMessage(e){"error_tooltip"!==this.tooltipClass&&"error-tooltip"!==this.tooltipClass||this.tooltipElement.html(e),"tt-black"===this.tooltipClass&&this.tooltipElement.find(".tt-black__text").html(e)}setAlignMode(e){this.alignMode=e}hide(){P(".error_tooltip,.tt-black").hide()}setTheme(e){this.tooltipClass=e,this.tooltipElement=P(`.${this.tooltipClass}`)}placeTooltipRight(e){const t=e.offset(),n=this.tooltipElement.outerHeight(),i=e.outerHeight(),r=e.outerWidth();if(void 0===t||void 0===i||void 0===r||void 0===n)throw new Error("Cannot calculate tooltip position");this.alignMode===L.CENTER_CENTER&&this.tooltipElement.css({position:"absolute",top:t.top+(i-n)/2,left:t.left+r+10}),this.alignMode===L.CENTER_BOTTOM&&this.tooltipElement.css({position:"absolute",top:t.top-(n-i+i/2),left:t.left+r+10})}placeTooltipLeft(e){const t=e.offset(),n=this.tooltipElement.outerHeight(),i=e.outerHeight(),r=e.outerWidth();if(void 0===t||void 0===i||void 0===r||void 0===n)throw new Error("Cannot calculate tooltip position");this.alignMode===L.CENTER_CENTER&&this.tooltipElement.css({position:"absolute",top:t.top-(n-i)/2,left:t.left-(r+10)}),this.alignMode===L.CENTER_BOTTOM&&this.tooltipElement.css({position:"absolute",top:t.top-i/2,left:t.left-(r+10)})}placeTooltipBottom(e){const t=e.offset(),n=e.outerWidth(),i=this.tooltipElement.outerWidth(),r=this.tooltipElement.outerHeight();if(void 0===t||void 0===n||void 0===i||void 0===r)throw new Error("Cannot calculate tooltip position");let o=t.left+n/2-i/2;o<=0&&(o=10),this.tooltipElement.css({position:"absolute",top:t.top-r-10,left:o})}placeTooltipUp(e){const t=e.offset(),n=e.outerWidth(),i=this.tooltipElement.outerWidth(),r=this.tooltipElement.outerHeight();if(void 0===t||void 0===n||void 0===i||void 0===r)throw new Error("Cannot calculate tooltip position");let o=t.left+n/2-i/2;o<=0&&(o=10);const s=t.top+r+10;this.tooltipElement.css({position:"absolute",top:s,left:o})}}function M(e){return 0===e.trim().length}function D(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}k(x,"tooltipInstance",void 0);class j extends Error{constructor(e){super(e),this.message=e,this.name="JsFormError",Object.setPrototypeOf(this,j.prototype)}}var U=function(){return U=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},U.apply(this,arguments)};Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var B="Blocked by CSP",F="The endpoint parameter is not a valid URL";var G="API key required",V="Failed to load the JS script of the agent",W="9319";function H(e,t){var n,i,r,o,s,a=[],c=(n=function(e){var t=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}([],e,!0);return{current:function(){return t[0]},postpone:function(){var e=t.shift();void 0!==e&&t.push(e)},exclude:function(){t.shift()}}}(e),o=0,i=function(){return Math.random()*Math.min(3e3,100*Math.pow(2,o++))},r=new Set,[n.current(),function(e,t){var o,s=t instanceof Error?t.message:"";if(s===B||s===F)n.exclude(),o=0;else if(s===W)n.exclude();else if(s===V){var a=Date.now()-e.getTime()<50,c=n.current();c&&a&&!r.has(c)&&(r.add(c),o=0),n.postpone()}else n.postpone();var l=n.current();return void 0===l?void 0:[l,null!=o?o:e.getTime()+i()-Date.now()]}]),l=c[0],u=c[1];if(void 0===l)return Promise.reject(new TypeError("The list of script URL patterns is empty"));var d=function(e){var n=new Date,i=function(t){return a.push({url:e,startedAt:n,finishedAt:new Date,error:t})},r=t(e);return r.then(function(){return i()},i),r.catch(function(e){if(null!=s||(s=e),a.length>=5)throw s;var t=u(n,e);if(!t)throw s;var i,r=t[0],o=t[1];return(i=o,new Promise(function(e){return setTimeout(e,i)})).then(function(){return d(r)})})};return d(l).then(function(e){return[e,a]})}var $="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js";function q(e){return function(e,t){var n,i=document,r="securitypolicyviolation",o=function(t){var i=new URL(e,location.href),r=t.blockedURI;r!==i.href&&r!==i.protocol.slice(0,-1)&&r!==i.origin||(n=t,s())};i.addEventListener(r,o);var s=function(){return i.removeEventListener(r,o)};return Promise.resolve().then(t).then(function(e){return s(),e},function(e){return new Promise(function(e){var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(null)}).then(function(){if(s(),n)return function(){throw new Error(B)}();throw e})})}(e,function(){return function(e){return new Promise(function(t,n){if(function(e){if(URL.prototype)try{return new URL(e,location.href),!1}catch(e){if(e instanceof Error&&"TypeError"===e.name)return!0;throw e}}(e))throw new Error(F);var i=document.createElement("script"),r=function(){var e;return null===(e=i.parentNode)||void 0===e?void 0:e.removeChild(i)},o=document.head||document.getElementsByTagName("head")[0];i.onload=function(){r(),t()},i.onerror=function(){r(),n(new Error(V))},i.async=!0,i.src=e,o.appendChild(i)})}(e)}).then(z)}function z(){var e=window,t="__fpjs_p_l_b",n=e[t];if(function(e,t){var n,i=null===(n=Object.getOwnPropertyDescriptor)||void 0===n?void 0:n.call(Object,e,t);(null==i?void 0:i.configurable)?delete e[t]:i&&!i.writable||(e[t]=void 0)}(e,t),"function"!=typeof(null==n?void 0:n.load))throw new Error(W);return n}var K=function(e){var t;e.scriptUrlPattern;var n=e.token,i=e.apiKey,r=void 0===i?n:i,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["scriptUrlPattern","token","apiKey"]),s=null!==(t=function(e,t){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)?e[t]:void 0}(e,"scriptUrlPattern"))&&void 0!==t?t:$,a=function(){var e=[],t=function(){e.push({time:new Date,state:document.visibilityState})},n=function(e,t,n,i){return e.addEventListener(t,n,i),function(){return e.removeEventListener(t,n,i)}}(document,"visibilitychange",t);return t(),[e,n]}(),c=a[0],l=a[1];return Promise.resolve().then(function(){if(!r||"string"!=typeof r)throw new Error(G);return H(function(e,t){return(Array.isArray(e)?e:[e]).map(function(e){return function(e,t){var n=encodeURIComponent;return e.replace(/<[^<>]+>/g,function(e){return"<version>"===e?"3":"<apiKey>"===e?n(t):"<loaderVersion>"===e?n("3.11.13"):e})}(String(e),t)})}(s,r),q)}).catch(function(e){throw l(),function(e){return e instanceof Error&&e.message===W?new Error(V):e}(e)}).then(function(e){var t=e[0],n=e[1];return l(),t.load(U(U({},o),{ldi:{attempts:n,visibilityStates:c}}))})};function Y(e){return e/1e3}class J{static isSocial(){return!J.isSite()}static isSite(){return window.app.config.current_entry_point.includes("site")}static isLanding(){return!!window.app.isLanding}}let X=function(e){return e.SHOW_RU_TETHER_SOCIAL_NOTIFY="showRuTetherSocialNotify",e.AB_TEST_LP_ONE_TAP="abTestLpGoogleOneTap",e.WEB_GUEST_ACCOUNTS="guestAccounts",e.WEB_S3_ASSETS="webS3Assets",e.LP_S3_ASSETS="lpS3Assets",e.LP_DIRECTORIES="lpDirectories",e.WEB_CHAT_SUPPORT="webChatSupport",e.DISABLE_WEB_GUEST_ACCOUNT_WARNING="disableWebGuestAccountWarning",e.WEB_APPLE_ID_LOGIN="webAppleIdLogin",e.SHOW_REAL_LOADING_PERCENTS="showRealLoadingPercents",e.FINGERPRINT_ENABLED="fingerprintEnabled",e.CLIENT_DEATH_TIMER_ENABLED="clientDeathTimerEnabled",e.CONNECTION_CHECK_ENABLED="connectionCheckEnabled",e.CLIENT_ACCOUNT_WINDOW_ENABLED="clientAccountWindowEnabled",e}({});class Q{static async init(){try{if(this.fpUser)return!0;const e=Y((new Date).getTime());if(window.app.config.fingerprint.startTestDateTs>e||e>window.app.config.fingerprint.endTestDateTs)return console.log("Time is out of range",{now:e,start:window.app.config.fingerprint.startTestDateTs,end:window.app.config.fingerprint.endTestDateTs}),!1;if(!y.get(b.FEATURE_FLAG_LOADER).get(X.FINGERPRINT_ENABLED).isOn()||!J.isLanding()||"site2"!==window.app.config.current_entry_point)return console.log("This env or entry point not allowed or this is not landing page "),!1;const t=await K({token:window.app.config.fingerprint.browser_token}),n=await t.get();return n.visitorId?(this.fpUser=n,!0):(window.Sentry.captureException("fingerprint was not init"),!1)}catch(e){return console.log("Init fingerprint exception",e),window.Sentry.captureException("Init fingerprint exception"),!1}}static async getVisitorId(){return await this.init()?this.fpUser.visitorId:""}static async getConfidenceScore(){return await this.init()?this.fpUser.confidence.score:""}static async visitorIsFound(){return await this.init()?this.fpUser.visitorFound:""}}!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Q,"fpUser",void 0);let Z=function(e){return e.INDEX="siteIndex",e.LANDING="landing",e.MARKETING="marketingEvents",e.PREREG="preregEvents",e.WEBGL_CLIENT_EVENTS="webglClientEvents",e.WIPE="wipeEvents",e}({}),ee=function(e){return e.CAPITOL_LEVELING="CAPITOL_",e.CLICKS_100="100_CLICKS",e.HERO_UPGRADE="HERO_UPGRADE",e.HERO_LEVELING="HERO_",e.MARCHES_9="MARCHES_9",e.MONSTER_LVL_5="MONSTER_LVL_5",e.TUTOR_FINISH="tutor_finish",e.UNITS_TRAIN_SILVER_10000="UNITS_TRAIN_SILVER_10000",e.VALOR_MONSTER_1000_PER_MARCH="VALOR_MONSTER_1000_PER_MARCH",e.VALOR_MONSTER_1000="VALOR_MONSTER_1000",e.WEB_GUEST_HAS_SWITCHED_GP="webGuestHasSwitchedGameProgress",e}({}),te=function(e){return e.CLICK_SOCIAL_ICON="clickSocialIcon",e.CLOSE_BETA_POPUP="closeBetaPopupClick",e.CHECK_CONSENT="checkConsent",e.CHECK_POLICY="checkPolicy",e.DOWNLOAD_BETA="downloadBetaClick",e.DOWNLOAD_CLIENT="DOWNLOAD_CLIENT",e.EMAIL_REG_SUCCESS="emailRegistrationSuccess",e.ENTER_EMAIL="enterEmail",e.ENTER_PASSWORD="enterPass",e.INSTALL="INSTALL",e.INGAME_INSTALL="INGAME_INSTALL",e.IS_LANDING_REG="isLandingRegistration",e.LANDING="landing",e.OPEN_BETA_POPUP="openBetaPopupClick",e.PREREG_CONFIRM="preregConfirm",e.PREREG_COMPLETE="preregComplete",e.REGISTRATION_COMPLETE="REGISTRATION_COMPLETE",e.SERVER_LOGIN="serverLogin",e.SITE_SOCIAL_REG_OK="siteSocialRegistrationSuccess",e.SUBMIT="submitPress",e.WIPED="wiped",e.CLICK_SOCIAL_LOGIN_GOOGLE="clickSocialGoogle",e.CLICK_SOCIAL_LOGIN_EMAIL="clickSocialEmail",e.CLICK_SOCIAL_LOGIN_FACEBOOK="clickSocialFacebook",e.REGISTRATION="registration",e}({}),ne=function(e){return e.FAILED_INDEXED_DB="failIndexedDB",e.WEBGL_FINISH_LOADING="webglFinishLoading",e.WEBGL_START_LOADING="webglStartLoading",e}({});function ie(){return!(0===parseInt(window.app.config.test_mode))}function re(e){const t=y.get(b.CONFIG);return ie()&&e&&t.suid_simulate?t.suid_simulate:t.suid}function oe(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class se extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(e),oe(this,"name",void 0),oe(this,"stack",void 0),this.name="TaxServiceFailed",this.stack=t,Object.setPrototypeOf(this,se.prototype)}}var ae=n(29950);class ce extends Error{constructor(){super(...arguments),this.name="HubApiRequestError"}}class le extends Error{constructor(){super(...arguments),this.name="HubApiNetworkError"}}class ue{static async makeRequest(e,t,n){const i=T.getHubClientRestapiUrl(),r={jsonrpc:"2.0",method:e,deviceIdentifier:n,params:[{...t}]};return ae.A.post(i,r,{headers:{}}).then(e=>{const t=e.data;if("error"in t)throw new ce(t.error.message);return t.result}).catch(e=>{var t,n;const i=null!==(t=null===(n=e.response)||void 0===n?void 0:n.status)&&void 0!==t?t:0;throw new le(`Hub request finished with code [${i}]`)})}}let de=function(e){return e.SEND_SUPPORT_MESSAGE="SendSupportMessage",e.SEND_STAT_EVENT="SendStatEvent",e.GET_SERVER_TIME="GetServerTime",e.SET_CONSENT_STATE="SetConsentState",e.GET_CONSENT_STATE="GetConsentState",e.WEB_GUEST_GET_TOKEN="WebGuestGetToken",e.WEB_REGISTER_EMAIL="WebRegisterEmail",e.MOBILE_GET_TOKEN_EMAIL="MobileGetTokenEmail",e.GET_TOKEN_EMAIL="GetTokenEmail",e.MOBILE_GET_SIG="MobileGetSig",e.MOBILE_SWITCH_SUIDS="MobileSwitchSuids",e.RESET_EMAIL_PASSWORD="MobileResetEmailPassword",e.CHANGE_EMAIL_PASSWORD="MobileChangeEmailPassword",e.SET_NEW_PASSWORD="SetNewPassword",e.GET_MAINTENANCE_DATA="GetMaintenanceData",e.GET_TOKEN_FB="MobileGetTokenFb",e.GET_TOKEN_GOOGLE="MobileGetTokenGoogle",e.GET_LINKED_ACCOUNTS_INFO="GetLinkedAccountsInfo",e.ACCEPT_POLICY="AcceptPolicy",e.LINK_AUTH_METHOD="LinkAuthMethod",e.LINK_AUTH_METHOD_EMAIL="LinkAuthMethodEmail",e.LINK_AUTH_METHOD_FB="LinkAuthMethodFb",e.LINK_AUTH_METHOD_GOOGLE="LinkAuthMethodGoogle",e.LINK_AUTH_METHOD_APPLE_ID="LinkAuthMethodAppleId",e.GET_VAT="GetVat",e.GET_FEE="GetFee",e.GET_TOKEN_BY_MAILING_TOKEN="GetTokenByMailingToken",e.CANCEL_REMOVE_ACCOUNT="CancelRemoveAccountGdpr",e.REQUEST_EMAIL_OTP_AUTH="RequestEmailOtpAuth",e.CONFIRM_EMAIL_OTP_AUTH="LoginEmailOtp",e}({});class he{constructor(){}static getInstance(){return void 0===he.userInstance&&(he.userInstance=new he),he.userInstance}getSuid(){return window.app.config.suid}getSig(){return window.app.config.sig}}!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(he,"userInstance",void 0);class pe{setState(e,t,n){const i=Ce.getInstance(),r=i.getAuthToken(),o=i.getSuid(),s=i.getEntryPoint();return ue.makeRequest(de.SET_CONSENT_STATE,{consent:e,source:n,email:t,entryPoint:s,suid:o,token:r},window.app.deviceIdentifier)}async getConsentState(){const e=Ce.getInstance(),t=e.getAuthToken(),n=e.getSuid(),i=await ue.makeRequest(de.GET_CONSENT_STATE,{token:t,suid:n},window.app.deviceIdentifier);if("error"in i)throw new Error(i.error.message);return i}}var fe=n(44436);class ge{get(e){const t=fe.cookie(`cache_${e}`);return void 0===t?t:JSON.parse(t)}set(e,t){return fe.cookie(`cache_${e}`,JSON.stringify(t),{secure:!0,path:"/",expires:Date.now()+31536e6}),!0}delete(e){return fe.cookie(`cache_${e}`,"",{domain:`.${window.app.config.domain}`,path:"/"}),!0}}class me{constructor(){!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"cache",{})}get(e){return this.cache[e]}set(e,t){return this.cache[e]=t,!0}delete(e){return delete this.cache[e],void 0===this.cache[e]}}let ve=function(e){return e.INFO="INFO",e.ERROR="ERROR",e.WARNING="WARNING",e.NOTICE="NOTICE",e.DEBUG="DEBUG",e}({});function _e(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class we{constructor(){var e=this;_e(this,"prefix","GLOBAL"),_e(this,"log",function(t){const n=e.getPrefix(t),i=e.getSeverityStyleString(t);for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];const a=[i,...o];t!==ve.ERROR?t!==ve.DEBUG?t!==ve.INFO?t!==ve.WARNING?console.log(n,...a):console.warn(n,...a):console.info(n,...a):console.debug(n,...a):console.error(n,...a)}),_e(this,"getPrefixedCopy",e=>{const t=new we;return t.setPrefix(e),t}),_e(this,"debug",function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.log(ve.DEBUG,...n)}),_e(this,"error",function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.log(ve.ERROR,...n)}),_e(this,"info",function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.log(ve.INFO,...n)}),_e(this,"notice",function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.log(ve.NOTICE,...n)}),_e(this,"warning",function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.log(ve.WARNING,...n)}),_e(this,"getSeverityStyleString",e=>{let t="";switch(e){case ve.INFO:t="background: #A3E6FF; color:black";break;case ve.ERROR:t="background: #C32F0D; color:white";break;case ve.NOTICE:t="background: #FAF1DC; color:black";break;case ve.WARNING:t="background: orange; color:black";break;case ve.DEBUG:default:t="background: gray; color:white"}return t})}getPrefix(e){let t="";return this.prefix.length&&(t=`[${this.prefix}]`),`%c[${e.toUpperCase()}]${t}`}setPrefix(e){this.prefix=e}}const ye=new we;class be{get(e){const t=window.localStorage.getItem(`cache_${e}`);if(void 0!==(null!=t?t:void 0))return JSON.parse(t)}set(e,t){return window.localStorage.setItem(`cache_${e}`,JSON.stringify(t)),!0}delete(e){return window.localStorage.removeItem(`cache_${e}`),!0}}function Ee(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Se=ye.getPrefixedCopy("KVCACHE");class Te{constructor(){Ee(this,"repo",void 0),this.repo=this.getCachingMechanism()}static getInstance(){return void 0===this.instance&&(this.instance=new Te),this.instance}get(e){return this.repo.get(e)}set(e,t){return this.repo.set(e,t)}delete(e){return this.repo.delete(e)}getCachingMechanism(){var e,t,n;let i,r;try{var o,s;i=null!==(o=null===(s=window)||void 0===s?void 0:s.localStorage)&&void 0!==o&&o}catch(e){console.error(`LocalStorage unavailable: ${e.message}`)}return i?(Se.info("init local storage cache"),new be):(r=null!==(e=null===(t=window)||void 0===t||null===(n=t.navigator)||void 0===n?void 0:n.cookieEnabled)&&void 0!==e&&e,r?(Se.info("init cookie cache"),new ge):(Se.warning("init non persistant cache"),window.Sentry.captureMessage("DictCache chosen"),new me))}}Ee(Te,"instance",void 0);let Ae=function(e){return e.TUTOR_FINISHED="TUTOR_FINISHED",e.YM_NOT_LOADED="YM_NOT_LOADED",e.GA_NOT_LOADED="GA_NOT_LOADED",e.COOKIE_AGREEMENT_SET="COOKIE_AGREEMENT_SET",e.USER_EMAIL_ADDRESS="USER_EMAIL_ADDRESS",e.PRELOADER_TYPE="PRELOADER_TYPE",e.VAT="VAT",e.FEE="FEE",e}({});class Ce{constructor(){}getAccountId(){const e=parseInt(window.app.user_huid);if(!window.app.user_huid||isNaN(e))throw new Error("User is unauthorized or invalid account id passed from backend");return e}getSuid(){return ie()&&window.app.config.suid_simulate?window.app.config.suid_simulate:he.getInstance().getSuid()}getGuid(){var e;return null===(e=window.app.getGameStartDataResponse)||void 0===e?void 0:e.guid}async getConsentState(){const e=new pe;return(await e.getConsentState()).consent}setConsentState(e,t,n){return(new pe).setState(t,e,n)}getEmail(){if(window.app.config.regEmail)return window.app.config.regEmail}setEmail(e){window.app.config.regEmail=e}getPaymentEmail(){if(window.app.config.regEmail)return window.app.config.regEmail;const e=Te.getInstance().get(Ae.USER_EMAIL_ADDRESS);return"string"==typeof e?e:void 0}setPaymentEmail(e){window.app.config.regEmail=e,Te.getInstance().set(Ae.USER_EMAIL_ADDRESS,e)}getAuthToken(){var e,t;return null===(e=window.app)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.user_auth_token}isSimulate(){return!!y.get(b.CONFIG).suid_simulate}getCity(){var e,t;return null===(e=window.app)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.city}getFullName(){var e,t;return null===(e=window.app)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.full_name}getGender(){return window.app.user.gender}getRef(){return window.app.config.ref}getEntryPoint(){var e,t;return null===(e=window.app)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.current_entry_point}getHasGuestAuthMethod(){var e,t;return null===(e=window.app)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.hasGuestAuthMethod}getExternalId(){var e,t;return null===(e=window.app)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.externalId}getCountryCode(){var e,t;const n=null===(e=window.app)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.country;return n?n.toUpperCase():null}static getInstance(){return void 0===Ce.userInstance&&(Ce.userInstance=new Ce),Ce.userInstance}}!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ce,"userInstance",void 0);class Ie{constructor(){}async getFee(){try{const e=Ce.getInstance(),t=await ue.makeRequest(de.GET_FEE,{suid:e.getSuid(),token:window.app.config.user_auth_token},window.app.deviceIdentifier);return console.log(t),"error"in t?new se(`FEE: ${t.error.message}`):(console.log("FEE From API Service",t),t)}catch(e){return new se(`Exception on getting fee rate: ${e.message}`)}}async getVat(){try{const e=Ce.getInstance(),t=await ue.makeRequest(de.GET_VAT,{suid:e.getSuid(),token:window.app.config.user_auth_token},window.app.deviceIdentifier);return"error"in t?new se(`Error on getting VAT from API: ${t.error.message}`):(console.log("VAT From API Service",t),t)}catch(e){return new se(`Exception on getting VAT rate: ${e.message}`)}}}function Oe(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ne extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(e),Oe(this,"name",void 0),Oe(this,"stack",void 0),this.name="VatServiceFailed",this.stack=t,Object.setPrototypeOf(this,Ne.prototype)}}function Pe(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ke extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(e),Pe(this,"name",void 0),Pe(this,"stack",void 0),this.name="FeeServiceFailed",this.stack=t,Object.setPrototypeOf(this,ke.prototype)}}function Re(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Le{constructor(e,t){Re(this,"feeTable",void 0),Re(this,"storage",void 0),Re(this,"taxLoader",void 0),this.storage=e,this.taxLoader=t}async calculate(e,t,n){try{const i=await this.load();return i instanceof Ne?(window.Sentry.captureException(i.message),0):t?i.fee_rate[t]?(console.log("FEE calculating",{feeTable:i.fee_rate[t],revenue:e,vat:n}),(e-n)*(1-i.fee_rate[t])):(console.error("Payment method is not exists in a map",{method:t}),0):(console.error(`FEE payment method is false ${t}`),0)}catch(e){return window.Sentry.captureException(e),console.error("FEE exception on calculate",e),0}}async load(){const e=this.storage.get(Ae.FEE);if(e&&e.fee_rate&&this.isValidDate(e.date))return console.log("FEE has loaded from storage"),e;if(this.feeTable&&this.isValidDate(this.feeTable.date))return console.log("FEE has loaded from memory"),this.feeTable;const t=await this.taxLoader.getFee();return t instanceof se?new ke(t.message):(console.log("FEE has loaded from DE",t),this.save(t),t)}save(e){try{return e.date=this.getCurrentDateISO(),this.feeTable=e,this.storage.delete(Ae.FEE),this.storage.set(Ae.FEE,this.feeTable),!0}catch(e){return new ke(e.message,e.stack)}}getCurrentDateISO(){return(new Date).toISOString().split("T")[0]}isValidDate(e){const t=new Date(e).getTime()/1e3,n=(new Date).getTime()/1e3;return console.log("Fee data actuality",{forUpdate:n,result:t<n-604800,table:t}),t>n-604800}}function xe(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Me{constructor(e,t){xe(this,"vatTable",void 0),xe(this,"storage",void 0),xe(this,"taxLoader",void 0),this.storage=e,this.taxLoader=t}async calculate(e,t){const n=await this.load();return n instanceof Ne?(window.Sentry.captureException(n.message),0):t?n.vat_rate[t]?(console.log("VAT calculating",{country:t,feeTable:n.vat_rate[t],revenue:e}),e*n.vat_rate[t]):(console.error("VAT country is not exists in a map",{country:t}),0):(console.error(`VAT country is false ${t}`),0)}async load(){const e=this.storage.get(Ae.VAT);if(console.log("LOAD FROM STORAGE",e),e&&e.vat_rate&&this.isValidDate(e.date))return console.log("VAT has loaded from storage"),e;if(this.vatTable&&this.isValidDate(this.vatTable.date))return console.log("VAT has loaded from memory"),this.vatTable;const t=await this.taxLoader.getVat();if(console.log("FEE TABLE",t),t instanceof se)return new Ne(t.message);console.log("VAT has loaded from DE");const n=this.save(t);return n instanceof Ne?n:t}save(e){try{return this.vatTable=e,this.storage.set(Ae.VAT,this.vatTable),!0}catch(e){return new Ne(e.message,e.stack)}}isValidDate(e){const t=new Date(e).getTime()/1e3,n=(new Date).getTime()/1e3;return console.log("Fee data actuality",{forUpdate:n,result:t<n-2592e3,table:t}),t>n-2592e3}}function De(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class je{constructor(e,t,n){De(this,"vatService",void 0),De(this,"feeService",void 0),De(this,"userData",void 0),this.feeService=e,this.vatService=t,this.userData=n}async calculate(e){const t=await this.vatService.calculate(e,this.userData.country),n=await this.feeService.calculate(e,this.userData.paymentMethod,t),i=e-n-t;return console.log("Calculating clear revenue",{clear:i,fee:n,grows:e,vat:t}),i}}class Ue{static fireMarketing(e,t){const n={event:e,eventCategory:Z.MARKETING};this.dataLayer.push({...n,...t})}static firePrereg(e){this.dataLayer.push({event:e,eventCategory:Z.PREREG})}static fireWebgl(e){this.dataLayer.push({event:e,eventCategory:Z.WEBGL_CLIENT_EVENTS})}static fireClient(e){this.dataLayer.push({event:e,eventCategory:this.getClientEventsCategory()})}static fireWipe(e){this.dataLayer.push({event:e,eventCategory:Z.WIPE})}static fireLanding(e){this.dataLayer.push({event:e,eventCategory:Z.LANDING})}static fireIndex(e){this.dataLayer.push({event:e,eventCategory:Z.INDEX})}static async fireFacebook(e,t){const n=t.paymentObject.price/100,i=await this.calculateClearRevenue(n);this.dataLayer.push({event:e,FBContentName:encodeURIComponent(t.paymentObject.name||"N/A"),paymentCurrency:t.paymentObject.currency,paymentValue:i,paymentID:t.paymentObject.id,paymentGuid:window.app.config.stringGuid})}static async fireEcommerce(e,t){const n=re(),i=await this.calculateClearRevenue(t);this.dataLayer.push({ecommerce:{currencyCode:"USD",purchase:{actionField:{id:Date.now()+n,revenue:i,tax:"",shipping:"",coupon:""}}},event:e,eventCategory:"ecommerce"})}static getClientEventsCategory(){return Z.WEBGL_CLIENT_EVENTS}static fireCommonEvent(e,t){this.dataLayer.push({event:e,eventCategory:t})}static async calculateClearRevenue(e){const t=new Ie,n=new Le(new be,t),i=new Me(new be,t),r=window.app.lastPaymentMethod?window.app.lastPaymentMethod.toString():"",o={country:window.app.config.country,paymentMethod:r},s=new je(n,i,o);return await s.calculate(e)}}function Be(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ue,"dataLayer",window.dataLayer||[]);class Fe{static registerBeforeSendHandler(e,t){Fe.beforeSendHandlers[e]=t}static registerAfterSendHandler(e,t){Fe.afterSendHandlers[e]=t}static registerSendRequestHandler(e,t){Fe.sendRequestHandlers[e]=t}static getBeforeSendHandler(e){return Fe.beforeSendHandlers[e]||window.app[e]}static getAfterSendHandler(e){return Fe.afterSendHandlers[e]||window.app[e]}static getSendRequestHandler(e){return Fe.sendRequestHandlers[e]||window.app[e]}}Be(Fe,"beforeSendHandlers",{}),Be(Fe,"afterSendHandlers",{}),Be(Fe,"sendRequestHandlers",{});var Ge=n(44436);Ge(document).on("keydown",async function(e){if(13===e.keyCode){const t=Ge("form.js-form:visible");1===t.length&&await We(e,Ge('*[type="submit"]:visible',t))}}),Ge(document).on("click.js-form",'form.js-form *[type="submit"]',We);const Ve=["registration","lpregistration","registration/","lpregistration/"];async function We(e,t){e.preventDefault(),x.getTooltipElement().hide();const n=t||Ge(this),r=t||Ge(e.target),o=r.data("before-send"),s=!(void 0===r.attr("disabled")),a=n.closest("form"),c=a.attr("action"),l=T.getNoLangUrl(c),u=n.data("handler"),d=n.data("send-request"),h=Ge("*");let p,f;if(!0!==s){if(r.attr("disabled","disabled"),void 0!==o){try{f=Fe.getBeforeSendHandler(o)({action:l,caller:n,form:a}),f=!!f}catch(e){const t=new j(`Call ${u} beforeSend handler error: ${e.message}`);t.stack=e.stack,console.error(t,u),window.Sentry.captureException(t),r.removeAttr("disabled"),f=!1}if(!1===f)return r.removeAttr("disabled"),!1}if(void 0!==u){h.addClass("cursorprogress");const e=function(e){try{Ve.includes(c)&&Ue.fireMarketing(te.REGISTRATION),Fe.getAfterSendHandler(u)({action:l,caller:n,form:a,response:e})}catch(e){const t=new j(`Call ${u} response handler error: ${e.message}`);console.error(t,u),t.stack=e.stack,window.Sentry.captureException(t)}finally{r.removeAttr("disabled"),h.removeClass("cursorprogress")}},t=function(){i(n,!1,C._n("common_error")),r.removeAttr("disabled"),h.removeClass("cursorprogress")};void 0!==d?Fe.getSendRequestHandler(d)(a).then(e).catch(t):(p=a.serialize(),p=`${p}&confidence=${await Q.getConfidenceScore()}`,Ge.post(l,p).done(e).fail(t))}}return!1}function He(e){e.removeClass("js-form"),e.on("submit",function(){return!1})}var $e=n(44436);class qe{static stretch(){$e(".popup-stretch").each(function(){const e=$e(this);let t=0;const n=e.find(".popup-stretch__top"),i=e.find(".popup-stretch__middle"),r=e.find(".popup-stretch__bottom"),o=e.find(".popup-stretch__content");o.css("height","");const s=n.height(),a=r.height(),c=o.outerHeight(),l=o.height();void 0!==s&&void 0!==a&&void 0!==c&&void 0!==l&&(t=c-s-a-parseInt(n.css("margin-bottom"))-parseInt(n.css("margin-top")),t=t>=0?t:0,t=parseInt(t.toFixed()),t=(t+s+a)%2==0?t:t+1,i.height(t),c%2!=0&&o.height(l+1))})}}var ze=n(44436);class Ke{static isGamePage(){return window&&void 0!==window.isGamePageFlag&&!0===window.isGamePageFlag}static reload(){J.isLanding()||J.isSite()?location.reload():top.location.href=window.app.config.app_url+window.app.config.social_app_id}static setLoadingState(){ze(document.body).addClass("cursorprogress")}static disableLoadingState(){ze(document.body).removeClass("cursorprogress")}}var Ye=n(44436);function Je(){ae.A.interceptors.request.use(function(e){return e.headers["X-Requested-With"]="XMLHttpRequest",e.headers["X-Language"]=window.app.config.language,window.app.user_huid&&(e.headers["X-Current-Account"]=window.app.user_huid),J.isSocial()&&(e.headers["X-Session-Token"]=window.app.session.id,e.headers["X-Force-Session"]="1"),e}),ae.A.interceptors.response.use(function(e){return e},function(e){var t,n,i;const r="1"===(null==e||null===(t=e.response)||void 0===t||null===(n=t.headers)||void 0===n?void 0:n["x-reload"]);throw 403===(null==e||null===(i=e.response)||void 0===i?void 0:i.status)&&r&&Ke.reload(),e}),Ye.ajaxSetup({beforeSend:function(e){J.isSocial()&&(e.setRequestHeader("X-Session-Token",window.app.session.id),e.setRequestHeader("X-Force-Session","1")),e.setRequestHeader("X-Language",window.app.config.language),window.app.user_huid&&e.setRequestHeader("X-Current-Account",String(window.app.user_huid))},complete:function(e){403===e.status&&"1"===e.getResponseHeader("X-Reload")&&Ke.reload()}})}function Xe(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Qe{constructor(e){Xe(this,"location",void 0),Xe(this,"prefix","lp_auth_step"),this.location=e}send(e){const t=this.createEventName(e);Ue.fireMarketing(t)}createEventName(e){const t=this.location.pathname.split("/"),n=t.length,i=t[n-1],r=t[n-2];return`${this.prefix}_${e}_type_${i}_name_${r}`}}var Ze=n(44436);function et(e){const t=Ze(e).closest(".js-main"),n=Ze(t).attr("id");return Ze(`#${n}`)}let tt;Ze(function(){tt=x.getTooltipElement(),Ze(".js-close-button-reg").on("click",function(){const e=et(this);e.removeClass("step1 step2"),e.addClass("step1"),qe.stretch()}),Ze(".js-form .button-back").on("click",function(){const e=et(this);e.removeClass("step1 step2"),e.addClass("step1"),qe.stretch()})}),window.app.registrationV3step1=function(e){const t=e.form,n=Ze(".js-terms_agree",t),i=Ze("input[name=email]",t).val(),r=e.caller.data("tooltipdirection"),o=R[r],s=Ze("input[name=email]",e.form),a=s.parents(".white_input");if(Ze(".error",e.form).removeClass("error"),n.length&&!n.hasClass("checked"))return tt.showTooltipElement(n,o,C._n("agree_error"),!0),!1;if(!D(i))return a.addClass("error"),tt.showTooltipElement(s,o,C._n("wrong_data")),!1;const c=et(e.caller);return c.removeClass("step1 step2"),c.addClass("step2"),e.caller.removeAttr("disabled"),qe.stretch(),new Qe(window.location).send("2"),!0},window.app.registrationV3step2=async function(e){const t=(new f).getJsonRpcResponseFromObject(e.response),n=e.caller.data("tooltipdirection"),i=R[n],r=Ze("input[name=password]",e.form),o=r.parents(".white_input");return Ze(".error",e.form).removeClass("error"),t instanceof p?(o.addClass("error"),void tt.showTooltipElement(r,i,t.error.message)):t instanceof d?(window.app.user_huid=t.result.huid,Je(),Ue.fireMarketing(te.EMAIL_REG_SUCCESS),He(e.form),void location.reload()):(o.addClass("error"),void tt.showTooltipElement(r,i,C._n("common_error")))},window.app.registrationV3step2V2=function(e){const t=(new f).getJsonRpcResponseFromObject(e.response),n=e.caller.data("tooltipdirection"),i=R[n];if(t instanceof d)return new Qe(window.location).send("2"),void window.app.openDownStep2AndDownload();t instanceof p?tt.showTooltipElement(Ze("input[name=password]",e.form),i,t.error.message):tt.showTooltipElement(Ze("input[name=password]",e.form),i,C._n("common_error"))},window.app.downloadLauncher=function(){try{Ue.fireMarketing(te.INSTALL),Ue.fireMarketing(te.REGISTRATION)}catch(t){var e;console.error(t),null===(e=window)||void 0===e||e.Sentry.captureException(t)}setTimeout(function(){location.href=T.getNoLangUrl("download")},800)},window.app.openDownloadStep2=function(){const e=Ze("#registration"),t=Ze("input[name=password]",e).parent(),n=Ze("button[data-handler=registrationV3step2V2]");e.removeClass("step1 step2"),e.addClass("step2"),t.hide(),n.data("handler","downloadLauncher"),Ze(".js-close-button-reg",e).text("")},window.app.openDownStep2AndDownload=function(){window.app.openDownloadStep2(),window.app.downloadLauncher()};let nt=function(e){return e.POPUP="popup",e.ACCOUNT="account",e.LP="lp",e}({});var it=n(44436);function rt(e){const t=it(e).closest(".js-main"),n=it(t).attr("id");return it(`#${n}`)}let ot;window.app.config.landings.dontoutPopupEnabled=!1,window.app.registrationV3Step2WithSubscription=function(e){const t=e.caller.data("tooltipdirection"),n=R[t],i=it("input[name=password]",e.form),r=i.parents(".white_input");if(it(".error",e.form).removeClass("error"),!i.val().toString().trim())return r.addClass("error"),void ot.showTooltipElement(i,n,i.val()?i.val().length<6?C._n("pass_short"):i.val().length>20?C._n("pass_long"):C._n("common_error"):C._n("pass_empty"));new Qe(window.location).send("3");const o=rt(e.caller);o.removeClass("step1 step2"),o.addClass("step3"),e.caller.removeAttr("disabled"),it("span[data-action='openSingle']").parent().hide()},window.app.registrationV3Step3WithSubscription=async function(e){const t=e.form,n=it("input[name=email]",t).val(),i=(new f).getJsonRpcResponseFromObject(e.response),r=e.caller.data("tooltipdirection"),o=R[r],s=it("input[name=password]",e.form),a=s.parents(".white_input");if(it(".error",e.form).removeClass("error"),i instanceof p){const t=rt(e.caller);return t.removeClass("step1 step3"),t.addClass("step2"),a.addClass("error"),void ot.showTooltipElement(s,o,i.error.message)}if(i instanceof d){if(window.app.config.suid=i.result.suid.toString(),window.app.user_huid=i.result.huid,window.app.config.user_auth_token=i.result.token,!1!==it(e.caller).data("subscription")){const e=Ce.getInstance();await e.setConsentState(n,!0,nt.LP)||console.error(`Can't set consent for user with suid ${e.getSuid()}`)}return Je(),Ue.fireMarketing(te.EMAIL_REG_SUCCESS),He(e.form),void location.reload()}a.addClass("error"),ot.showTooltipElement(s,o,C._n("common_error"))},window.app.changeRegWithSubscriptionButtonState=function(e){const t=e.form,n=it(".js-subscription_agree",t),i=e.caller.data("tooltipdirection"),r=R[i];return!(n.length&&!n.hasClass("checked"))||(ot.showTooltipElement(n,r,C._n("agree_error"),!0),!1)},it(function(){ot=x.getTooltipElement(),it(".js-close-button-reg").on("click",function(){const e=rt(this);e.removeClass("step1 step2"),e.addClass("step1"),qe.stretch()}),it(".js-form .button-back").on("click",function(){const e=rt(this);e.removeClass("step1 step2"),e.addClass("step1"),qe.stretch()})});var st=n(44436);function at(e){const t=st(e).closest(".js-main"),n=st(t).attr("id");return st(`#${n}`)}let ct;st(()=>{ct=x.getTooltipElement(),st(".js-close-button-reg").on("click",function(){const e=at(this);e.removeClass("step1 step2 step3"),e.addClass("step1"),qe.stretch()}),st(".js-form .button-back").on("click",function(){const e=at(this);e.removeClass("step1 step2 step3"),e.addClass("step1"),qe.stretch()})}),window.app.registrationPollStep1=function(e){const t=e.form,n=st(".js-terms_agree",t),i=st("input[name=email]",t).val(),r=e.caller.data("tooltipdirection"),o=R[r],s=st("input[name=email]",e.form),a=s.parents(".white_input");if(st(".error",e.form).removeClass("error"),n.length&&!n.hasClass("checked"))return ct.showTooltipElement(n,o,C._n("agree_error"),!0),!1;if(!D(i))return a.addClass("error"),ct.showTooltipElement(s,o,C._n("wrong_data")),!1;const c=at(e.caller);return c.removeClass("step1 step2"),c.addClass("step2"),e.caller.removeAttr("disabled"),qe.stretch(),new Qe(window.location).send("2"),!0},window.app.registrationPollStep2=async function(e){const t=e.form,n=st("input[name=password]",t),i=e.caller.data("tooltipdirection"),r=R[i],o=n.parents(".white_input");if(st(".error",e.form).removeClass("error"),n.val().toString().trim().length){const t=at(e.caller);return t.removeClass("step2 step3"),t.addClass("step3"),e.caller.removeAttr("disabled"),qe.stretch(),new Qe(window.location).send("3"),!0}return e.caller.removeAttr("disabled"),o.addClass("error"),ct.showTooltipElement(n,r,C._n("errors.pass_empty")),!1},window.app.registrationPollStep3=function(e){const t=(new f).getJsonRpcResponseFromObject(e.response),n=e.caller.data("tooltipdirection"),i=R[n];if(st(".error",e.form).removeClass("error"),t instanceof p)ct.showTooltipElement(e.caller,i,t.error.message);else{if(t instanceof d){const n=st(".step3 .js-subscription_agree.checked").attr("id")||"NULL",i=T.current();return i.addQueryParam("poll",n),window.app.user_huid=t.result.huid,Je(),Ue.fireMarketing(te.EMAIL_REG_SUCCESS),He(e.form),void i.setHref()}ct.showTooltipElement(e.caller,i,C._n("common_error"))}};const lt="UnityBrowserApi",ut=ye.getPrefixedCopy("JS_TO_WEBGL");class dt{sendCommand(e){let t;const n={method:e.getName(),params:e.getParams()};return ut.debug(JSON.stringify(n)),window.gameInstance&&window.gameInstance.SendMessage?(t=window.gameInstance.SendMessage(lt,"Receive",JSON.stringify(n)),ut.info(`Called command ${e.getName()}`),t):(ut.error("Game instance or SendMessage method is not available."),null)}openAccountWindow(){window.gameInstance.SendMessage(lt,"OpenAccountWindow")}}var ht=n(44436),pt=n(44436);const ft={$current_policy_popup:void 0,block_button:void 0,policyInfo:void 0,$accept_policy_popup:pt("#accept_policy_popup"),$notify_policy_popup:pt("#notify_policy_popup"),setGetUserReadyFlag:()=>{window.app.flags.get_user_ready=!0},checkPolicyAccept:()=>{ft.policyInfo=window.app.getGameStartDataResponse.policy_info,delete window.app.getGameStartDataResponse.policy_info,ft.$current_policy_popup=!0===ft.policyInfo.isNotification?ft.$notify_policy_popup:ft.$accept_policy_popup,!0!==ft.policyInfo.accepted?(pt("button",ft.$current_policy_popup).on("click",()=>{void 0!==ft.block_button&&!1!==ft.block_button||(ft.block_button=!0,ft.acceptNewPolicy(void 0))}),pt(".content",ft.$current_policy_popup).html(ft.policyInfo.html_view),ft.$current_policy_popup.show(),!0===ft.policyInfo.isNotification&&(ft.setGetUserReadyFlag(),function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=ht(".full-screen-overlay");t.show(),e&&ht(".__loader",t).show()}())):ft.setGetUserReadyFlag()},acceptNewPolicy:async e=>{let t,n;const i=[];for(t in ft.policyInfo.unacceptable_ids)n=ft.policyInfo.unacceptable_ids[t],i.push(n);const r={suid:re(!1),token:window.app.config.user_auth_token,policy_ids:i},o=await function(e){return ue.makeRequest(de.ACCEPT_POLICY,e,window.app.deviceIdentifier)}(r);let s="bad response from server. response: ";ft.setGetUserReadyFlag(),ft.$current_policy_popup.hide(),ht(".full-screen-overlay, .full-screen-overlay .__loader").hide(),1!==o.status&&(s+=JSON.stringify(o),window.Sentry.captureException(new Error(s)))}};pt(()=>{ft.$accept_policy_popup=pt("#accept_policy_popup"),ft.$notify_policy_popup=pt("#notify_policy_popup")});let gt=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.MALE=1]="MALE",e[e.FEMALE=2]="FEMALE",e}({}),mt=function(e){return e.Default="preloader_background_default",e.Halloween="preloader_background_halloween",e}({});var vt=n(44436);function _t(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class wt{constructor(){_t(this,"hintBlocked",!1),_t(this,"storage",void 0),_t(this,"preloaderBackgrounds",void 0),_t(this,"currentType",void 0),_t(this,"preloaderContainer",void 0),this.storage=new be,this.setPreloaderBackgroundParams(),this.preloaderContainer=vt(".game-loading-screen__newbie-video"),this.createPreloaderBackground()}static getInstance(){return void 0===wt.instance&&(wt.instance=new wt),wt.instance}showFirstSessionWarning(){vt(".game-loading-screen__first-launch").show()}showPreloader(){this.preloaderContainer.fadeIn()}removePreloader(){this.preloaderContainer.empty()}show(){vt(".game-loading-screen").fadeIn()}hide(){vt(".game-loading-screen").fadeOut()}setLoadingProgress(e){vt(".game-loading-progress-bar__progress-percents").text(`${e.toFixed()}%`),vt(".game-loading-progress-bar__progress-bar").css("width",`${e.toFixed()}%`)}setHintText(e){!0!==this.hintBlocked&&vt(".game-loading-indicator__hint-aligner").text(e)}setBackground(e){e!==this.currentType&&(this.setPreloaderBackgroundParams(e),this.createPreloaderBackground())}blockHintText(){this.hintBlocked=!0}setPreloaderBackgroundParams(e){const t=this.getCachedPreloaderType(),n=window.app.config.preloader_backgrounds,i=e&&n[e]?e:t;n[i]&&(this.savePreloaderTypeToCache(i),this.preloaderBackgrounds=n[i])}createPreloaderBackground(){if(void 0===this.preloaderBackgrounds)throw new Error("Preloader backgrounds not found");if(this.removePreloader(),"image"===this.preloaderBackgrounds.type){const e=this.preloaderBackgrounds.htmlParams[0].src,t=vt("<div>");t.addClass("preloader_image"),t.css("background-image",`url(${e})`),this.preloaderContainer.append(t)}else{const e=vt('<video class="index_video" nopreload loop="loop" autoplay="autoplay" muted>');this.preloaderBackgrounds.htmlParams.forEach(t=>{e.append(`<source src="${t.src}" type="${t.type}"/>`)}),this.preloaderContainer.append(e)}}getCachedPreloaderType(){return this.storage.get(Ae.PRELOADER_TYPE)||mt.Default}savePreloaderTypeToCache(e){e===mt.Default?this.storage.delete(Ae.PRELOADER_TYPE):this.storage.set(Ae.PRELOADER_TYPE,e),this.currentType=e}}_t(wt,"instance",void 0);class yt extends Error{constructor(){super(...arguments),this.name="GetUserError"}}class bt extends Error{constructor(){super(...arguments),this.name="StatSendEventError"}}function Et(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Tt{static activate(){this.isActive=!0,this.flushQueue()}static async sendEvent(e){var t,n;let i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(Ce.getInstance().isSimulate())return;i=a||await this.serverTime.getTime();const c={count:r,factTs:i,fact_name:e,special_cprops:s,special_iprops32:o};!1===this.isActive&&this.queueEvent(c),await this.sendViaHubApi(c,null===(t=window.app)||void 0===t||null===(n=t.config)||void 0===n?void 0:n.user_auth_token)}static async flushQueue(){ye.info("Launching events resend");const e=Tt.queuedEvents;Tt.queuedEvents=[],e.forEach(e=>{Tt.sendEvent(e.fact_name,e.count,e.special_iprops32,e.special_cprops,e.factTs)})}static sendViaHubApi(e,t){const n=re(),i={fact:e,suid:n,token:t};ue.makeRequest(de.SEND_STAT_EVENT,i,window.app.deviceIdentifier).then(t=>{("error"in t||!0!==(null==t?void 0:t.sent))&&(Tt.queueEvent(e),"error"in t&&(console.error(t.error),window.Sentry.captureException(new bt("Failed to send event, not success"))))}).catch(t=>{var n;if(403===(null==t||null===(n=t.response)||void 0===n?void 0:n.status))return;Tt.queueEvent(e);const i=new bt("Failed to send event",t);console.error(t,i.stack),window.Sentry.captureException(i)})}static queueEvent(e){Tt.queuedEvents.push(e)}}St(Tt,"isActive",!1),St(Tt,"queuedEvents",[]),St(Tt,"serverTime",new class{constructor(){Et(this,"diff",null),Et(this,"syncInProgress",void 0)}async getTime(){null!==this.diff||this.syncInProgress||(this.syncInProgress=this.getDiff(),await this.syncInProgress),this.syncInProgress&&await this.syncInProgress;const e=this.diff?this.diff:0;return Math.floor(Date.now()/1e3)+e}async getDiff(){const e=Math.floor(Date.now()/1e3);this.syncInProgress=ue.makeRequest(de.GET_SERVER_TIME,void 0,window.app.deviceIdentifier);const t=await this.syncInProgress.then(e=>null!=e&&e.time?e.time:null).catch(()=>null);this.syncInProgress=void 0,null!==t&&(this.diff=t-e)}});var At=n(43294);let Ct=function(e){return e.FIRST_WEB_VISIT_TS="first_web_visit_ts",e.FIRST_WEB_VISIT_RND="first_web_visit_rnd",e}({});var It=n(44436);function Ot(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Nt{constructor(e){Ot(this,"firstWebVisitTs",void 0),Ot(this,"firstWebVisitRnd",void 0),Ot(this,"fingerPrintId",void 0),Ot(this,"clientJs",void 0),console.log("Fingerprint user start"),this.clientJs=e,this.firstWebVisitRnd=this.getRnd(),this.firstWebVisitTs=this.getTs(),this.fingerPrintId=this.getId()}getTs(){const e=localStorage.getItem(Ct.FIRST_WEB_VISIT_TS),t=It.cookie(Ct.FIRST_WEB_VISIT_TS);if(console.log("FIRST_WEB_VISIT_TS",t),e||t)this.firstWebVisitTs=e?`${e}`:`${t}`;else{const e=Math.floor((new Date).getTime()/1e3);this.firstWebVisitTs=`${e}`,localStorage.setItem(Ct.FIRST_WEB_VISIT_TS,`${e}`),It.cookie(Ct.FIRST_WEB_VISIT_TS,`${e}`,{path:"/"})}return this.firstWebVisitTs}getRnd(){const e=localStorage.getItem(Ct.FIRST_WEB_VISIT_RND),t=It.cookie(Ct.FIRST_WEB_VISIT_RND);if(e||t)this.firstWebVisitRnd=e||`${t}`;else{const e=(new Date).getTime();this.firstWebVisitRnd=`${e}`,localStorage.setItem(Ct.FIRST_WEB_VISIT_RND,`${e}`),It.cookie(Ct.FIRST_WEB_VISIT_RND,`${e}`,{path:"/"})}return this.firstWebVisitRnd}getId(){return this.fingerPrintId=this.clientJs.getFingerprint(),this.fingerPrintId}}function Pt(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class kt extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(e),Pt(this,"name",void 0),Pt(this,"stack",void 0),this.name="GetAccountOnPushService",this.stack=t,Object.setPrototypeOf(this,kt.prototype)}}function Rt(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Lt extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(e),Rt(this,"name",void 0),Rt(this,"stack",void 0),this.name="GetSubscriptionStateError",this.stack=t,Object.setPrototypeOf(this,Lt.prototype)}}function xt(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Mt extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(e),xt(this,"name",void 0),xt(this,"stack",void 0),this.name="GetActiveStateError",this.stack=t,Object.setPrototypeOf(this,Mt.prototype)}}function Dt(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class jt extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(e),Dt(this,"name",void 0),Dt(this,"stack",void 0),this.name="SetAccountStateError",this.stack=t,Object.setPrototypeOf(this,jt.prototype)}}function Ut(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Bt extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(e),Ut(this,"name",void 0),Ut(this,"stack",void 0),this.name="SaveNewUserOnNotificationServiceError",this.stack=t,Object.setPrototypeOf(this,Bt.prototype)}}var Ft=n(16508),Gt=n(93039),Vt=n(41720);function Wt(){if(Gt.Ay.rr())return Vt.A.isPushSupported()}function Ht(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $t extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(e),Ht(this,"name",void 0),Ht(this,"stack",void 0),this.name="GetProviderTokenError",this.stack=t,Object.setPrototypeOf(this,$t.prototype)}}class qt{static async saveUserToken(e){try{const t=Ce.getInstance(),n={platform:window.app.config.user_browser.name,signature:t.getAuthToken(),suid:t.getSuid(),token:e},i=new Ft.d(T.getNotificationsServiceUrl());return await i.addUser(n)}catch(e){throw new Bt(e.message,e.stack)}}static async setAccountState(e){try{const t=Ce.getInstance(),n={platform:window.app.config.user_browser.name,signature:t.getAuthToken(),suid:t.getSuid(),state:e},i=new Ft.d(T.getNotificationsServiceUrl());return await i.changeAccountState(n)}catch(e){throw new jt(e.message,e.stack)}}static async isActiveAccount(){try{return(await this.getAccountState()).accountAlreadyExist}catch(e){throw new Mt(e.message,e.stack)}}static async isAccountExists(){try{return(await this.getAccountState()).lastUpdatedDate}catch(e){throw new Lt(e.message,e.stack)}}static checkNotificationsInBrowserGranted(){return Wt()}static async getAccountState(){try{console.log("[Notification Service] try to send request on check account");const e=Ce.getInstance(),t={platform:window.app.config.user_browser.name,suid:e.getSuid(),signature:e.getAuthToken()},n=new Ft.d(T.getNotificationsServiceUrl());return await n.checkUserState(t)}catch(e){throw new kt(e.message,e.stack)}}static async getProviderToken(e,t){try{console.log("[Notification Service] trying to get provider token");const n=new Ft.d(T.getNotificationsServiceUrl());return await n.getProviderToken({suid:e,token:t})}catch(e){throw new $t(e.message,e.stack)}}}var zt=n(52661),Kt=n(82551),Yt=n(62406),Jt=n(6272),Xt=n(56561),Qt=n(10866),Zt=n(14528),en=n(45823);class tn{static async register(){try{const e=nn.getServiceWorkerUrl(),t=await tn.getSwRegistrations();return t?(this.serviceWorkerInstance=t,console.log("Got exist service worker"),!0):t?(console.log("Service worker was exist",t),!0):(this.serviceWorkerInstance=await navigator.serviceWorker.register(e),console.log("New service worker was success installed"),!0)}catch(e){return console.error("ServiceWorker registration fault",e),window.Sentry.captureException("ServiceWorker registration fault"),!1}}static async getInstance(){return this.serviceWorkerInstance||await this.register(),this.serviceWorkerInstance}static async getSwRegistrations(){const e=await navigator.serviceWorker.getRegistrations();return e[0]?e[0]:void 0}static async remove(){const e=await this.getSwRegistrations();return!e||e.unregister()}static async checkSwUpdates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=e;null===t&&(t=await tn.getInstance()),console.log("[Braze] try to update serviceworker"),await t.update(),t.onupdatefound=()=>{console.log("[Braze] service worker has updated")}}catch(e){window.Sentry.captureException(e)}}}!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(tn,"serviceWorkerInstance",void 0);class nn{static async isWebPushSubscribed(){if(J.isSocial())return!1;try{return!!await qt.isActiveAccount()&&this.hasBrowserGrantedPushes()}catch(e){return this.logException(e,"[Braze] error on getting the subscribe state"),!1}}static async unregisterFromWebPush(){if(J.isSocial())return!1;try{return!!(await qt.setAccountState(!1)).isUpdated&&await this.unregisterForProviderExternally()}catch(e){return this.logException(e,"[Braze] error on unregister from webpush"),!1}}static async subscribeToPushNotifies(){if(J.isSocial())return!1;try{return!!(await qt.setAccountState(!0)).isUpdated&&await this.registerForProviderExternally()}catch(e){return this.logException(e,"[Braze] registerFoWebPush is fault"),!1}}static async registerForProviderExternally(){if(J.isSocial())return!1;try{return!!await tn.register()&&new Promise(e=>{var t;t=()=>{console.log("[Braze] Permission requested success"),e(!0)},Gt.Ay.rr()&&zt.default.ea().subscribe((e,n,i)=>{const r=Gt.Ay.rn();r&&r.requestImmediateDataFlush(),t()},()=>{console.log("[Braze] Permission requested failed"),e(!1)})})}catch(e){return this.logException(e,"[Braze] Failed on register push for provider externally"),!1}}static async unregisterForProviderExternally(){try{return!!await tn.remove()&&new Promise(e=>{Gt.Ay.rr()&&zt.default.ea().unsubscribe(()=>{console.log("[Braze] Unregister requested success"),e(!0)},()=>{console.log("[Braze] Unregister requested failed"),e(!1)})})}catch(e){return this.logException(e,"[Braze] Failed on unregister by custom approach"),!1}}static async startSession(e){if(J.isSocial())return void console.info("Cant start session in Socials");if(Ce.getInstance().isSimulate())return void console.info("Cant start session because Spoofer is enabled");var t,n;if(!(t=window.app.config.notifyProvider.sdkApiKey,n={enableLogging:!0,baseUrl:window.app.config.notifyProvider.sdkEndpoint,serviceWorkerLocation:this.getServiceWorkerUrl(),manageServiceWorkerExternally:!0,enableSdkAuthentication:!0},Gt.Ay.initialize(t,n)))return;const i=Ce.getInstance();!function(e,t){if(!Gt.Ay.rr())return;if(null==e||0===e.length||e!=e)return void Yt.A.error("changeUser requires a non-empty userId.");if((0,Kt.N)(e)>Jt.A.ur)return void Yt.A.error(`Rejected user id "${e}" because it is longer than ${Jt.A.ur} bytes.`);if(null!=t&&!(0,Xt.rK)(t,"set signature for new user","signature"))return;const n=Gt.Ay.rn();n&&n.changeUser(e.toString(),Gt.Ay.ar(),t)}(e,(await qt.getProviderToken(i.getSuid(),i.getAuthToken())).providerAuthToken),function(){if(Gt.Ay.rr())return Gt.Ay.mr()}().setEmail(i.getEmail()),function(){if(!Gt.Ay.rr())return;const e=Gt.Ay.rn();if(!e)return;e.openSession();const t=Qt.A.Ls.Fs,n=new Qt.A(t,Yt.A);n.cr(t.Ms.jr,(i,r)=>{const o=r.lastClick,s=r.trackingString;Yt.A.info(`Firing push click trigger from ${s} push click at ${o}`);const a=e.lr(o,s),c=function(){en.B.m().Ce(Zt.A.hr,[s],a)};e.br(c,c),n.ge(t.Ms.jr,i)}),n.Ns(t.Ms.kr,function(t){e.vr(t)})}()}static hasBrowserGrantedPushes(){return!J.isSocial()&&Wt()&&!function(){if(Gt.Ay.rr())return Vt.A.isPushBlocked()}()}static getServiceWorkerUrl(){return T.getServiceWorkerUrl("static/j/firebase-messaging-sw.js")}static logException(e,t){console.error(t,{exception:{message:e.message,stack:e.stack,name:e.name}}),window.Sentry.captureException(e)}}var rn=n(44436);const on=ye.getPrefixedCopy("CLIENT_EVENT");class sn{static fireEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};setTimeout(()=>{const n=this.getScopedEventName(e);let i=t;void 0===t&&(i={}),on.debug(`Fired event ${n}, data ${JSON.stringify(i)}`),rn(document).trigger(n,[i])},0)}static on(e,t){const n=this.getScopedEventName(e);rn(document).on(n,t),on.debug(`Subscribed to event ${n}`)}static one(e,t){const n=this.getScopedEventName(e);rn(document).one(n,t),on.debug(`Subscribed to event (once) ${n}`)}static getScopedEventName(e){return`${e}.${this.eventScope}`}}!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(sn,"eventScope","client");let an=function(e){return e.INITIATE_CHECKOUT="initiateCheckout",e.PAYMENT_FINISHED="paymentFinished",e.FIRST_BUY="firstBuy",e.TUTORIAL_100_CLICKS="tutorial100Clicks",e.N_DAY_RETENTION="nDayRetention",e.FIRST_DAY_RETENTION="firstDayRetention",e.NOT_INSTALL="notInstall",e.REBILL_BUY="rebillBuy",e.SUCCESS_BUY="successBuy",e.SERVER_LOGIN="serverLogin",e.PREREG_LANDING="landing",e.PREREG_CONFIRM="preregConfirm",e.PREREG_COMPLETE="preregComplete",e.CITY_LEVEL_UP="levelUp",e.INSTALL="install",e.SWITCH_TO_WEBGL="switchToWebgl",e.WEBGL_START_LOADING="webglStartLoading",e.WEBGL_FINISH_LOADING="webglFinishLoading",e.FAIL_INDEXED_DB="failIndexedDb",e.SHOW_PRELOADER="showPreloader",e.HIDE_PRELOADER="hidePreloader",e.FIRST_CLICK="firstClick",e.HERO_LEVEL_UP="heroLevelUp",e.MARCHES_9="marches9",e.VALOR_MONSTER_1000="valorMonster1000",e.VALOR_MONSTER_1000_PER_MARCH="valorMonster1000PerMarch",e.UNITS_TRAIN_SILVER_10000="unitsTrainSilver10000",e.MONSTER_LVL_5="monsterLvl5",e.PAYMENT_METHOD_CHOSEN="paymentMethodChosen",e.PAYMENT_PROCEED="paymentProceed",e.CLIENT_FULLY_LOADED="clientFullyLoaded",e}({}),cn=function(e){return e.client_widget_seen="client_widget_seen",e.client_widget_click="client_widget_click",e.client_widget_click_buy="client_widget_click_buy",e.client_widget_buy="client_widget_buy",e.client_widget_buy_first="client_widget_buy_first",e.client_payment_seen="client_payment_seen",e.client_payment_switch="client_payment_switch",e.client_payment_click_buy="client_payment_click_buy",e.client_action_seen_from_login="client_action_seen_from_login",e.client_action_buy_from_login="client_action_buy_from_login",e.client_action_seen_from_go_to_map="client_action_seen_from_go_to_map",e.client_action_buy_from_go_to_map="client_action_buy_from_go_to_map",e.client_action_seen_from_global_map="client_action_seen_from_global_map",e.client_action_buy_from_global_map="client_action_buy_from_global_map",e.client_bank_group_click="client_bank_group_click",e.client_interface_bank_link_seen="client_interface_bank_link_seen",e.client_interface_bank_link_click="client_interface_bank_link_click",e.client_interface_bank_link_close_bank_without_buy="client_interface_bank_link_close_bank_without_buy",e.client_interface_bank_link_buy="client_interface_bank_link_buy",e.client_march_with_reinforcement="client_march_with_reinforcement",e.client_unit_info_seen="client_unit_info_seen",e.client_send_private_chat_message="client_send_private_chat_message",e.client_click_chat_from_hero_info="client_click_chat_from_hero_info",e.client_click_chat_from_hero_avatar="client_click_chat_from_hero_avatar",e.client_clan_sent_message_to_journal_by_leads="client_clan_sent_message_to_journal_by_leads",e.client_seen_clan_lead_message_in_journal="client_seen_clan_lead_message_in_journal",e.client_subscription_widget_seen="client_subscription_widget_seen",e.client_subscription_widget_click="client_subscription_widget_click",e.client_subscription_window_close="client_subscription_window_close",e.client_subscription_click_subscribe="client_subscription_click_subscribe",e.client_subscription_change_pack="client_subscription_change_pack",e.client_fps_watcher="client_fps_watcher",e.client_memory_watcher="client_memory_watcher",e.client_memory_allocation_error="client_memory_allocation_error",e.client_enlarge_memory_arrays_error="client_enlarge_memory_arrays_error",e.client_memory_access_out_of_bounds_error="client_memory_access_out_of_bounds_error",e.client_out_of_memory_error="client_out_of_memory_error",e.client_create_unity_instance_error="client_create_unity_instance_error",e.client_user_change_preset="client_user_change_preset",e.client_external_click_google_play="client_external_click_google_play",e.client_rate_window_seen="client_rate_window_seen",e.client_rate_window_push_yes="client_rate_window_push_yes",e.client_rate_window_push_no="client_rate_window_push_no",e.client_choose_stars="client_choose_stars",e.client_choose_stars_close="client_choose_stars_close",e.client_choose_emoji="client_choose_emoji",e.client_choose_emoji_close="client_choose_emoji_close",e.client_window_with_store_link_seen="client_window_with_store_link_seen",e.client_window_with_store_link_push_go_store="client_window_with_store_link_push_go_store",e.client_window_with_store_link_push_close="client_window_with_store_link_push_close",e.client_social_like_showed="client_social_like_showed",e.client_social_like_closed="client_social_like_closed",e.client_social_like_clicked="client_social_like_clicked",e.client_steampay_error_window_seen="client_steampay_error_window_seen",e.client_steampay_error_window_close="client_steampay_error_window_close",e.client_steampay_error_window_click_go_to_site="client_steampay_error_window_click_go_to_site",e.client_sound_track_skipped="client_sound_track_skipped",e.client_sound_track_started="client_sound_track_started",e.client_monsters_list_try_map_fight="client_monsters_list_try_map_fight",e.client_monsters_list_map_fight="client_monsters_list_map_fight",e.client_preloader_progress="client_preloader_progress",e.client_compilation_stage_complete="client_compilation_stage_complete",e.client_start_bank_preloader="client_start_bank_preloader",e.client_end_bank_preloader="client_end_bank_preloader",e.client_sound_switch="client_sound_switch",e.client_screen_scroll="client_screen_scroll",e.client_first_click="client_first_click",e.client_100_clicks="client_100_clicks",e.client_load_progress="client_load_progress",e.client_load_map="client_load_map",e.client_load_city="client_load_city",e.client_load_global_map="client_load_global_map",e.client_web_fake_preloader_percents="client_web_fake_preloader_percents",e.client_first_click_experiment="client_first_click_experiment",e.client_community_link_click="client_community_link_click",e.client_fcm_notification_access="client_fcm_notification_access",e.client_preloader_video_closed="client_preloader_video_closed",e.client_preloader_video_initiating="client_preloader_video_initiating",e.client_preloader_video_unmuted="client_preloader_video_unmuted",e.client_new_loader_pre_init_started="client_new_loader_pre_init_started",e.client_new_loader_pre_run_started="client_new_loader_pre_run_started",e.client_new_loader_post_run_started="client_new_loader_post_run_started",e.client_new_loader_runtime_initialized="client_new_loader_runtime_initialized",e.client_payment_method_chosen="client_payment_method_chosen",e.client_payment_proceed="client_payment_proceed",e.marketing_click_referral_link="client_marketing_click_referral_link",e.client_connection_check_start="client_connection_check_start",e.client_connection_check_http="client_connection_check_http",e.client_connection_check_ws="client_connection_check_ws",e}({}),ln=function(e){return e.WEBGL="webgl",e}({});function un(){var e,t,n,i,r,o,s;let a=null!==(e=null===(t=window)||void 0===t||null===(n=t.app)||void 0===n||null===(i=n.config)||void 0===i||null===(r=i.user_browser)||void 0===r?void 0:r.name)&&void 0!==e?e:"";return void 0!==(null===(o=window)||void 0===o||null===(s=o.navigator)||void 0===s?void 0:s.userAgent)&&-1!==window.navigator.userAgent.search(/Facebook/i)&&(a="Gameroom"),a}let dn=function(e){return e[e.PRE_INIT_STARTED=0]="PRE_INIT_STARTED",e[e.PRE_RUN_STARTED=1]="PRE_RUN_STARTED",e[e.POST_RUN_STARTED=2]="POST_RUN_STARTED",e[e.RUNTIME_INITIALIZED=3]="RUNTIME_INITIALIZED",e}({});const hn=new Map([[dn.PRE_INIT_STARTED,cn.client_new_loader_pre_init_started],[dn.PRE_RUN_STARTED,cn.client_new_loader_pre_run_started],[dn.POST_RUN_STARTED,cn.client_new_loader_post_run_started],[dn.RUNTIME_INITIALIZED,cn.client_new_loader_runtime_initialized]]);async function pn(e,t,n){const i=[ln.WEBGL,un()],r=[e,t,n];return Tt.sendEvent(cn.client_preloader_progress,1,r,i)}async function fn(e,t,n){const i=[ln.WEBGL,un(),e],r=[t,n];return Tt.sendEvent(cn.client_compilation_stage_complete,1,r,i)}async function gn(e){const t=hn.get(e);if(!t)return;const n=[ln.WEBGL,un()];return Tt.sendEvent(t,1,[],n)}var mn=n(44436);function vn(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _n{constructor(){vn(this,"popupElement",void 0),vn(this,"closeBtn",void 0),this.popupElement=mn(".error-popup"),this.closeBtn=this.popupElement.find(".close-btn")}setButtonText(e){this.popupElement.find(".support_but").text(e)}setTitle(e){this.popupElement.find(".error-popup__title").text(e)}setMessage(e){!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?this.popupElement.find(".error-popup__message").html(e):this.popupElement.find(".error-popup__message").text(e)}setHtmlMessage(e){this.popupElement.find(".error-popup__message").html(e)}setCallback(e){this.popupElement.find(".support_but").one("click",()=>{this.closeBtn.hide(),this.hide(),e&&e()})}enableCloseBtn(){this.closeBtn.show(),this.closeBtn.one("click",()=>{this.closeBtn.hide(),this.hide()})}show(){this.popupElement.show()}hide(){this.popupElement.hide()}static getInstance(){return void 0===_n.instance&&(_n.instance=new _n),_n.instance}}vn(_n,"instance",void 0);const wn=[],yn=[];async function bn(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.app.user_huid=e,Je(),t=function(e){let t;return t=!0===e?yn.map(e=>e()):wn.map(e=>e()),t}(n),await Promise.all(t),Ke.reload()}function En(){const e=_n.getInstance();return e.setMessage(C._n("common_error")),e.setButtonText("Ok"),e.show(),e.setCallback(()=>{e.hide()}),!0}function Sn(){window.app.handleSocialLoginSuccess=bn,window.app.handleSocialLoginFail=En}let Tn=function(e){return e.FB="fb",e.GOOGLE="google",e.GOOGLE_ONE_TAP="google_one_tap",e.EMAIL="email",e.TW="tw",e.WEB_GUEST="web",e.GPGS="gpgs",e.IOSGC="iosgc",e.APPLE_ID="apple_id",e.ANDROID_GUEST="android_guest",e.IOS_GUEST="ios_guest",e.STEAM="steam",e.VK="vk",e.OD="od",e.MM="mm",e}({});n(44436);let An=function(e){return e[e.PASSWORD_CONFIRMATION_FAILED=1]="PASSWORD_CONFIRMATION_FAILED",e[e.VALIDATION_ERROR=400]="VALIDATION_ERROR",e}({});var Cn=n(44436);function In(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class On{static hasAccountTetheredBlock(){return Cn("#play_via_h").length>0}static closeAccountWindow(){window.app.game_popup_close(),On.hideAccountError()}static scrollTo(e){const t=Cn(e);Cn("#popup_body_wrapper").scrollTop(t.offset().top)}static showSavedGroups(){this.prevOpened.show()}static removeBodyWrapper(){const e=Cn("#account_management");Cn(".scroll-wrapper.scrollbar-rail",e).remove()}static saveOpenedGroups(){const e=Cn("#account_management");this.prevOpened=e.find("[data-ui-group]:visible")}static hideUIGroups(){Cn("#account_management").find("[data-ui-group]").hide()}static hideAccountLoadingState(){const e=Cn("#account_management");Cn(".accountmanagement_loading").removeClass("--withoutspan").hide(),Cn(".scrollbar-rail",e).show(),On.showSavedGroups()}static showAccountLoadingState(){const e=Cn("#account_management");On.saveOpenedGroups(),On.hideUIGroups(),Cn(".scrollbar-rail",e).hide(),Cn(".accountmanagement_loading").show()}static showAccountUIGroup(e){const t=Cn("#account_management");this.prevOpened.add(e),t.find(`[data-ui-group*="${e}"]`).show()}static hideAccountError(){const e=Cn("#account_management");Cn("#input_placeholder",e).removeClass("error"),Cn(".error_bubble",e).fadeOut()}static showError(e){const t=Cn("#account_management");Cn("#input_placeholder",t).addClass("error"),Cn(".error_main",t).text(e),Cn(".error_bubble",t).fadeIn()}static showChangepassError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getErrorMessage(e,t),i=Cn("#account_management #changepass");Cn("#input_placeholder",i).addClass("error"),n.length>0&&(Cn(".error_main",i).text(n),Cn(".error_bubble",i).fadeIn())}static getErrorMessage(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case An.PASSWORD_CONFIRMATION_FAILED:t="errors.pass_c_fail";break;case An.VALIDATION_ERROR:if(n)return n;t="errors.common_error";break;default:t="errors.common_error"}return C._n(t)}static hideLinkError(){Cn("#link-email-error").hide(),Cn("#link-social-error").hide()}static showLinkError(e,t){let n;n=t===Tn.EMAIL?"#link-email-error":"#link-social-error",Cn(n).text(e).show()}static showSocialSwitchAccountError(e){const t=Cn("#account_management");Cn("#switch-by-social-error__container",t).text(e),Cn("#switch-by-social-error__container",t).css("display","block")}static hideSocialSwitchAccountError(){const e=Cn("#account_management");Cn("#switch-by-social-error__container",e).text(""),Cn("#switch-by-social-error__container",e).css("display","none")}static showDisappearingMessage(e,t,n){const i=Cn(e),r="disappearing-message--show";i.text(t).addClass(r),setTimeout(()=>{i.removeClass(r)},n)}static removeHeader(){const e=Cn("#account_management");Cn("#auth",e).remove(),Cn("#uid",e).remove()}static initializeCustomScrollbars(){Cn("#account_management").find(" #popup_body_wrapper").scrollbar()}static hideGuestWarningIcon(){Cn(".tether_social_account.error_icon").addClass("mount-hidden")}static setUserName(e){Cn(".user_name").text(e)}static setAccountAvatar(e){this.getAvatarElement().attr("src",e)}static hideAccountAvatar(){this.getAvatarElement().hide()}static getAvatarElement(){return Cn("#account_management").find(".header_user_avatar")}static showLogoutBtnForWebGuest(){Cn("#account_management #web-guest-logout").show()}static setIsBigReward(e){document.getElementById("link-email-auth").querySelector("[name=is_big_reward]").value=e?"1":""}}In(On,"uiGroups",{CHANGE_PASS:"changepass"}),In(On,"prevOpened",Cn([]));class Nn{static async getLinkedAccountsInfo(e,t){const n={suid:e,token:t};return await ue.makeRequest(de.GET_LINKED_ACCOUNTS_INFO,n,window.app.deviceIdentifier)}}var Pn=n(44436),kn=n(44436);function Rn(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new class{constructor(){Rn(this,"element",null),Rn(this,"textElement",null),Rn(this,"timeoutId",null),Rn(this,"initialized",!1),this.init()}init(){this.element||(this.element=document.createElement("div"),this.element.className="toast-message",this.element.innerHTML='\n<div class="border_back_wrapper">\n  <div class="border_popup_bg_wrapper">\n    <div class="border_popup_bg"></div>\n  </div>\n  <div class="border_popup_ltop"></div>\n  <div class="border_popup_mtop"></div>\n  <div class="border_popup_rtop"></div>\n  <div class="border_popup_ml"></div>\n  <div class="border_popup_mr"></div>\n  <div class="border_popup_lbot"></div>\n  <div class="border_popup_mbot"></div>\n  <div class="border_popup_rbot"></div>\n</div>\n<div class="toast-message__content">\n  <div class="info-icon-22 toast-message__icon"></div>\n  <div class="toast-message__text"></div>\n</div>\n',kn(()=>{document.body.appendChild(this.element),this.textElement=this.element.querySelector(".toast-message__text"),this.initialized=!0}))}show(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.initialized?(this.timeoutId&&clearTimeout(this.timeoutId),this.textElement&&(this.textElement.textContent=e),this.element&&this.element.classList.add("toast-message--visible"),clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.hide()},t)):console.error("ToastMessage is not initialized")}hide(){this.initialized?(this.element&&this.element.classList.remove("toast-message--visible"),this.timeoutId=null):console.error("ToastMessage is not initialized")}};var Ln=n(44436);async function xn(){window.app.game_popup_close(),window.app.game_popup(r.ACCOUNT_MANAGEMENT),On.showAccountLoadingState();const e=he.getInstance().getSuid().toString();try{const t=Ce.getInstance().getAuthToken(),n=await Nn.getLinkedAccountsInfo(e,t);if(!n||"error"in n)return void Mn(C._n("common_error"));const i=await(new pe).getConsentState();if("error"in i)return void Mn(C._n("common_error"));const o=await async function(e,t,n){return(await ae.A.post(T.getNoLangUrl("api/renderAccountView"),{suid:e,linkedAccountsInfo:t,consentState:n})).data}(e,n,i);!function(e){const t=Ln("#account_management"),n=Pn("#account_button");if(On.removeBodyWrapper(),On.removeHeader(),On.hideAccountLoadingState(),t.append(e),J.isSocial()){const e=On.getAvatarElement(),t=window.app.user;e.length&&(null!=t&&t.photo&&""!==(null==t?void 0:t.photo)?On.setAccountAvatar(t.photo):e[0].complete||On.hideAccountAvatar()),t.full_name&&""!==t.full_name.trim()&&On.setUserName(t.full_name)}n.on("click",()=>{window.app.game_popup_close(),window.app.game_popup(r.ACCOUNT_MANAGEMENT)}),On.initializeCustomScrollbars()}(o)}catch(e){Mn(C._n("common_error")),window.Sentry.captureException(e)}}function Mn(e){const t=_n.getInstance();t.setMessage(e),t.setButtonText(C._n("ecommpay.button_back")),t.show(),t.setCallback(()=>{On.closeAccountWindow(),t.hide()})}var Dn=n(44436);class jn{static showNotifications(){window.app.config.hasGuestAuthMethod&&Sn(),jn.showWebGuestAccountWarning()}static showWebGuestNotificationWindow(){if(!window.app.config.hasGuestAuthMethod)return;if(y.get(b.FEATURE_FLAG_LOADER).get(X.DISABLE_WEB_GUEST_ACCOUNT_WARNING).isOn())return;const e=C._n("account.web_guest.danger");this.createNotificationWindow(e).show()}static createNotificationWindow(e){const t=C._n("account.web_guest.connect_account"),n=C._n("account.web_guest.connect_account_title"),i=_n.getInstance();return i.enableCloseBtn(),i.setTitle(n),i.setButtonText(t),i.setMessage(e,!0),i.setCallback(xn),i}static showWebGuestAccountWarning(){window.app.config.hasGuestAuthMethod&&Dn(".tether_social_account.error_icon").removeClass("mount-hidden")}}ye.getPrefixedCopy("PAYMENT_EVENTS");var Un=n(44436);const Bn=ye.getPrefixedCopy("APP_EVENTS");window.app.eventInstall=function(){sn.fireEvent(an.INSTALL),Bn.info("app.eventInstall"),function(){try{const e=new Date,t=`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()} 23:59:59`,n=new Date(t).getTime();Un.cookie("installCookie",n,{expires:1,path:"/",domain:`.${window.app.config.domain}`,secure:!0})}catch(e){console.error(e)}}(),Ue.fireMarketing(te.INSTALL),Bn.info("app.eventInstall::end")},window.app.notInstall=function(){sn.fireEvent(an.NOT_INSTALL),Bn.info("app.notInstall");try{Un.cookie("installCookie")&&Bn.info("app.notInstall::hasInstallCookie")}catch(e){window.Sentry.captureException(e)}Bn.info("app.notInstall::end")},window.app.firtsDayRetention=function(){sn.fireEvent(an.FIRST_DAY_RETENTION),Bn.info("app.firtsDayRetention"),Bn.info("app.firtsDayRetention::end")},window.app.eventRetention=function(e){sn.fireEvent(an.N_DAY_RETENTION,{day:e})},window.app.eventPreregLanding=function(){Ue.firePrereg(te.LANDING),sn.fireEvent(an.PREREG_LANDING)},window.app.eventPreregConfirm=function(){Ue.firePrereg(te.PREREG_CONFIRM),sn.fireEvent(an.PREREG_CONFIRM)},window.app.eventPreregComplete=function(){Ue.firePrereg(te.PREREG_COMPLETE),sn.fireEvent(an.PREREG_COMPLETE)},window.app.fireInitiateCheckout=function(e){sn.fireEvent(an.INITIATE_CHECKOUT,{paymentObject:e})};var Fn=n(17248);function Gn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=`/login/bytokenoauth/?token=${e}`;return t&&(n+=`&suid=${t}`),T.getSiteNoLangUrl(n)}var Vn=n(44436);function Wn(){return Vn("html").hasClass("landing-unity")}function Hn(e){const t=Vn("<iframe>");t[0].src=e,t.css({height:0,left:-10,position:"absolute",top:-10,width:0}),Vn("body").append(t)}function $n(e){const t=Fn(e,!0),n=Wn()?"state=downloadClient":"";if(n){const[e,i]=n.split("=");t.set("query",{...t.query,[e]:i})}let i=t.toString();return Wn()||(window.app.config.landings.startWebgl&&(i=function(e){const t=Fn(e,!0);return t.set("query",{...t.query,clientType:"webgl"}),t.toString()}(i)),J.isLanding()&&(i=function(e){const t=Fn(e,!0);return t.set("query",{...t.query,lpLogin:"yes"}),t.toString()}(i))),i}var qn=n(97387);function zn(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Kn extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei.SERVER_ERROR,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(e),zn(this,"code",void 0),zn(this,"data",void 0),Object.setPrototypeOf(this,Kn.prototype),this.name="RpcReceivedError",this.code=t,this.data=n}}class Yn extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Yn.prototype),this.name="ConnectionTimeoutError"}}function Jn(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Xn{constructor(){Jn(this,"loggingAdapter",void 0),Jn(this,"metricsAdapter",void 0)}setLoggingAdapter(e){this.loggingAdapter=e}setMetricsAdapter(e){this.metricsAdapter=e}setCmdAdapters(e){this.loggingAdapter&&e.setLoggingAdapter(this.loggingAdapter),this.metricsAdapter&&e.setMetricsAdapter(this.metricsAdapter)}}function Qn(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Zn=function(e){return e[e.TIMEOUT_5_SECONDS=5e3]="TIMEOUT_5_SECONDS",e[e.TIMEOUT_20_SECONDS=2e4]="TIMEOUT_20_SECONDS",e[e.TIMEOUT_25_SECONDS=25e3]="TIMEOUT_25_SECONDS",e}({}),ei=function(e){return e[e.SERVER_ERROR=500]="SERVER_ERROR",e}({});class ti extends Xn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),Qn(this,"url",void 0),Qn(this,"requestData",void 0),Qn(this,"timeoutMs",Zn.TIMEOUT_5_SECONDS),Qn(this,"transformerAdapter",void 0),Qn(this,"requestHeaders",void 0),this.requestData={id:n,jsonrpc:"2.0",method:e,params:t}}setTransformerAdapter(e){this.transformerAdapter=e}async run(){const e=Date.now();let t;if(!this.url)throw new Error("Server request url not set");if(this.url.match(/https?:\/\//)||(this.url=`http://${this.url}`),this.logRequestData(),!this.transformerAdapter)throw new Error("Transformer adapter is required");const n=this.transformerAdapter.transformRequest(this.requestData);try{t=await qn.A.post(this.url,n,{headers:this.requestHeaders,timeout:this.timeoutMs})}catch(e){throw this.transformError(e)}const i=t.data;this.logRawResponseData(i);const r=this.transformerAdapter.transformResponse(i);if(this.logResponseData(r),this.isErrorResponse(r)){const e=this.getResponseError(r);throw this.logErrorResponse(e),e}return this.sendMetric("duration",Date.now()-e),r.result}setCustomHeaders(e){this.requestHeaders=e}getResponseError(e){var t;if(!e.error)throw new Error("Trying to get error from non-error response");let n=e.error.message;var i,r;n||(n=`No error message, failed with code ${null!==(i=null==e||null===(r=e.error)||void 0===r?void 0:r.code)&&void 0!==i?i:"No code"}`);const o=null!==(t=e.error.code)&&void 0!==t?t:ei.SERVER_ERROR,s=e.error.data;return new Kn(n,o,s)}isErrorResponse(e){return"error"in e}sendMetric(e,t){this.metricsAdapter&&this.metricsAdapter.writeMetric(this.getApiMetricData(e,t))}transformError(e){return"code"in e&&function(e){return"code"in e&&"ECONNABORTED"===e.code}(e)?new Yn(e.message):e}logRequestData(){this.loggingAdapter&&this.loggingAdapter.logRequest(this.getApiLogData(),this.requestData)}logRawResponseData(e){this.loggingAdapter&&this.loggingAdapter.logResponse(this.getApiLogData(),e)}logResponseData(e){this.loggingAdapter&&this.loggingAdapter.logResponse(this.getApiLogData(),e)}logErrorResponse(e){if(this.loggingAdapter){const t=this.getApiLogData(),n=this.errorShouldBeLoggedAsInfo(e);this.loggingAdapter.logErrorResponse(t,e,n)}}getApiLogData(){return{method:this.requestData.method,url:this.url}}getApiMetricData(e,t){return{method:this.requestData.method,metricName:e,metricValue:t,url:this.url}}errorShouldBeLoggedAsInfo(e){return!1}}class ni extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ni.prototype),this.name="InvalidRpcError"}}class ii{constructor(e){(function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(this,"deviceIdentifier",void 0),this.deviceIdentifier=e}transformRequest(e){let t={...e,params:[e.params]};return this.deviceIdentifier&&(t={...t,deviceIdentifier:this.deviceIdentifier}),t}transformResponse(e){if(!this.isValidProtocol(e))throw new ni("Invalid response protocol");return this.transformRawResponseData(e)}isValidProtocol(e){const t=["jsonrpc","result"];if("object"!=typeof e||!e)return!1;for(const n of t)if(!(n in e))return!1;return!0}transformRawResponseData(e){const t={id:null,jsonrpc:"2.0"};return"object"==typeof e.result&&e.result&&"error"in e.result?(t.error=e.result.error,t):(t.result=e.result,t)}}let ri=function(e){return e[e.ACCOUNT_TRANSFERRED=410]="ACCOUNT_TRANSFERRED",e[e.RESPONSE_EMPTY=8]="RESPONSE_EMPTY",e[e.AUTHENTICATION_FAILED=9]="AUTHENTICATION_FAILED",e[e.GS_RESPONSE_EMPTY=10]="GS_RESPONSE_EMPTY",e[e.USER_MUST_CHANGE_PASSWORD=11]="USER_MUST_CHANGE_PASSWORD",e[e.INVALID_RESPONSE=12]="INVALID_RESPONSE",e[e.AUTHORIZATION_FAILED=13]="AUTHORIZATION_FAILED",e[e.CANT_DECRYPT=15]="CANT_DECRYPT",e[e.WRONG_EMAIL=16]="WRONG_EMAIL",e[e.NOT_REGISTERED=17]="NOT_REGISTERED",e[e.EMAIL_EXISTS=18]="EMAIL_EXISTS",e[e.CANT_SEND_EMAIL=19]="CANT_SEND_EMAIL",e[e.INVALID_CONSENT=20]="INVALID_CONSENT",e[e.INVALID_PASSWORD_LENGTH=21]="INVALID_PASSWORD_LENGTH",e[e.USER_NOT_FOUND=101]="USER_NOT_FOUND",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.COMMAND_NOT_FOUND=400]="COMMAND_NOT_FOUND",e[e.CRITICAL=666]="CRITICAL",e[e.DEPRECATED_METHOD=667]="DEPRECATED_METHOD",e[e.HARD_STOP=5e3]="HARD_STOP",e[e.NO_TETHER_PROGRESS=5001]="NO_TETHER_PROGRESS",e[e.INVALID_TETHER_PIN=5002]="INVALID_TETHER_PIN",e[e.TETHER_TRIES_EXCEEDED=5003]="TETHER_TRIES_EXCEEDED",e[e.USER_ALREADY_EXISTS=5004]="USER_ALREADY_EXISTS",e[e.TRIUMPH_CLOSED=5005]="TRIUMPH_CLOSED",e[e.ACCOUNT_TO_BE_DELETED=5006]="ACCOUNT_TO_BE_DELETED",e[e.EXPIRED=5008]="EXPIRED",e[e.TOO_MANY_CHARACTERS=5009]="TOO_MANY_CHARACTERS",e}({});class oi extends ti{constructor(e,t,n,i,r){super(t,i,r),this.url=e,this.setTransformerAdapter(new ii(n))}errorShouldBeLoggedAsInfo(e){return"code"in e&&e.code===ri.ACCOUNT_TRANSFERRED}}let si=function(e){return e.TOKEN_VERIFY="TokenVerify",e.REGISTRATION_WITH_CONFIRMATION="RegistrationWithConfirmation",e.REGISTRATION_WITH_EMAIL_ONLY="RegistrationWithEmailOnly",e.REGISTRATION_WITH_PASSWORD="RegistrationWithPassword",e.CHECK_EMAIL_AVAILABLE="CheckEmailAvailable",e.GET_POLICY="GetPolicy",e.GET_TOKEN_BY_CONTINUE_PLAYING_URL="GetTokenByContinuePlayingUrl",e.GET_GAME_START_DATA="GetGameStartData",e.REQUEST_EMAIL_OTP_REG="RequestEmailOtpRegister",e.EMAIL_OTP_REG="EmailOtpRegistration",e}({});var ai=n(28682);class ci extends oi{constructor(e,t){super(e,si.TOKEN_VERIFY,null,t,(0,ai.A)())}}class li extends oi{constructor(e,t,n){super(e,si.REGISTRATION_WITH_PASSWORD,t,n,(0,ai.A)())}}class ui extends oi{constructor(e,t,n){super(e,si.REGISTRATION_WITH_CONFIRMATION,t,n,(0,ai.A)())}}class di extends oi{constructor(e,t,n){super(e,si.REGISTRATION_WITH_EMAIL_ONLY,t,n,(0,ai.A)())}}class hi extends oi{constructor(e,t,n){super(e,si.CHECK_EMAIL_AVAILABLE,t,n,(0,ai.A)())}}class pi extends oi{constructor(e,t,n){super(e,si.GET_POLICY,t,n,(0,ai.A)())}}class fi extends oi{constructor(e,t,n){super(e,si.GET_TOKEN_BY_CONTINUE_PLAYING_URL,t,n,(0,ai.A)())}}class gi extends oi{constructor(e,t,n){super(e,si.GET_GAME_START_DATA,t,n,(0,ai.A)())}}class mi extends oi{constructor(e,t,n){super(e,si.REQUEST_EMAIL_OTP_REG,t,n,(0,ai.A)())}}class vi extends oi{constructor(e,t,n){super(e,si.EMAIL_OTP_REG,t,n,(0,ai.A)())}}function _i(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wi(e){return"code"in e&&e.code===ri.ACCOUNT_TRANSFERRED}class yi extends Xn{constructor(e,t){super(),_i(this,"url",void 0),_i(this,"retryUrl",void 0),this.url=e,this.retryUrl=t}verifyToken(e){const t={token:e},n=new ci(this.url,t);return this.setCmdAdapters(n),n.run().catch(e=>{if((wi(e)||function(e){return"code"in e&&e.code===ri.AUTHORIZATION_FAILED}(e))&&this.retryUrl){const e=new ci(this.retryUrl,t);return this.setCmdAdapters(e),e.run()}throw e})}registrationWithPassword(e,t,n,i,r,o,s,a){const c={confidence:s,current_entry_point:i,email:t,locale:r,marketingData:a,password:n,state:o},l=new li(this.url,e,c);return this.setCmdAdapters(l),l.run()}registrationWithConfirmation(e,t,n,i,r,o,s,a){const c={confidence:s,current_entry_point:i,email:t,email_confirm:n,locale:r,marketingData:a,state:o},l=new ui(this.url,e,c);return this.setCmdAdapters(l),l.run()}registrationEmailOnly(e,t,n,i,r,o,s){const a={confidence:o,current_entry_point:n,email:t,locale:i,marketingData:s,state:r},c=new di(this.url,e,a);return this.setCmdAdapters(c),c.run()}checkEmailAvailable(e,t){const n={email:t},i=new hi(this.url,e,n);return this.setCmdAdapters(i),i.run()}getPolicy(e,t,n,i){const r={lang:t,policyName:n,policyVersion:i},o=new pi(this.url,e,r);return this.setCmdAdapters(o),o.run()}getTokenByContinuePlayingUrl(e,t,n,i,r){const o={current_entry_point:r,email:t,expires:n,token:i},s=new fi(this.url,e,o);return this.setCmdAdapters(s),s.run().catch(t=>{if(wi(t)&&this.retryUrl){const t=new fi(this.retryUrl,e,o);return this.setCmdAdapters(t),t.run()}throw t})}getGameStartData(e,t){const n=new gi(this.url,e,t);return this.setCmdAdapters(n),n.run()}requestEmailOtpReg(e,t){const n=new mi(this.url,e,t);return this.setCmdAdapters(n),n.run()}emailOtpRegistration(e,t){const n=new vi(this.url,e,t);return this.setCmdAdapters(n),n.run()}}let bi=function(e){return e.TRIUMPH="triumph",e.TOTALBATTLE="totalbattle",e}({});function Ei(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Si extends Xn{constructor(e,t){super(),Ei(this,"triumphUrl",void 0),Ei(this,"tbUrl",void 0),this.triumphUrl=e,this.tbUrl=t}getForGame(e){let t;switch(e){case bi.TRIUMPH:t=new yi(this.triumphUrl,this.tbUrl);break;case bi.TOTALBATTLE:t=new yi(this.tbUrl);break;default:throw new Error("Unknown game")}return this.loggingAdapter&&t.setLoggingAdapter(this.loggingAdapter),this.metricsAdapter&&t.setMetricsAdapter(this.metricsAdapter),t}}let Ti=null;function Ai(){return Ti||(Ti=new Si(T.getHubClientRestapiUrl(),T.getHubClientRestapiUrl()).getForGame(_()===v.TOTALBATTLE?m.S.TOTALBATTLE:m.S.TRIUMPH)),Ti}class Ci{constructor(){}async isNewProgress(){var e;return await Ii(),1===(null===(e=window.app.getGameStartDataResponse)||void 0===e?void 0:e.registration)}logout(){location.href=`${window.app.config.game_site_url}/logout`}static getInstance(){return void 0===Ci.sessionInstance&&(Ci.sessionInstance=new Ci),Ci.sessionInstance}getDeviceId(){return window.app.deviceIdentifier}}function Ii(){return new Promise((e,t)=>{const n=setInterval(()=>{if(window.app.flags.user_ready&&window.app.flags.get_user_ready)return clearInterval(n),void e();window.app.flags.get_user_error&&(clearInterval(n),t(new yt("Get user failed")))},200)})}function Oi(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ci,"sessionInstance",void 0),n(44436),ye.getPrefixedCopy("GET_USER"),window.app.getGameStartDataResponse=null;class Ni{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oi(this,"name",void 0),Oi(this,"params",void 0),this.name=e,this.params=t}getName(){return this.name}getParams(){return this.params}}let Pi=function(e){return e.CLICK_GOOGLE_PLAY_ICON="clickgoogleplayicon",e.COMMAND_ERROR="onError",e.CONSENT_STATE="consentState",e.ENABLE_SOUND="enableSound",e.PASTE_CLIPBOARD_CONTENT="pasteClipboardContent",e.PAY_FINISH="payFinish",e.POLL_RESPONSE="pollingResponse",e.SET_FACEBOOK_ACCESS_TOKEN="setFacebookAccessToken",e.SET_GOOGLE_ACCESS_TOKEN="setGoogleAccessToken",e.SET_IS_GROUP_MEMBER="setIsGroupMember",e.SET_KEYBOARD_ENABLED="setKeyboardEnabled",e.SET_CONSENT_RESULT="setConsentResult",e.SET_START_DATA="setStartData",e.SET_START_SHORT_DATA="setStartShortData",e.SET_MAINTENANCE_DATA="setMaintenanceData",e.TEST_CALLBACK="testCallback",e.UPDATE_HAS_BOOKMARK_FLAG="updateHasBookmarkFlag",e.VIDEO_FINISHED="videoFinished",e.VIDEO_PART_FINISHED="videoPartFinished",e.PING_ME_IF_ALIVE="pingMeIfAlive",e.SET_CLIENT_NOTIFICATIONS_STATE="setClientNotificationsState",e.SET_CLIENT_NEW_NOTIFICATIONS_STATE="setClientNewNotificationsState",e.SET_CLIENT_NOTIFICATIONS_BROWSER_STATE="setClientNotificationsBrowserState",e.SET_TAB_STATE="setTabState",e.FINISH_ACCOUNT_LINKING_REWARD="finishAccountLinkingReward",e}({});class ki extends Ni{constructor(e){super(Pi.COMMAND_ERROR,e)}}let Ri=function(e){return e.ADD_US_TO_BOOKMARK="addUsToBookmark",e.ANALYTICS_EVENT="analyticsEvent",e.CALL_TEST="callTest",e.CITY_LEVEL_UP="cityLevelUp",e.CLOSE_AGREEMENT_POPUP="closeAgreementPopup",e.DONT_KILL_ME_PLS="dontKillMePls",e.EVENT_100_CLICKS="event100clicks",e.EVENT_FIRST_BUY="eventFirstBuy",e.EVENT_PAYMENT_FINISHED="eventPaymentFinished",e.EVENT_REBILL_BUY="eventRebillBuy",e.EVENT_SERVER_LOGIN="eventServerLogin",e.EVENT_SUCCESS_BUY="eventSuccessBuy",e.FB_CAPITOL_UPGRADED="fbCapitolUpgraded",e.FB_TUTORIAL_COMPLETE="fbTutorialComplete",e.GET_CONSENT_STATE="getConsentState",e.GET_FACEBOOK_ACCESS_TOKEN="getFacebookAccessToken",e.GET_GOOGLE_ACCESS_TOKEN="getGoogleAccessToken",e.GET_START_DATA="getStartData",e.GET_START_SHORT_DATA="getStartShortData",e.GET_MAINTENANCE_DATA="getMaintenanceData",e.HERO_LEVEL_UP="heroLevelUp",e.OPEN_POLICY_WINDOW="openPolicyWindow",e.PAY="pay",e.OPEN_POLLING_WINDOW="pollingRequest",e.PAYMENT_WINDOW_ICON_CLICK="paymentWindowIconClick",e.SEND_TUTOR_COMPLETED="sendTutorCompleted",e.SET_CONSENT_STATE="setConsentState",e.SET_CLIPBOARD_CONTENT="setClipboardContent",e.SET_PAYER_FLAG="setPayerFlag",e.SET_PAYER_INFO="setPayerInfo",e.SET_PRELOADER_HINT="setPreloaderHint",e.SET_PRELOADER_PROGRESS="setPreloaderProgress",e.SET_REGISTRATION_REF="setRegistrationRef",e.SET_TUTOR_FINISHED="setTutorFinished",e.SHOW_CLIENT="showClient",e.MARCHES_9="marches9",e.VALOR_MONSTER_1000="valorMonster1000",e.VALOR_MONSTER_1000_PER_MARCH="valorMonster1000perMarch",e.UNITS_TRAIN_SILVER_10000="unitsTrainSilver10000",e.MONSTER_LVL_5="monsterLvl5",e.GET_NOTIFICATIONS_STATE="getNotificationsState",e.SET_NOTIFICATIONS_STATE="setNotificationsState",e.GET_NOTIFICATIONS_BROWSER_STATE="getNotificationsBrowserState",e.SET_PRELOADER_BACKGROUND="setPreloaderBackground",e.SET_GAME_CLIENT_SIZE="setGameClientSize",e.EVENT_STORAGE_OPENED="storageOpened",e.EVENT_STORAGE_CLOSED="storageClosed",e.EVENT_BANK_OPENED="bankOpened",e.EVENT_BANK_CLOSED="bankClosed",e.SWITCH_CURRENT_CHARACTER="switchCurrentCharacter",e.START_ACCOUNT_LINKING_REWARD="startAccountLinkingReward",e.UPDATE_SIMULATED_PLAYER_STATUS="updateSimulatedPlayerStatus",e}({});class Li extends Ni{constructor(e){super(Pi.SET_START_DATA,e)}}const xi=ye.getPrefixedCopy("GAME_GENERAL");function Mi(){return{...window.app.config.client_vars.cluster,game_static_noduplicates:window.app.config.game_static_noduplicates,game_static_s3_base_url:window.app.config.cdn.game_static_s3_base_url,game_static_strings:window.app.config.game_static_strings,game_static_vectors:window.app.config.game_static_vectors,mobile_static_url:window.app.config.mobile_static_url,unity_assets_s3_base_url:window.app.config.cdn.unity_assets_s3_base_url,gdpr_url:`https://${window.app.config.domain}/delete-personal-data/auth`}}async function Di(){let e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{t||xi.info("GET_START_DATA","start"),await Ii(),window.app.flags.user_ready&&window.app.flags.get_user_ready?(e=function(){const e=window.app.user,t={browser:un(),client_id:Ci.getInstance().getDeviceId(),cluster_config:Mi(),cluster_name:window.app.config.cluster_name,country:window.app.config.country,entry_point:window.app.config.current_entry_point,first_name:e.first_name,hasBookmark:e.hasBookmark,isLinked:!Ce.getInstance().getHasGuestAuthMethod(),last_name:e.last_name,locale:window.app.config.locale,os:window.app.config.user_os.name,photo:e.photo,preloader:"",preloader_bg:"",preloader_img:"",reg_preloader_bg:"",reg_preloader_img:"",restApiUrl:window.app.restApiUrl,sig:window.app.config.sig,sig_funnel:window.app.config.sig_funnel,suid:re(),time_from_load_page:window.app.time_embed_ready-window.app.time_from_load_page,user:{result:window.app.getGameStartDataResponse},user_agent:window.app.config.user_agent,user_currency:window.app.config.user_currency,wait_for_web_auth:1,account_token:Ce.getInstance().getAuthToken(),device_id:window.app.deviceIdentifier,accountId:Ce.getInstance().getAccountId(),account:window.app.getGameStartDataResponse.account};return window.app.config.deny_tutorial&&(t.deny_tutorial=1),window.app.config.suid_simulate&&(t.suid_simulate=window.app.config.suid_simulate),window.app.config.flag_spoof&&(t.flag_spoof=1),t}(),xi.info("set_start_data",e),jl.getInstance().sendCommand(new Li(e)),xi.info("get_start_data","ready",e)):(void 0===t&&xi.info("get_start_data","not ready | retry",window.app.flags.user_ready,window.app.flags.get_user_ready),setTimeout(function(){Di(!0)},100))}catch(e){xi.error(e),window.Sentry.captureException(e),jl.getInstance().sendCommand(new ki({error:e.message,method:Ri.GET_START_DATA}))}}let ji,Ui=!1;function Bi(){try{var e,t,n,i,r;Ui=(null===(e=document)||void 0===e?void 0:e.fullscreenEnabled)||(null===(t=document)||void 0===t?void 0:t.webkitFullscreenEnabled),Ui&&(ji=(null===(n=document)||void 0===n?void 0:n.fullscreenElement)||(null===(i=document)||void 0===i?void 0:i.webkitCurrentFullScreenElement)||(null===(r=document)||void 0===r?void 0:r.webkitFullscreenElement),(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&(null===(o=document)||void 0===o||null===(s=o.exitFullscreen)||void 0===s||s.call(o),null===(a=document)||void 0===a||null===(c=a.mozCancelFullScreen)||void 0===c||c.call(a),null===(l=document)||void 0===l||null===(u=l.webkitCancelFullScreen)||void 0===u||u.call(l),null===(d=document)||void 0===d||null===(h=d.webkitExitFullscreen)||void 0===h||h.call(d)))}catch(e){alert(e),window.Sentry.captureException(e)}var o,s,a,c,l,u,d,h}var Fi=new(function(){function e(){this.instances=[]}return e.prototype.get=function(e){var t=this.instances.find(function(t){return t.type===e});return t||(t={type:e,object:new e},this.instances.push(t)),t.object},e}());function Gi(e){return Fi.get(e)}var Vi,Wi,Hi,$i,qi,zi,Ki,Yi,Ji,Xi,Qi,Zi,er,tr,nr,ir,rr=function(){function e(e,t,n){void 0===n&&(n=!1),this.target=e,this.name=t,this.async=n}return Object.defineProperty(e.prototype,"instance",{get:function(){return Gi(this.target)},enumerable:!1,configurable:!0}),e}(),or=function(e){this.groups=[],this.each=!1,this.context=void 0,this.type=e.type,this.name=e.name,this.target=e.target,this.propertyName=e.propertyName,this.constraints=null==e?void 0:e.constraints,this.constraintCls=e.constraintCls,this.validationTypeOptions=e.validationTypeOptions,e.validationOptions&&(this.message=e.validationOptions.message,this.groups=e.validationOptions.groups,this.always=e.validationOptions.always,this.each=e.validationOptions.each,this.context=e.validationOptions.context)},sr=function(){function e(){}return e.isValid=function(e){var t=this;return"isValid"!==e&&"getMessage"!==e&&-1!==Object.keys(this).map(function(e){return t[e]}).indexOf(e)},e.CUSTOM_VALIDATION="customValidation",e.NESTED_VALIDATION="nestedValidation",e.PROMISE_VALIDATION="promiseValidation",e.CONDITIONAL_VALIDATION="conditionalValidation",e.WHITELIST="whitelistValidation",e.IS_DEFINED="isDefined",e}(),ar=function(){function e(){}return e.prototype.transform=function(e){var t=[];return Object.keys(e.properties).forEach(function(n){e.properties[n].forEach(function(i){var r={message:i.message,groups:i.groups,always:i.always,each:i.each},o={type:i.type,name:i.name,target:e.name,propertyName:n,constraints:i.constraints,validationTypeOptions:i.options,validationOptions:r};t.push(new or(o))})}),t},e}(),cr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},lr=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},ur=function(){function e(){this.validationMetadatas=new Map,this.constraintMetadatas=new Map}return Object.defineProperty(e.prototype,"hasValidationMetaData",{get:function(){return!!this.validationMetadatas.size},enumerable:!1,configurable:!0}),e.prototype.addValidationSchema=function(e){var t=this;(new ar).transform(e).forEach(function(e){return t.addValidationMetadata(e)})},e.prototype.addValidationMetadata=function(e){var t=this.validationMetadatas.get(e.target);t?t.push(e):this.validationMetadatas.set(e.target,[e])},e.prototype.addConstraintMetadata=function(e){var t=this.constraintMetadatas.get(e.target);t?t.push(e):this.constraintMetadatas.set(e.target,[e])},e.prototype.groupByPropertyName=function(e){var t={};return e.forEach(function(e){t[e.propertyName]||(t[e.propertyName]=[]),t[e.propertyName].push(e)}),t},e.prototype.getTargetValidationMetadatas=function(e,t,n,i,r){var o,s,a=function(e){return void 0!==e.always?e.always:(!e.groups||!e.groups.length)&&n},c=function(e){return!(!i||r&&r.length||!e.groups||!e.groups.length)},l=(this.validationMetadatas.get(e)||[]).filter(function(n){return(n.target===e||n.target===t)&&(!!a(n)||!c(n)&&(!(r&&r.length>0)||n.groups&&!!n.groups.find(function(e){return-1!==r.indexOf(e)})))}),u=[];try{for(var d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.validationMetadatas.entries()),h=d.next();!h.done;h=d.next()){var p=cr(h.value,2),f=p[0],g=p[1];e.prototype instanceof f&&u.push.apply(u,lr([],cr(g),!1))}}catch(e){o={error:e}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}var m=u.filter(function(t){return"string"!=typeof t.target&&t.target!==e&&(!(t.target instanceof Function)||e.prototype instanceof t.target)&&(!!a(t)||!c(t)&&(!(r&&r.length>0)||t.groups&&!!t.groups.find(function(e){return-1!==r.indexOf(e)})))}).filter(function(e){return!l.find(function(t){return t.propertyName===e.propertyName&&t.type===e.type})});return l.concat(m)},e.prototype.getTargetValidatorConstraints=function(e){return this.constraintMetadatas.get(e)||[]},e}();function dr(){var e="undefined"!=typeof globalThis?globalThis:void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0;return e.classValidatorMetadataStorage||(e.classValidatorMetadataStorage=new ur),e.classValidatorMetadataStorage}function hr(e,t){return function(n){var i=t&&t.each?"each value in ":"";return e(i,n)}}function pr(e,t){return function(n,i){!function(e){var t;if(e.validator instanceof Function){if(t=e.validator,Gi(ur).getTargetValidatorConstraints(e.validator).length>1)throw"More than one implementation of ValidatorConstraintInterface found for validator on: ".concat(e.target.name,":").concat(e.propertyName)}else{var n=e.validator;t=function(){function e(){}return e.prototype.validate=function(e,t){return n.validate(e,t)},e.prototype.defaultMessage=function(e){return n.defaultMessage?n.defaultMessage(e):""},e}(),dr().addConstraintMetadata(new rr(t,e.name,e.async))}var i={type:e.name&&sr.isValid(e.name)?e.name:sr.CUSTOM_VALIDATION,name:e.name,target:e.target,propertyName:e.propertyName,validationOptions:e.options,constraintCls:t,constraints:e.constraints};dr().addValidationMetadata(new or(i))}({name:e.name,target:n.constructor,propertyName:i,options:t,constraints:e.constraints,validator:e.validator})}}function fr(e){return pr({name:"isNotEmpty",validator:{validate:function(e,t){return function(e){return""!==e&&null!=e}(e)},defaultMessage:hr(function(e){return e+"$property should not be empty"},e)}},e)}function gr(e){return pr({name:"isString",validator:{validate:function(e,t){return function(e){return e instanceof String||"string"==typeof e}(e)},defaultMessage:hr(function(e){return e+"$property must be a string"},e)}},e)}function mr(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function vr(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function _r(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let wr=(Vi=pr({name:"isInt",validator:{validate:function(e,t){return"number"==typeof(n=e)&&Number.isInteger(n);var n},defaultMessage:hr(function(e){return e+"$property must be an integer number"},yr)}},yr),Wi=fr(),Hi=fr(),$i=gr(),qi=fr(),zi=gr(),Ki=fr(),Yi=function(e,t){return void 0===e&&(e={}),pr({name:"isNumber",constraints:[e],validator:{validate:function(e,t){return function(e,t){if(void 0===t&&(t={}),"number"!=typeof e)return!1;if(e===1/0||e===-1/0)return!!t.allowInfinity;if(Number.isNaN(e))return!!t.allowNaN;if(void 0!==t.maxDecimalPlaces){var n=0;if(e%1!=0&&(n=e.toString().split(".")[1].length),n>t.maxDecimalPlaces)return!1}return Number.isFinite(e)}(e,null==t?void 0:t.constraints[0])},defaultMessage:hr(function(e){return e+"$property must be a number conforming to the specified constraints"},t)}},t)}(),Ji=function(e,t){var n={type:sr.CONDITIONAL_VALIDATION,name:"isOptional",target:e.constructor,propertyName:t,constraints:[function(e,n){return null!==e[t]&&void 0!==e[t]}],validationOptions:void 0};dr().addValidationMetadata(new or(n))},Xi=function(e){return pr({name:"isArray",validator:{validate:function(e,t){return function(e){return Array.isArray(e)}(e)},defaultMessage:hr(function(e){return e+"$property must be an array"},e)}},e)}(),Zi=vr((Qi=class{constructor(){mr(this,"id",Zi,this),mr(this,"name",er,this),mr(this,"currency",tr,this),mr(this,"price",nr,this),mr(this,"guid_receiver",ir,this),_r(this,"pic",void 0),_r(this,"description",void 0),_r(this,"entry_point",void 0),_r(this,"reward",void 0)}}).prototype,"id",[Vi,Wi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),er=vr(Qi.prototype,"name",[Hi,$i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tr=vr(Qi.prototype,"currency",[qi,zi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nr=vr(Qi.prototype,"price",[Ki,Yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ir=vr(Qi.prototype,"guid_receiver",[Ji,Xi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qi);var yr,br=function(){function e(){}return e.prototype.toString=function(e,t,n,i){var r=this;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=""),void 0===i&&(i=!1);var o=e?"[1m":"",s=e?"[22m":"",a=function(e){return" - property ".concat(o).concat(n).concat(e).concat(s," has failed the following constraints: ").concat(o).concat((i?Object.values:Object.keys)(null!==(t=r.constraints)&&void 0!==t?t:{}).join(", ")).concat(s," \n");var t};if(t){var c=Number.isInteger(+this.property)?"[".concat(this.property,"]"):"".concat(n?".":"").concat(this.property);return this.constraints?a(c):this.children?this.children.map(function(t){return t.toString(e,!0,"".concat(n).concat(c),i)}).join(""):""}return"An instance of ".concat(o).concat(this.target?this.target.constructor.name:"an object").concat(s," has failed the validation:\n")+(this.constraints?a(this.property):"")+(this.children?this.children.map(function(t){return t.toString(e,!0,r.property,i)}).join(""):"")},e}(),Er=function(){function e(){}return e.replaceMessageSpecialTokens=function(e,t){var n;return e instanceof Function?n=e(t):"string"==typeof e&&(n=e),n&&Array.isArray(t.constraints)&&t.constraints.forEach(function(e,t){n=n.replace(new RegExp("\\$constraint".concat(t+1),"g"),function(e){return Array.isArray(e)?e.join(", "):("symbol"==typeof e&&(e=e.description),"".concat(e))}(e))}),n&&void 0!==t.value&&null!==t.value&&["string","boolean","number"].includes(typeof t.value)&&(n=n.replace(/\$value/g,t.value)),n&&(n=n.replace(/\$property/g,t.property)),n&&(n=n.replace(/\$target/g,t.targetName)),n},e}();function Sr(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then}var Tr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},Ar=function(){function e(e,t){this.validator=e,this.validatorOptions=t,this.awaitingPromises=[],this.ignoreAsyncValidations=!1,this.metadataStorage=dr()}return e.prototype.execute=function(e,t,n){var i,r,o=this;this.metadataStorage.hasValidationMetaData||!0!==(null===(i=this.validatorOptions)||void 0===i?void 0:i.enableDebugMessages)||console.warn("No validation metadata found. No validation will be  performed. There are multiple possible reasons:\n  - There may be multiple class-validator versions installed. You will need to flatten your dependencies to fix the issue.\n  - This validation runs before any file with validation decorator was parsed by NodeJS.");var s=this.validatorOptions?this.validatorOptions.groups:void 0,a=this.validatorOptions&&this.validatorOptions.strictGroups||!1,c=this.validatorOptions&&this.validatorOptions.always||!1,l=void 0===(null===(r=this.validatorOptions)||void 0===r?void 0:r.forbidUnknownValues)||!1!==this.validatorOptions.forbidUnknownValues,u=this.metadataStorage.getTargetValidationMetadatas(e.constructor,t,c,a,s),d=this.metadataStorage.groupByPropertyName(u);if(l&&!u.length){var h=new br;return this.validatorOptions&&this.validatorOptions.validationError&&void 0!==this.validatorOptions.validationError.target&&!0!==this.validatorOptions.validationError.target||(h.target=e),h.value=void 0,h.property=void 0,h.children=[],h.constraints={unknownValue:"an unknown value was passed to the validate function"},void n.push(h)}this.validatorOptions&&this.validatorOptions.whitelist&&this.whitelist(e,d,n),Object.keys(d).forEach(function(t){var i=e[t],r=d[t].filter(function(e){return e.type===sr.IS_DEFINED}),s=d[t].filter(function(e){return e.type!==sr.IS_DEFINED&&e.type!==sr.WHITELIST});i instanceof Promise&&s.find(function(e){return e.type===sr.PROMISE_VALIDATION})?o.awaitingPromises.push(i.then(function(i){o.performValidations(e,i,t,r,s,n)})):o.performValidations(e,i,t,r,s,n)})},e.prototype.whitelist=function(e,t,n){var i=this,r=[];Object.keys(e).forEach(function(e){t[e]&&0!==t[e].length||r.push(e)}),r.length>0&&(this.validatorOptions&&this.validatorOptions.forbidNonWhitelisted?r.forEach(function(t){var r,o=i.generateValidationError(e,e[t],t);o.constraints=((r={})[sr.WHITELIST]="property ".concat(t," should not exist"),r),o.children=void 0,n.push(o)}):r.forEach(function(t){return delete e[t]}))},e.prototype.stripEmptyErrors=function(e){var t=this;return e.filter(function(e){if(e.children&&(e.children=t.stripEmptyErrors(e.children)),0===Object.keys(e.constraints).length){if(0===e.children.length)return!1;delete e.constraints}return!0})},e.prototype.performValidations=function(e,t,n,i,r,o){var s=r.filter(function(e){return e.type===sr.CUSTOM_VALIDATION}),a=r.filter(function(e){return e.type===sr.NESTED_VALIDATION}),c=r.filter(function(e){return e.type===sr.CONDITIONAL_VALIDATION}),l=this.generateValidationError(e,t,n);o.push(l),this.conditionalValidations(e,t,c)&&(this.customValidations(e,t,i,l),this.mapContexts(e,t,i,l),void 0===t&&this.validatorOptions&&!0===this.validatorOptions.skipUndefinedProperties||null===t&&this.validatorOptions&&!0===this.validatorOptions.skipNullProperties||null==t&&this.validatorOptions&&!0===this.validatorOptions.skipMissingProperties||(this.customValidations(e,t,s,l),this.nestedValidations(t,a,l),this.mapContexts(e,t,r,l),this.mapContexts(e,t,s,l)))},e.prototype.generateValidationError=function(e,t,n){var i=new br;return this.validatorOptions&&this.validatorOptions.validationError&&void 0!==this.validatorOptions.validationError.target&&!0!==this.validatorOptions.validationError.target||(i.target=e),this.validatorOptions&&this.validatorOptions.validationError&&void 0!==this.validatorOptions.validationError.value&&!0!==this.validatorOptions.validationError.value||(i.value=t),i.property=n,i.children=[],i.constraints={},i},e.prototype.conditionalValidations=function(e,t,n){return n.map(function(n){return n.constraints[0](e,t)}).reduce(function(e,t){return e&&t},!0)},e.prototype.customValidations=function(e,t,n,i){var r=this;n.forEach(function(n){r.metadataStorage.getTargetValidatorConstraints(n.constraintCls).forEach(function(o){if(!(o.async&&r.ignoreAsyncValidations||r.validatorOptions&&r.validatorOptions.stopAtFirstError&&Object.keys(i.constraints||{}).length>0)){var s={targetName:e.constructor?e.constructor.name:void 0,property:n.propertyName,object:e,value:t,constraints:n.constraints};if(n.each&&(Array.isArray(t)||t instanceof Set||t instanceof Map)){var a,c=((a=t)instanceof Map?Array.from(a.values()):Array.isArray(a)?a:Array.from(a)).map(function(e){return o.instance.validate(e,s)});if(c.some(function(e){return Sr(e)})){var l=c.map(function(e){return Sr(e)?e:Promise.resolve(e)}),u=Promise.all(l).then(function(s){if(!s.every(function(e){return e})){var a=Tr(r.createValidationError(e,t,n,o),2),c=a[0],l=a[1];i.constraints[c]=l,n.context&&(i.contexts||(i.contexts={}),i.contexts[c]=Object.assign(i.contexts[c]||{},n.context))}});r.awaitingPromises.push(u)}else if(!c.every(function(e){return e})){var d=Tr(r.createValidationError(e,t,n,o),2);g=d[0],m=d[1],i.constraints[g]=m}}else{var h=o.instance.validate(t,s);if(Sr(h)){var p=h.then(function(s){if(!s){var a=Tr(r.createValidationError(e,t,n,o),2),c=a[0],l=a[1];i.constraints[c]=l,n.context&&(i.contexts||(i.contexts={}),i.contexts[c]=Object.assign(i.contexts[c]||{},n.context))}});r.awaitingPromises.push(p)}else if(!h){var f=Tr(r.createValidationError(e,t,n,o),2),g=f[0],m=f[1];i.constraints[g]=m}}}})})},e.prototype.nestedValidations=function(e,t,n){var i=this;void 0!==e&&t.forEach(function(r){if(!(r.type!==sr.NESTED_VALIDATION&&r.type!==sr.PROMISE_VALIDATION||i.validatorOptions&&i.validatorOptions.stopAtFirstError&&Object.keys(n.constraints||{}).length>0))if(Array.isArray(e)||e instanceof Set||e instanceof Map)(e instanceof Set?Array.from(e):e).forEach(function(r,o){i.performValidations(e,r,o.toString(),[],t,n.children)});else if(e instanceof Object){var o="string"==typeof r.target?r.target:r.target.name;i.execute(e,o,n.children)}else{var s=Tr(i.createValidationError(r.target,e,r),2),a=s[0],c=s[1];n.constraints[a]=c}})},e.prototype.mapContexts=function(e,t,n,i){var r=this;return n.forEach(function(e){if(e.context){var t=void 0;e.type===sr.CUSTOM_VALIDATION&&(t=r.metadataStorage.getTargetValidatorConstraints(e.constraintCls)[0]);var n=r.getConstraintType(e,t);i.constraints[n]&&(i.contexts||(i.contexts={}),i.contexts[n]=Object.assign(i.contexts[n]||{},e.context))}})},e.prototype.createValidationError=function(e,t,n,i){var r=e.constructor?e.constructor.name:void 0,o=this.getConstraintType(n,i),s={targetName:r,property:n.propertyName,object:e,value:t,constraints:n.constraints},a=n.message||"";return n.message||this.validatorOptions&&(!this.validatorOptions||this.validatorOptions.dismissDefaultMessages)||i&&i.instance.defaultMessage instanceof Function&&(a=i.instance.defaultMessage(s)),[o,Er.replaceMessageSpecialTokens(a,s)]},e.prototype.getConstraintType=function(e,t){return t&&t.name?t.name:e.type},e}(),Cr=function(){function e(){}return e.prototype.validate=function(e,t,n){return this.coreValidate(e,t,n)},e.prototype.validateOrReject=function(e,t,n){return function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var i;return function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(r){switch(r.label){case 0:return[4,this.coreValidate(e,t,n)];case 1:return(i=r.sent()).length?[2,Promise.reject(i)]:[2]}})})},e.prototype.validateSync=function(e,t,n){var i="string"==typeof e?t:e,r="string"==typeof e?e:void 0,o=new Ar(this,"string"==typeof e?n:t);o.ignoreAsyncValidations=!0;var s=[];return o.execute(i,r,s),o.stripEmptyErrors(s)},e.prototype.coreValidate=function(e,t,n){var i="string"==typeof e?t:e,r="string"==typeof e?e:void 0,o=new Ar(this,"string"==typeof e?n:t),s=[];return o.execute(i,r,s),Promise.all(o.awaitingPromises).then(function(){return o.stripEmptyErrors(s)})},e}();const Ir=ye.getPrefixedCopy("CLIENT_TO_JS_OLD");window.app.setPayerFlag=function(){window.app.user.hasPayment=!0};var Or=n(44436);let Nr=function(e){return e.PRE_START="LOADING_PROGRESS.PRE_START",e.COMPILING_PROGRESS="LOADING_PROGRESS.COMPILING_PROGRESS",e.CLIENT_PROGRESS="LOADING_PROGRESS.CLIENT_PROGRESS",e.COMPATIBILITY_CHECK_FAILED="LOADING_PROGRESS.COMPATIBILITY_CHECK_FAILED",e}({});class Pr{static addLoadingProgressHandler(e){Or(document).on(Nr.PRE_START,(t,n)=>{e.onPreStart(n.initialPercents)}),Or(document).on(Nr.COMPILING_PROGRESS,(t,n)=>{e.onCompileProgressChange(n.compileProgressShare)}),Or(document).on(Nr.CLIENT_PROGRESS,(t,n)=>{e.onClientLoadingProgressChanged(n.clientLoadingPercent),100===n.clientLoadingPercent&&(jl.getInstance().setLoadingState(Dl.LOADED),sn.fireEvent(an.CLIENT_FULLY_LOADED),Ci.getInstance().isNewProgress().then(e=>{e||jn.showWebGuestNotificationWindow()}))}),Or(document).on(Nr.COMPATIBILITY_CHECK_FAILED,()=>{e.onCompatibilityCheckFailed()})}static firePreStartEvent(e){Or(document).trigger(Nr.PRE_START,{initialPercents:e})}static fireCompilingProgressEvent(e){Or(document).trigger(Nr.COMPILING_PROGRESS,{compileProgressShare:e})}static fireClientLoadingProgressEvent(e){Or(document).trigger(Nr.CLIENT_PROGRESS,{clientLoadingPercent:e})}static fireCompatibilityCheckFailedEvent(){Or(document).trigger(Nr.COMPATIBILITY_CHECK_FAILED)}}var kr=n(44436);const Rr=ye.getPrefixedCopy("DEATH TIMER");class Lr{static init(){kr(document).on("visibilitychange",()=>{!0===document.hidden?(Rr.warning("tab inactive, stop timer"),this.stopTimer()):(Rr.warning("tab active again, start timer"),this.restartTimer())}),kr(window).on("blur",()=>{Rr.warning("tab inactive, stop timer"),this.stopTimer()}),kr(window).on("focus",()=>{Rr.warning("tab active again, start timer"),this.restartTimer()}),this.restartTimer()}static stopTimer(){this.timer&&clearTimeout(this.timer)}static restartTimer(){Rr.warning("Restarting death timer"),this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{Ke.reload()},6e4)}}!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Lr,"timer",void 0);class xr extends Ni{constructor(){super(Pi.PING_ME_IF_ALIVE)}}var Mr=n(44436);let Dr,jr,Ur,Br,Fr;function Gr(){const e=window.innerWidth,t=window.innerHeight;0!==e&&0!==t?(function(){var e;let t=window.innerHeight;const n=Dr.length&&Dr.outerHeight()||0;"absolute"!==Ur.css("position")&&(t-=n);const i=jr.outerHeight();void 0===i||"absolute"===jr.css("position")||Vr()||(t-=i+1);const r=Mr("#if_dev").outerHeight();r&&(t-=r),t-=parseInt(null!==(e=Ur.css("border-bottom-width"))&&void 0!==e?e:"0"),Ur.css({height:t})}(),function(){var e,t,n,i,r,o,s,a,c;const l=window.innerWidth,u=window.innerHeight;let d;const h=Dr.length&&Dr.outerHeight()||0;if(Vr())d=u-h;else{const e=jr.length?"absolute"===jr.css("position")?1:jr.outerHeight():0;if(void 0===e)throw new Error("footerHeight is undefined");d=u-h-e}const p=Mr("#if_dev").outerHeight();p&&(d-=p),d-=parseInt(null!==(e=Ur.css("border-bottom-width"))&&void 0!==e?e:"0");const f=null!==(t=Fr)&&void 0!==t&&t.length&&null!==(n=null===(i=Fr)||void 0===i||null===(r=i.get(0))||void 0===r?void 0:r.videoHeight)&&void 0!==n?n:1080,g=null!==(o=Fr)&&void 0!==o&&o.length?null!==(s=null===(a=Fr)||void 0===a||null===(c=a.get(0))||void 0===c?void 0:c.videoWidth)&&void 0!==s?s:1080:1920;if(0==f||0==g)return;(function(e){let t;return t=e.originalHeight*(e.targetWidth/e.originalWidth),t>=e.targetHeight})({originalWidth:g,originalHeight:f,targetWidth:l,targetHeight:d})?(Br.css({width:"100%",height:"auto"}),Fr.css({width:"100%",height:"auto"})):(Br.css({width:"auto",height:"100%"}),Fr.css({width:"auto",height:"100%"}))}(),function(){const e=Mr("#index_wrapper"),t=e.find(".index_preloader"),n=t.height(),i=t.width(),r=e.height(),o=e.width();if(void 0===n||void 0===i||void 0===r||void 0===o)return;const s=o/i,a=r/n,c=Math.max(s,a);t.width(i*c).height(n*c)}()):setTimeout(Gr,100)}function Vr(){return!window.app.isSite1&&"en"===window.app.config.language&&!window.app.isLanding}function Wr(){const e=Mr("#carousel"),t=Mr(".slide",e).height();void 0!==t&&e.height(t)}function Hr(){Dr=Mr("#header"),jr=Mr("#footer"),Ur=Mr("#index_wrapper"),Br=Mr("#index_preloader"),Fr=Mr(".index_video"),window.app.isLanding?(Wr(),Mr(window).on("resize",Wr),Mr(window).on("focus",Wr)):(Gr(),Mr(window).on("resize",function(){setTimeout(Gr,200)}))}class $r{static async download(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){const r=new XMLHttpRequest,o=e;r.open("GET",o,!0),r.responseType="blob",r.onload=function(){if(200!==this.status)throw new Error(`Loaded video with non-200 response: ${this.status}`);try{const e=this.response,t=URL.createObjectURL(e);n(t)}catch(e){i(),window.Sentry.captureException(e)}},r.onerror=function(){i(new Error("Loading failed"))},r.onprogress=function(e){null==t||t.onProgress(Math.ceil(e.loaded/e.total*100))},r.send()})}}var qr=n(44436);function zr(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Kr{static async showVideoPreloader(e){if(this.onClose=e,Kr.isVideoLoadingSupported()){const e=wt.getInstance();e.showPreloader(),e.show(),await Kr.loadPreloaderVideo(function(t){e.setLoadingProgress(t),t>=100&&(e.hide(),Hr())}),Kr.isStarted=!0;const t=qr(".game-loading-video"),n=Kr.getVideoElement();t.show(),t.on("click",()=>{n.play()}),this.setupControls(),qr(n).on("ended",()=>{Kr.finishVideo()})}}static getIsVideoInProgress(){return Kr.isStarted&&!(Kr.isFinished||Kr.isSkipped)}static forceClose(){this.closePreloader()}static isVideoLoadingSupported(){return!0}static async loadPreloaderVideo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>{};const t=Kr.getVideoElement();t.src=await $r.download(t.currentSrc,{onProgress:e}),t.play(),Kr.videoStartedAtTs=Date.now()}static hideVideoPreloader(){qr(".game-loading-video").hide()}static getVideoElement(){return Kr.videoElement||(Kr.videoElement=qr(".game-loading-video video")[0]),Kr.videoElement}static muteVideo(){Kr.getVideoElement().muted=!0}static toggleVideoMute(){const e=Kr.getVideoElement();e.muted=!e.muted;const t=qr(".game-loading-video__unmute");t.toggleClass("game-loading-video__muted");const n=e.muted?C._n("preloader_video.unmute"):C._n("preloader_video.mute");qr("span",t).text(n)}static skipVideo(){Kr.getVideoElement().pause(),Kr.isSkipped=!0,Kr.sendWatchStatistics(),this.closePreloader()}static finishVideo(){Kr.isFinished=!0,Kr.sendWatchStatistics(),this.closePreloader()}static closePreloader(){Kr.hideVideoPreloader(),Kr.muteVideo(),this.onClose&&this.onClose()}static setupControls(){const e=qr(".game-loading-video__unmute");e.on("click",()=>{this.toggleVideoMute()}),e.one("click",()=>{Tt.sendEvent(cn.client_preloader_video_unmuted)}),qr(".game-loading-video__skip").on("click",e=>{e.stopPropagation(),Kr.skipVideo()})}static sendWatchStatistics(){const e=Date.now()-Kr.videoStartedAtTs,t=Kr.isFinished?1:0;Tt.sendEvent(cn.client_preloader_video_closed,0,[e,t])}}zr(Kr,"videoElement",void 0),zr(Kr,"videoStartedAtTs",void 0),zr(Kr,"isFinished",!1),zr(Kr,"isSkipped",!1),zr(Kr,"isStarted",!1),zr(Kr,"onClose",void 0),n(25530);var Yr=n(44436);let Jr=!1;var Xr=function(e){return e.SINGLELINE="singleline",e.MULTILINE="multiline",e.NUMBER="number",e.CHECKBOX="checkbox",e.DROPDOWN="dropdown",e.DATA="date",e}(Xr||{});let Qr=function(e){return e.SHOW="show",e.HIDE="hide",e}({});function Zr(){window.app.game_popup_close(),window.app.game_popup(r.SUPPORT_TICKET)}function eo(){window.app.game_popup_close()}function to(){const e=Yr("#support_ticket");window.app.game_popup_close(),Yr(".support_ticket_error",e).hide()}function no(){const e=Yr("#support_ticket").find(".options");"false"===e.attr("data-expanded")?e.slideDown(function(){e.attr("data-expanded","true")}):e.slideUp(function(){e.attr("data-expanded","false")})}function io(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Yr("#support_ticket"),n=t.find("form .textarea, form .input:not(:first-child), form > button"),i=t.find(".deleted_personal_data");!0===e?(n.hide(),i.show()):(n.show(),i.hide())}function ro(e){const t=Yr("#support_ticket");e.stopPropagation();const n=Yr(this).data("value");io("personal_data"===n),t.find("select option").text(n),t.find(".chosen").text(Yr(this).text()),t.find(".options").slideUp(function(){t.find(".options").attr("data-expanded","false")})}function oo(e){const t=Yr("#support_ticket");if(e.preventDefault(),Jr)return;const n=t.find(".support_ticket_error"),i=function(){if(M(Yr("#support_ticket_subject").val()))return C._n("support.emptySubject");if(M(Yr("#support_ticket_body").val()))return C._n("support.emptyBody");if(M(Yr("#support_ticket_type").val()))return C._n("support.emptyType");const e=Yr("#support_ticket_email").val();return M(e)?C._n("support.emptyEmail"):!!D(e)||C._n("support.wrongEmail")}();if("string"==typeof i)return void n.text(i).show();let o;Jr=!0;try{o=function(){var e,t,n,i,r,o,s;const a=Yr("#support_ticket"),c=window.app.user,l=Yr("#support_ticket_subject").val();if(void 0===l)throw new Error("Support ticket subject is undefined");const u=Yr("#support_ticket_body").val();if(void 0===u)throw new Error("Support ticket body is undefined");const d=Yr("#support_ticket_email").val();if(void 0===d)throw new Error("Support ticket email is undefined");const h={subject:l,body:u,type:Yr("#support_ticket_type",a).text(),email:d,browser:window.app.config.user_browser,ua:window.app.config.user_agent,hasPayment:c.hasPayment,nickname:c.gameNickname,donateAmount:c.donate,paymentCohort:c.paymentCohort,language:window.app.config.language,uid:"",network:null!==(e=null===(t=window)||void 0===t||null===(n=t.app)||void 0===n||null===(i=n.config)||void 0===i?void 0:i.current_entry_point)&&void 0!==e?e:"N/A",realm:window.app.config.user_realm,suid:Ce.getInstance().getSuid()};return null!==(r=window)&&void 0!==r&&null!==(o=r.app)&&void 0!==o&&null!==(s=o.config)&&void 0!==s&&s.user_auth_token&&(h.token=window.app.config.user_auth_token),h}()}catch(n){return n.text(C._n("support.common")).show(),void(Jr=!1)}var s;(s=o,ue.makeRequest(de.SEND_SUPPORT_MESSAGE,s,window.app.deviceIdentifier).then(e=>1===e||"Bad response").catch(e=>e.message)).then(e=>{!0===e?(n.hide(),t.find("input").val(""),t.find("textarea").val(""),window.app.game_popup_close(),window.app.game_popup(r.SUPPORT_SUCCESS)):n.text(C._n("support.common")).show(),Jr=!1}).finally(()=>{Jr=!1})}function so(){const e=Yr("#support_ticket").find(".options");"true"===e.attr("data-expanded")&&e.slideUp(function(){e.attr("data-expanded","false")})}function ao(){window.location.href=T.getGdprUrl()}function co(e){e.preventDefault(),window.helpshiftWidgetConfig.userId||lo(),(0,window.HelpshiftWidget)("open")}function lo(){if(y.get(b.FEATURE_FLAG_LOADER).get(X.WEB_CHAT_SUPPORT).isOn()){const e=window.HelpshiftWidget,t=Ce.getInstance().getSuid().toString();window.helpshiftWidgetConfig.userId=t,window.helpshiftWidgetConfig.userEmail=window.app.user.email,window.helpshiftWidgetConfig.cifs={account_id:{type:Xr.SINGLELINE,value:Ce.getInstance().getAccountId().toString()},suid:{type:Xr.SINGLELINE,value:Ce.getInstance().getSuid().toString()},donate_amount:{type:Xr.NUMBER,value:window.app.user.donate},payment_cohort:{type:Xr.NUMBER,value:window.app.user.paymentCohort},language:{type:Xr.SINGLELINE,value:window.app.config.language},realm:{type:Xr.NUMBER,value:window.app.config.user_realm},account_email:{type:Xr.SINGLELINE,value:Ce.getInstance().getEmail()},suid_by_email:{type:Xr.SINGLELINE,value:Ce.getInstance().getSuid().toString()}},e("updateHelpshiftWidgetConfig")}}function uo(e){if(y.get(b.FEATURE_FLAG_LOADER).get(X.WEB_CHAT_SUPPORT).isOn())switch(e){case Qr.SHOW:y.get(b.FEATURE_FLAG_LOADER).get(X.WEB_CHAT_SUPPORT).isOn()&&Yr("#minimized_chat").css("display","block");break;case Qr.HIDE:y.get(b.FEATURE_FLAG_LOADER).get(X.WEB_CHAT_SUPPORT).isOn()&&Yr("#minimized_chat").css("display","none")}}var ho=n(25984),po=n(44436);class fo{static async getStateData(){const e=Ce.getInstance(),t=await ue.makeRequest(de.GET_MAINTENANCE_DATA,{cluster:window.app.config.cluster_name,suid:String(e.getSuid()),token:e.getAuthToken()},window.app.deviceIdentifier);if("error"in t)throw new ce(t.error.message);return t}}class go extends Ni{constructor(e){super(Pi.SET_MAINTENANCE_DATA,e)}}const mo=ye.getPrefixedCopy("CMD_GET_MAINTENANCE_DATA");class vo extends Ni{constructor(e){super(Pi.CONSENT_STATE,{consent:e.consent})}}class _o extends Ni{constructor(e){super(Pi.SET_FACEBOOK_ACCESS_TOKEN,e)}}var wo=n(44436);class yo{static calculateResponsiveCenterSlot(){let e=0,t=0;const n=wo(".navigation_button_container.left");e=n.is(":visible")?n.width()-5:0,t=wo("#header").width()-wo(".navigation_button_container.dright.right").width()-e+4,wo(".header__center-responsive-slot").css("left",e).css("width",t)}static showLogoutButton(){wo('#header .navigation_button[data-link="logout"]').show()}}var bo=n(19747),Eo=n(44436);class So{static enable(){const e=Eo(".web-loader");e.css("visibility","visible"),e.css("z-index","1")}static disable(){const e=Eo(".web-loader");e.css("visibility","hidden"),e.css("z-index","0")}}n(5624);var To=n(21135);class Ao extends Error{constructor(){super(...arguments),this.name="ApiRequestError"}}class Co{static async post(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={...arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}};t=T.getNoLangUrl(`api/${e}`),Object.values(n).length&&(t=`${t}?${To.stringify(n)}`);const r=y.get(b.CONFIG);return void 0!==re&&void 0!==r.sig&&(i={...i,suid:re(),sig:r.sig}),ae.A.post(t,To.stringify(i,{arrayFormat:"index"})).catch(e=>{var t;throw 403===(null==e||null===(t=e.response)||void 0===t?void 0:t.status)&&location.reload(),new Ao(e.message,e)})}}var Io=n(44436);let Oo;const No="open";Io(function(){Oo=Io("#language_select"),Oo.on("click",function(){const e=Oo.find(".language_list");e.hasClass(No)?e.removeClass(No):e.addClass(No)}),Oo.on("mouseleave",function(){Oo.find(".language_list").removeClass(No)}),Io(".language_list a").on("click",function(){Co.post("setLanguage",{},{lang:Io(this).find("li").data("lang")})}),window.app.config.current_entry_point!==g.FB&&window.app.config.current_entry_point!==g.FB2||Io(".language_list a").on("click",function(){const e=Io(this).attr("href"),t=Io("#changeFacebookLanguage");return t.attr("action",e),t.submit(),!1})});var Po=n(44436);let ko;const Ro={Strictly_Necessary:{},Statistics:{companies:["Yandex","Google","Facebook","Mail","VK"]}};function Lo(){Uo(!0)}function xo(){!function(){let e=document.createElement("div");e.setAttribute("class","cookie-warning__options");const t=document.createElement("div");t.setAttribute("class","close__button"),t.addEventListener("click",()=>{e.remove()}),e.appendChild(t),e=function(e){const t={};e.appendChild(function(e){e.title=document.createElement("div"),e.title.setAttribute("class","cookie__group title");const t=document.createElement("p");t.textContent=C._n("cookies.groups.names.title"),t.setAttribute("class","name"),e.title.appendChild(t);const n=document.createElement("div");n.setAttribute("class","line"),e.title.appendChild(n);const i=document.createElement("p");return i.innerHTML=C.addLinkToText(C._n("cookie.warning_text"),`//${window.app.config.domain}/#privacy_policy`,'class="js-click popup_link1" data-id="privacy_policy" data-hideclass="document_popup" data-handler="popup"'),i.setAttribute("class","text__content"),e.title.appendChild(i),e.title}(t));for(const n in Ro){const i=n.toLowerCase().replace(" ","_"),r=Ro[n];let o=t[i];if(o=document.createElement("div"),o.setAttribute("class",`cookie__group ${i}`),i.includes("necessary")){const e=document.createElement("p");e.textContent=C._n(`cookies.groups.names.${i}`),e.setAttribute("class","name");const t=document.createElement("span");t.textContent=C._n("cookies.groups.buttons.active"),e.appendChild(t),o.appendChild(e)}if(r.companies){const e=C._n(`cookies.groups.names.${i}`),t=Do(i,e,e=>{const t=document.querySelectorAll(`.cookie__group.${i} .cookie__checkbox`),n=e.target.checked;t.forEach(e=>{e.id!==i&&(e.checked=n)})});o.appendChild(t)}const s=document.createElement("p");s.textContent=C._n(`cookies.groups.text.${i}`),s.setAttribute("class","text__content"),o.appendChild(s),r.companies&&(o=jo(o,r)),e.appendChild(o)}const n=document.createElement("btn");return n.setAttribute("class","btn__accept button"),n.textContent=C._n("cookies.groups.buttons.accept").toUpperCase(),n.addEventListener("click",()=>{Uo(),e.remove()}),e.appendChild(n),e}(e),document.querySelector("body").appendChild(e)}()}function Mo(){if(ko=Po("#cookie-warning-js"),!ko.length)return;const e=ko.find(".cookie-warning__buttons .btn__accept"),t=ko.find(".cookie-warning__buttons .button__config");e.on("click",Lo),t.on("click",xo);const n=ko.find(".cookie-warning__text"),i=C._n("cookie.warning_text");n.html(C.addLinkToText(i,`//${window.app.config.domain}/#privacy_policy`,'class="js-click popup_link1" data-id="privacy_policy" data-hideclass="document_popup" data-handler="popup"')),void 0!==Po.cookie("cookieConfig")?ko.remove():ko.show()}function Do(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;const i=document.createElement("div");i.setAttribute("class","switch__box");const r=document.createElement("input");r.setAttribute("type","checkbox"),r.setAttribute("class","cookie__checkbox"),r.setAttribute("id",`${e}`),r.setAttribute("name",`${e}`),r.setAttribute("checked","checked"),n&&r.addEventListener("click",n);const o=document.createElement("label");o.setAttribute("for",`${e}`);const s=document.createElement("span"),a=document.createElement("i");if(s.appendChild(a),t){const e=document.createElement("p");e.textContent=t,o.appendChild(e)}return o.appendChild(s),i.appendChild(r),i.appendChild(o),i}function jo(e,t){const n=document.createElement("div");n.setAttribute("class","companies");for(const e in t.companies){const i=t.companies[e],r=document.createElement("div");r.setAttribute("class","company_name"),r.setAttribute("id",i),r.style.display="block";const o=Do(`${i.toLowerCase()}`,i);r.appendChild(o),n.appendChild(r)}const i=document.createElement("div");i.setAttribute("class","show__box");const r=document.createElement("p");return r.setAttribute("class","show__box-text"),r.textContent=C._n("cookies.groups.names.show_text"),r.addEventListener("click",()=>{r.remove(),i.setAttribute("class","show__box show")}),i.appendChild(r),i.appendChild(n),e.appendChild(i),e}function Uo(){let e={};if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])for(const t in Ro){const n=Ro[t],i=t.toLowerCase().replace(" ","_");e[i]={},i.includes("necessary")||(e[i]={},e[i].isOn=!0),e[i].companies={};for(const t in n.companies)e[i].companies[n.companies[t].toLowerCase()]=!0}else e=function(){const e=document.querySelectorAll(".cookie__group > .switch__box .cookie__checkbox"),t={};!function(){const e=document.cookie.split("; ");for(const t in e){const n=window.location.hostname.split(".");for(;n.length>0;){const i=`${encodeURIComponent(e[t].split(";")[0].split("=")[0])}=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=`,r=location.pathname.split("/");for(document.cookie=`${i}/`;r.length>0;)document.cookie=i+r.join("/"),r.pop();n.shift()}}}(),e.forEach(e=>{t[e.id]={},t[e.id].isOn=e.checked});for(const e in t){const n=document.querySelectorAll(`.cookie__group.${e}  .companies .cookie__checkbox`);t[e].companies={},n.forEach(n=>{t[e].companies[n.id.toLowerCase()]=n.checked,t[e].isOn||(t[e].companies[n.id.toLowerCase()]=!1)})}return t}();Po.cookie("cookieConfig",JSON.stringify(e),{expires:365,path:"/",secure:!0}),ko.remove()}let Bo=function(e){return e.AMIGO="amigo",e.CHROME="chrome",e.EDGE="edge",e.FIREFOX="firefox",e.GAMEROOM="gameroom",e.IE="ie",e.OPERA="opera",e.SAFARI="safari",e.YANDEX="yandex",e}({});var Fo=n(44436);let Go=null;Fo(function(){Fo("#js-download_button").on("click",function(){window.app.game_popup_close(),window.app.game_popup(r.DOWNLOAD_CLIENT_POPUP)}),Fo("#download_client_popup .js-close-button").on("click",function(){window.app.game_popup_close()}),Go=Fo("#download_client_screen"),Fo(".js-close-button",Go).on("click",function(){Fo("#download_client_screen_buttons").show(),Fo("#download_client_step").hide()}),Fo(".download_icon_button.download",Go).on("click",function(){Fo("#download_client_screen_buttons").hide(),Fo("#download_client_step").show()}),Fo(".download_icon_button.download, .download_desktop, .download_desktop_yb").click(function(){window.app.game_popup_close(),function(){try{window.app.config.user_browser.name.toLowerCase()==Bo.CHROME?Fo(".arrow_promt_download").show():Fo(".arrow_promt_download").addClass("top_arrow_promt_download").show(),setTimeout(()=>{Fo(".arrow_promt_download").hide()},8e3)}catch(e){console.log(`Uh, it's error: ${e}`)}}()})});class Vo extends Ni{constructor(e){super(Pi.PAY_FINISH,e)}}var Wo=function(e,t){return Wo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Wo(e,t)};function Ho(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Wo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $o=function(){return $o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},$o.apply(this,arguments)};function qo(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var zo,Ko="ADD_CHOICE",Yo="REMOVE_CHOICE",Jo="FILTER_CHOICES",Xo="ACTIVATE_CHOICES",Qo="CLEAR_CHOICES",Zo="ADD_GROUP",es="ADD_ITEM",ts="REMOVE_ITEM",ns="HIGHLIGHT_ITEM",is="search",rs="removeItem",os="highlightItem",ss=["fuseOptions","classNames"],as="select-one",cs="select-multiple",ls=function(e){return{type:Ko,choice:e}},us=function(e){return{type:es,item:e}},ds=function(e){return{type:ts,item:e}},hs=function(e,t){return{type:ns,item:e,highlighted:t}},ps=function(e){return Array.from({length:e},function(){return Math.floor(36*Math.random()+0).toString(36)}).join("")},fs=function(e){if("string"!=typeof e){if(null==e)return"";if("object"==typeof e){if("raw"in e)return fs(e.raw);if("trusted"in e)return e.trusted}return e}return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")},gs=(zo=document.createElement("div"),function(e){zo.innerHTML=e.trim();for(var t=zo.children[0];zo.firstChild;)zo.removeChild(zo.firstChild);return t}),ms=function(e,t){return"function"==typeof e?e(fs(t),t):e},vs=function(e){return"function"==typeof e?e():e},_s=function(e){if("string"==typeof e)return e;if("object"==typeof e){if("trusted"in e)return e.trusted;if("raw"in e)return e.raw}return""},ws=function(e){if("string"==typeof e)return e;if("object"==typeof e){if("escaped"in e)return e.escaped;if("trusted"in e)return e.trusted}return""},ys=function(e,t){return e?ws(t):fs(t)},bs=function(e,t,n){e.innerHTML=ys(t,n)},Es=function(e,t){return e.rank-t.rank},Ss=function(e){return Array.isArray(e)?e:[e]},Ts=function(e){return e&&Array.isArray(e)?e.map(function(e){return".".concat(e)}).join(""):".".concat(e)},As=function(e,t){var n;(n=e.classList).add.apply(n,Ss(t))},Cs=function(e,t){var n;(n=e.classList).remove.apply(n,Ss(t))},Is=function(e){if(void 0!==e)try{return JSON.parse(e)}catch(t){return e}return{}},Os=function(){function e(e){var t=e.element,n=e.type,i=e.classNames;this.element=t,this.classNames=i,this.type=n,this.isActive=!1}return e.prototype.show=function(){return As(this.element,this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this},e.prototype.hide=function(){return Cs(this.element,this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this},e}(),Ns=function(){function e(e){var t=e.element,n=e.type,i=e.classNames,r=e.position;this.element=t,this.classNames=i,this.type=n,this.position=r,this.isOpen=!1,this.isFlipped=!1,this.isDisabled=!1,this.isLoading=!1}return e.prototype.shouldFlip=function(e,t){var n=!1;return"auto"===this.position?n=this.element.getBoundingClientRect().top-t>=0&&!window.matchMedia("(min-height: ".concat(e+1,"px)")).matches:"top"===this.position&&(n=!0),n},e.prototype.setActiveDescendant=function(e){this.element.setAttribute("aria-activedescendant",e)},e.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},e.prototype.open=function(e,t){As(this.element,this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(e,t)&&(As(this.element,this.classNames.flippedState),this.isFlipped=!0)},e.prototype.close=function(){Cs(this.element,this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(Cs(this.element,this.classNames.flippedState),this.isFlipped=!1)},e.prototype.addFocusState=function(){As(this.element,this.classNames.focusState)},e.prototype.removeFocusState=function(){Cs(this.element,this.classNames.focusState)},e.prototype.enable=function(){Cs(this.element,this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),this.type===as&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1},e.prototype.disable=function(){As(this.element,this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),this.type===as&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0},e.prototype.wrap=function(e){var t=this.element,n=e.parentNode;n&&(e.nextSibling?n.insertBefore(t,e.nextSibling):n.appendChild(t)),t.appendChild(e)},e.prototype.unwrap=function(e){var t=this.element,n=t.parentNode;n&&(n.insertBefore(e,t),n.removeChild(t))},e.prototype.addLoadingState=function(){As(this.element,this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0},e.prototype.removeLoadingState=function(){Cs(this.element,this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1},e}(),Ps=function(){function e(e){var t=e.element,n=e.type,i=e.classNames,r=e.preventPaste;this.element=t,this.type=n,this.classNames=i,this.preventPaste=r,this.isFocussed=this.element.isEqualNode(document.activeElement),this.isDisabled=t.disabled,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return Object.defineProperty(e.prototype,"placeholder",{set:function(e){this.element.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.element.value},set:function(e){this.element.value=e},enumerable:!1,configurable:!0}),e.prototype.addEventListeners=function(){var e=this.element;e.addEventListener("paste",this._onPaste),e.addEventListener("input",this._onInput,{passive:!0}),e.addEventListener("focus",this._onFocus,{passive:!0}),e.addEventListener("blur",this._onBlur,{passive:!0})},e.prototype.removeEventListeners=function(){var e=this.element;e.removeEventListener("input",this._onInput),e.removeEventListener("paste",this._onPaste),e.removeEventListener("focus",this._onFocus),e.removeEventListener("blur",this._onBlur)},e.prototype.enable=function(){this.element.removeAttribute("disabled"),this.isDisabled=!1},e.prototype.disable=function(){this.element.setAttribute("disabled",""),this.isDisabled=!0},e.prototype.focus=function(){this.isFocussed||this.element.focus()},e.prototype.blur=function(){this.isFocussed&&this.element.blur()},e.prototype.clear=function(e){return void 0===e&&(e=!0),this.element.value="",e&&this.setWidth(),this},e.prototype.setWidth=function(){var e=this.element;e.style.minWidth="".concat(e.placeholder.length+1,"ch"),e.style.width="".concat(e.value.length+1,"ch")},e.prototype.setActiveDescendant=function(e){this.element.setAttribute("aria-activedescendant",e)},e.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},e.prototype._onInput=function(){this.type!==as&&this.setWidth()},e.prototype._onPaste=function(e){this.preventPaste&&e.preventDefault()},e.prototype._onFocus=function(){this.isFocussed=!0},e.prototype._onBlur=function(){this.isFocussed=!1},e}(),ks=function(){function e(e){var t=e.element;this.element=t,this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight}return e.prototype.prepend=function(e){var t=this.element.firstElementChild;t?this.element.insertBefore(e,t):this.element.append(e)},e.prototype.scrollToTop=function(){this.element.scrollTop=0},e.prototype.scrollToChildElement=function(e,t){var n=this;if(e){var i=this.element.offsetHeight,r=this.element.scrollTop+i,o=e.offsetHeight,s=e.offsetTop+o,a=t>0?this.element.scrollTop+s-r:e.offsetTop;requestAnimationFrame(function(){n._animateScroll(a,t)})}},e.prototype._scrollDown=function(e,t,n){var i=(n-e)/t,r=i>1?i:1;this.element.scrollTop=e+r},e.prototype._scrollUp=function(e,t,n){var i=(e-n)/t,r=i>1?i:1;this.element.scrollTop=e-r},e.prototype._animateScroll=function(e,t){var n=this,i=this.element.scrollTop,r=!1;t>0?(this._scrollDown(i,4,e),i<e&&(r=!0)):(this._scrollUp(i,4,e),i>e&&(r=!0)),r&&requestAnimationFrame(function(){n._animateScroll(e,t)})},e}(),Rs=function(){function e(e){var t=e.element,n=e.classNames;this.element=t,this.classNames=n,this.isDisabled=!1}return Object.defineProperty(e.prototype,"isActive",{get:function(){return"active"===this.element.dataset.choice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this.element.dir},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.element.value},set:function(e){this.element.setAttribute("value",e),this.element.value=e},enumerable:!1,configurable:!0}),e.prototype.conceal=function(){var e=this.element;As(e,this.classNames.input),e.hidden=!0,e.tabIndex=-1;var t=e.getAttribute("style");t&&e.setAttribute("data-choice-orig-style",t),e.setAttribute("data-choice","active")},e.prototype.reveal=function(){var e=this.element;Cs(e,this.classNames.input),e.hidden=!1,e.removeAttribute("tabindex");var t=e.getAttribute("data-choice-orig-style");t?(e.removeAttribute("data-choice-orig-style"),e.setAttribute("style",t)):e.removeAttribute("style"),e.removeAttribute("data-choice")},e.prototype.enable=function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1},e.prototype.disable=function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0},e.prototype.triggerEvent=function(e,t){!function(e,t,n){void 0===n&&(n=null);var i=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0});e.dispatchEvent(i)}(this.element,e,t||{})},e}(),Ls=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ho(t,e),t}(Rs),xs=function(e,t){return void 0===t&&(t=!0),void 0===e?t:!!e},Ms=function(e){if("string"==typeof e&&(e=e.split(" ").filter(function(e){return e.length})),Array.isArray(e)&&e.length)return e},Ds=function(e,t,n){if(void 0===n&&(n=!0),"string"==typeof e){var i=fs(e);return Ds({value:e,label:n||i===e?e:{escaped:i,raw:e},selected:!0},!1)}var r=e;if("choices"in r){if(!t)throw new TypeError("optGroup is not allowed");var o=r,s=o.choices.map(function(e){return Ds(e,!1)});return{id:0,label:_s(o.label)||o.value,active:!!s.length,disabled:!!o.disabled,choices:s}}var a=r;return{id:0,group:null,score:0,rank:0,value:a.value,label:a.label||a.value,active:xs(a.active),selected:xs(a.selected,!1),disabled:xs(a.disabled,!1),placeholder:xs(a.placeholder,!1),highlighted:!1,labelClass:Ms(a.labelClass),labelDescription:a.labelDescription,customProperties:a.customProperties}},js=function(e){return"SELECT"===e.tagName},Us=function(e){function t(t){var n=t.element,i=t.classNames,r=t.template,o=t.extractPlaceholder,s=e.call(this,{element:n,classNames:i})||this;return s.template=r,s.extractPlaceholder=o,s}return Ho(t,e),Object.defineProperty(t.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:!1,configurable:!0}),t.prototype.addOptions=function(e){var t=this,n=document.createDocumentFragment();e.forEach(function(e){var i=e;if(!i.element){var r=t.template(i);n.appendChild(r),i.element=r}}),this.element.appendChild(n)},t.prototype.optionsAsChoices=function(){var e=this,t=[];return this.element.querySelectorAll(":scope > option, :scope > optgroup").forEach(function(n){!function(e){return"OPTION"===e.tagName}(n)?function(e){return"OPTGROUP"===e.tagName}(n)&&t.push(e._optgroupToChoice(n)):t.push(e._optionToChoice(n))}),t},t.prototype._optionToChoice=function(e){return!e.hasAttribute("value")&&e.hasAttribute("placeholder")&&(e.setAttribute("value",""),e.value=""),{id:0,group:null,score:0,rank:0,value:e.value,label:e.label,element:e,active:!0,selected:this.extractPlaceholder?e.selected:e.hasAttribute("selected"),disabled:e.disabled,highlighted:!1,placeholder:this.extractPlaceholder&&(!e.value||e.hasAttribute("placeholder")),labelClass:void 0!==e.dataset.labelClass?Ms(e.dataset.labelClass):void 0,labelDescription:void 0!==e.dataset.labelDescription?e.dataset.labelDescription:void 0,customProperties:Is(e.dataset.customProperties)}},t.prototype._optgroupToChoice=function(e){var t=this,n=e.querySelectorAll("option"),i=Array.from(n).map(function(e){return t._optionToChoice(e)});return{id:0,label:e.label||"",element:e,active:!!i.length,disabled:e.disabled,choices:i}},t}(Rs),Bs={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,closeDropdownOnSelect:"auto",singleModeForMultiSelect:!1,addChoices:!1,addItems:!0,addItemFilter:function(e){return!!e&&""!==e},removeItems:!0,removeItemButton:!1,removeItemButtonAlignLeft:!1,editItems:!1,allowHTML:!1,allowHtmlUserInput:!1,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:function(e,t){var n=e.value,i=e.label,r=void 0===i?n:i,o=t.value,s=t.label,a=void 0===s?o:s;return _s(r).localeCompare(_s(a),[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})},shadowRoot:null,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(e){return'Press Enter to add <b>"'.concat(e,'"</b>')},removeItemIconText:function(){return"Remove item"},removeItemLabelText:function(e){return"Remove item: ".concat(e)},maxItemText:function(e){return"Only ".concat(e," values can be added")},valueComparer:function(e,t){return e===t},fuseOptions:{includeScore:!0},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:{containerOuter:["choices"],containerInner:["choices__inner"],input:["choices__input"],inputCloned:["choices__input--cloned"],list:["choices__list"],listItems:["choices__list--multiple"],listSingle:["choices__list--single"],listDropdown:["choices__list--dropdown"],item:["choices__item"],itemSelectable:["choices__item--selectable"],itemDisabled:["choices__item--disabled"],itemChoice:["choices__item--choice"],description:["choices__description"],placeholder:["choices__placeholder"],group:["choices__group"],groupHeading:["choices__heading"],button:["choices__button"],activeState:["is-active"],focusState:["is-focused"],openState:["is-open"],disabledState:["is-disabled"],highlightedState:["is-highlighted"],selectedState:["is-selected"],flippedState:["is-flipped"],loadingState:["is-loading"],notice:["choices__notice"],addChoice:["choices__item--selectable","add-choice"],noResults:["has-no-results"],noChoices:["has-no-choices"]},appendGroupInSearch:!1},Fs=function(e){var t=e.itemEl;t&&(t.remove(),e.itemEl=void 0)},Gs={groups:function(e,t){var n=e,i=!0;switch(t.type){case Zo:n.push(t.group);break;case Qo:n=[];break;default:i=!1}return{state:n,update:i}},items:function(e,t,n){var i=e,r=!0;switch(t.type){case es:t.item.selected=!0,(o=t.item.element)&&(o.selected=!0,o.setAttribute("selected","")),i.push(t.item);break;case ts:var o;if(t.item.selected=!1,o=t.item.element){o.selected=!1,o.removeAttribute("selected");var s=o.parentElement;s&&js(s)&&s.type===as&&(s.value="")}Fs(t.item),i=i.filter(function(e){return e.id!==t.item.id});break;case Yo:Fs(t.choice),i=i.filter(function(e){return e.id!==t.choice.id});break;case ns:var a=t.highlighted,c=i.find(function(e){return e.id===t.item.id});c&&c.highlighted!==a&&(c.highlighted=a,n&&function(e,t,n){var i=e.itemEl;i&&(Cs(i,n),As(i,t))}(c,a?n.classNames.highlightedState:n.classNames.selectedState,a?n.classNames.selectedState:n.classNames.highlightedState));break;default:r=!1}return{state:i,update:r}},choices:function(e,t,n){var i=e,r=!0;switch(t.type){case Ko:i.push(t.choice);break;case Yo:t.choice.choiceEl=void 0,t.choice.group&&(t.choice.group.choices=t.choice.group.choices.filter(function(e){return e.id!==t.choice.id})),i=i.filter(function(e){return e.id!==t.choice.id});break;case es:case ts:t.item.choiceEl=void 0;break;case Jo:var o=[];t.results.forEach(function(e){o[e.item.id]=e}),i.forEach(function(e){var t=o[e.id];void 0!==t?(e.score=t.score,e.rank=t.rank,e.active=!0):(e.score=0,e.rank=0,e.active=!1),n&&n.appendGroupInSearch&&(e.choiceEl=void 0)});break;case Xo:i.forEach(function(e){e.active=t.active,n&&n.appendGroupInSearch&&(e.choiceEl=void 0)});break;case Qo:i=[];break;default:r=!1}return{state:i,update:r}}},Vs=function(){function e(e){this._state=this.defaultState,this._listeners=[],this._txn=0,this._context=e}return Object.defineProperty(e.prototype,"defaultState",{get:function(){return{groups:[],items:[],choices:[]}},enumerable:!1,configurable:!0}),e.prototype.changeSet=function(e){return{groups:e,items:e,choices:e}},e.prototype.reset=function(){this._state=this.defaultState;var e=this.changeSet(!0);this._txn?this._changeSet=e:this._listeners.forEach(function(t){return t(e)})},e.prototype.subscribe=function(e){return this._listeners.push(e),this},e.prototype.dispatch=function(e){var t=this,n=this._state,i=!1,r=this._changeSet||this.changeSet(!1);Object.keys(Gs).forEach(function(o){var s=Gs[o](n[o],e,t._context);s.update&&(i=!0,r[o]=!0,n[o]=s.state)}),i&&(this._txn?this._changeSet=r:this._listeners.forEach(function(e){return e(r)}))},e.prototype.withTxn=function(e){this._txn++;try{e()}finally{if(this._txn=Math.max(0,this._txn-1),!this._txn){var t=this._changeSet;t&&(this._changeSet=void 0,this._listeners.forEach(function(e){return e(t)}))}}},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.state.items},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highlightedActiveItems",{get:function(){return this.items.filter(function(e){return e.active&&e.highlighted})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"choices",{get:function(){return this.state.choices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeChoices",{get:function(){return this.choices.filter(function(e){return e.active})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchableChoices",{get:function(){return this.choices.filter(function(e){return!e.disabled&&!e.placeholder})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.state.groups},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeGroups",{get:function(){var e=this;return this.state.groups.filter(function(t){var n=t.active&&!t.disabled,i=e.state.choices.some(function(e){return e.active&&!e.disabled});return n&&i},[])},enumerable:!1,configurable:!0}),e.prototype.inTxn=function(){return this._txn>0},e.prototype.getChoiceById=function(e){return this.activeChoices.find(function(t){return t.id===e})},e.prototype.getGroupById=function(e){return this.groups.find(function(t){return t.id===e})},e}(),Ws="no-choices",Hs="no-results",$s="add-choice";function qs(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(n),!0).forEach(function(t){qs(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ys(e){return Array.isArray?Array.isArray(e):"[object Array]"===ta(e)}function Js(e){return"string"==typeof e}function Xs(e){return"number"==typeof e}function Qs(e){return"object"==typeof e}function Zs(e){return null!=e}function ea(e){return!e.trim().length}function ta(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const na=Object.prototype.hasOwnProperty;class ia{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let n=ra(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ra(e){let t=null,n=null,i=null,r=1,o=null;if(Js(e)||Ys(e))i=e,t=oa(e),n=sa(e);else{if(!na.call(e,"name"))throw new Error("Missing name property in key");const s=e.name;if(i=s,na.call(e,"weight")&&(r=e.weight,r<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(s));t=oa(s),n=sa(s),o=e.getFn}return{path:t,id:n,weight:r,src:i,getFn:o}}function oa(e){return Ys(e)?e:e.split(".")}function sa(e){return Ys(e)?e.join("."):e}const aa={useExtendedSearch:!1,getFn:function(e,t){let n=[],i=!1;const r=(e,t,o)=>{if(Zs(e))if(t[o]){const s=e[t[o]];if(!Zs(s))return;if(o===t.length-1&&(Js(s)||Xs(s)||function(e){return!0===e||!1===e||function(e){return Qs(e)&&null!==e}(e)&&"[object Boolean]"==ta(e)}(s)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(s));else if(Ys(s)){i=!0;for(let e=0,n=s.length;e<n;e+=1)r(s[e],t,o+1)}else t.length&&r(s,t,o+1)}else n.push(e)};return r(e,Js(t)?t.split("."):t,0),i?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ca=Ks(Ks(Ks(Ks({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),aa);const la=/[^ ]+/g;class ua{constructor({getFn:e=ca.getFn,fieldNormWeight:t=ca.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,i=Math.pow(10,t);return{get(t){const r=t.match(la).length;if(n.has(r))return n.get(r);const o=1/Math.pow(r,.5*e),s=parseFloat(Math.round(o*i)/i);return n.set(r,s),s},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Js(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();Js(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Zs(e)||ea(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((t,i)=>{let r=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Zs(r))if(Ys(r)){let e=[];const t=[{nestedArrIndex:-1,value:r}];for(;t.length;){const{nestedArrIndex:n,value:i}=t.pop();if(Zs(i))if(Js(i)&&!ea(i)){let t={v:i,i:n,n:this.norm.get(i)};e.push(t)}else Ys(i)&&i.forEach((e,n)=>{t.push({nestedArrIndex:n,value:e})})}n.$[i]=e}else if(Js(r)&&!ea(r)){let e={v:r,n:this.norm.get(r)};n.$[i]=e}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function da(e,t,{getFn:n=ca.getFn,fieldNormWeight:i=ca.fieldNormWeight}={}){const r=new ua({getFn:n,fieldNormWeight:i});return r.setKeys(e.map(ra)),r.setSources(t),r.create(),r}function ha(e,{errors:t=0,currentLocation:n=0,expectedLocation:i=0,distance:r=ca.distance,ignoreLocation:o=ca.ignoreLocation}={}){const s=t/e.length;if(o)return s;const a=Math.abs(i-n);return r?s+a/r:a?1:s}const pa=32;function fa(e){let t={};for(let n=0,i=e.length;n<i;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<i-n-1}return t}class ga{constructor(e,{location:t=ca.location,threshold:n=ca.threshold,distance:i=ca.distance,includeMatches:r=ca.includeMatches,findAllMatches:o=ca.findAllMatches,minMatchCharLength:s=ca.minMatchCharLength,isCaseSensitive:a=ca.isCaseSensitive,ignoreLocation:c=ca.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:c},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(e,t)=>{this.chunks.push({pattern:e,alphabet:fa(e),startIndex:t})},u=this.pattern.length;if(u>pa){let e=0;const t=u%pa,n=u-t;for(;e<n;)l(this.pattern.substr(e,pa),e),e+=pa;if(t){const e=u-pa;l(this.pattern.substr(e),e)}}else l(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:i,distance:r,threshold:o,findAllMatches:s,minMatchCharLength:a,ignoreLocation:c}=this.options;let l=[],u=0,d=!1;this.chunks.forEach(({pattern:t,alphabet:h,startIndex:p})=>{const{isMatch:f,score:g,indices:m}=function(e,t,n,{location:i=ca.location,distance:r=ca.distance,threshold:o=ca.threshold,findAllMatches:s=ca.findAllMatches,minMatchCharLength:a=ca.minMatchCharLength,includeMatches:c=ca.includeMatches,ignoreLocation:l=ca.ignoreLocation}={}){if(t.length>pa)throw new Error("Pattern length exceeds max of 32.");const u=t.length,d=e.length,h=Math.max(0,Math.min(i,d));let p=o,f=h;const g=a>1||c,m=g?Array(d):[];let v;for(;(v=e.indexOf(t,f))>-1;){let e=ha(t,{currentLocation:v,expectedLocation:h,distance:r,ignoreLocation:l});if(p=Math.min(e,p),f=v+u,g){let e=0;for(;e<u;)m[v+e]=1,e+=1}}f=-1;let _=[],w=1,y=u+d;const b=1<<u-1;for(let i=0;i<u;i+=1){let o=0,a=y;for(;o<a;)ha(t,{errors:i,currentLocation:h+a,expectedLocation:h,distance:r,ignoreLocation:l})<=p?o=a:y=a,a=Math.floor((y-o)/2+o);y=a;let c=Math.max(1,h-a+1),v=s?d:Math.min(h+a,d)+u,E=Array(v+2);E[v+1]=(1<<i)-1;for(let o=v;o>=c;o-=1){let s=o-1,a=n[e.charAt(s)];if(g&&(m[s]=+!!a),E[o]=(E[o+1]<<1|1)&a,i&&(E[o]|=(_[o+1]|_[o])<<1|1|_[o+1]),E[o]&b&&(w=ha(t,{errors:i,currentLocation:s,expectedLocation:h,distance:r,ignoreLocation:l}),w<=p)){if(p=w,f=s,f<=h)break;c=Math.max(1,2*h-f)}}if(ha(t,{errors:i+1,currentLocation:h,expectedLocation:h,distance:r,ignoreLocation:l})>p)break;_=E}const E={isMatch:f>=0,score:Math.max(.001,w)};if(g){const e=function(e=[],t=ca.minMatchCharLength){let n=[],i=-1,r=-1,o=0;for(let s=e.length;o<s;o+=1){let s=e[o];s&&-1===i?i=o:s||-1===i||(r=o-1,r-i+1>=t&&n.push([i,r]),i=-1)}return e[o-1]&&o-i>=t&&n.push([i,o-1]),n}(m,a);e.length?c&&(E.indices=e):E.isMatch=!1}return E}(e,t,h,{location:i+p,distance:r,threshold:o,findAllMatches:s,minMatchCharLength:a,includeMatches:n,ignoreLocation:c});f&&(d=!0),u+=g,f&&m&&(l=[...l,...m])});let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=l),h}}class ma{constructor(e){this.pattern=e}static isMultiMatch(e){return va(e,this.multiRegex)}static isSingleMatch(e){return va(e,this.singleRegex)}search(){}}function va(e,t){const n=e.match(t);return n?n[1]:null}class _a extends ma{constructor(e,{location:t=ca.location,threshold:n=ca.threshold,distance:i=ca.distance,includeMatches:r=ca.includeMatches,findAllMatches:o=ca.findAllMatches,minMatchCharLength:s=ca.minMatchCharLength,isCaseSensitive:a=ca.isCaseSensitive,ignoreLocation:c=ca.ignoreLocation}={}){super(e),this._bitapSearch=new ga(e,{location:t,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class wa extends ma{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const i=[],r=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+r,i.push([t,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const ya=[class extends ma{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},wa,class extends ma{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends ma{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends ma{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends ma{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends ma{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},_a],ba=ya.length,Ea=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Sa=new Set([_a.type,wa.type]);const Ta=[];function Aa(e,t){for(let n=0,i=Ta.length;n<i;n+=1){let i=Ta[n];if(i.condition(e,t))return new i(e,t)}return new ga(e,t)}const Ca="$and",Ia="$path",Oa=e=>!(!e[Ca]&&!e.$or),Na=e=>({[Ca]:Object.keys(e).map(t=>({[t]:e[t]}))});function Pa(e,t,{auto:n=!0}={}){const i=e=>{let r=Object.keys(e);const o=(e=>!!e[Ia])(e);if(!o&&r.length>1&&!Oa(e))return i(Na(e));if((e=>!Ys(e)&&Qs(e)&&!Oa(e))(e)){const i=o?e[Ia]:r[0],s=o?e.$val:e[i];if(!Js(s))throw new Error((e=>`Invalid value for key ${e}`)(i));const a={keyId:sa(i),pattern:s};return n&&(a.searcher=Aa(s,t)),a}let s={children:[],operator:r[0]};return r.forEach(t=>{const n=e[t];Ys(n)&&n.forEach(e=>{s.children.push(i(e))})}),s};return Oa(e)||(e=Na(e)),i(e)}function ka(e,t){const n=e.matches;t.matches=[],Zs(n)&&n.forEach(e=>{if(!Zs(e.indices)||!e.indices.length)return;const{indices:n,value:i}=e;let r={indices:n,value:i};e.key&&(r.key=e.key.src),e.idx>-1&&(r.refIndex=e.idx),t.matches.push(r)})}function Ra(e,t){t.score=e.score}class La{constructor(e,t={},n){this.options=Ks(Ks({},ca),t),this.options.useExtendedSearch,this._keyStore=new ia(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof ua))throw new Error("Incorrect 'index' type");this._myIndex=t||da(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Zs(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,i-=1,t.push(r))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:r,sortFn:o,ignoreFieldNorm:s}=this.options;let a=Js(e)?Js(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=ca.ignoreFieldNorm}){e.forEach(e=>{let n=1;e.matches.forEach(({key:e,norm:i,score:r})=>{const o=e?e.weight:null;n*=Math.pow(0===r&&o?Number.EPSILON:r,(o||1)*(t?1:i))}),e.score=n})}(a,{ignoreFieldNorm:s}),r&&a.sort(o),Xs(t)&&t>-1&&(a=a.slice(0,t)),function(e,t,{includeMatches:n=ca.includeMatches,includeScore:i=ca.includeScore}={}){const r=[];return n&&r.push(ka),i&&r.push(Ra),e.map(e=>{const{idx:n}=e,i={item:t[n],refIndex:n};return r.length&&r.forEach(t=>{t(e,i)}),i})}(a,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const t=Aa(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:e,i:n,n:r})=>{if(!Zs(e))return;const{isMatch:o,score:s,indices:a}=t.searchIn(e);o&&i.push({item:e,idx:n,matches:[{score:s,value:e,norm:r,indices:a}]})}),i}_searchLogical(e){const t=Pa(e,this.options),n=(e,t,i)=>{if(!e.children){const{keyId:n,searcher:r}=e,o=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:r});return o&&o.length?[{idx:i,item:t,matches:o}]:[]}const r=[];for(let o=0,s=e.children.length;o<s;o+=1){const s=e.children[o],a=n(s,t,i);if(a.length)r.push(...a);else if(e.operator===Ca)return[]}return r},i=this._myIndex.records,r={},o=[];return i.forEach(({$:e,i})=>{if(Zs(e)){let s=n(t,e,i);s.length&&(r[i]||(r[i]={idx:i,item:e,matches:[]},o.push(r[i])),s.forEach(({matches:e})=>{r[i].matches.push(...e)}))}}),o}_searchObjectList(e){const t=Aa(e,this.options),{keys:n,records:i}=this._myIndex,r=[];return i.forEach(({$:e,i})=>{if(!Zs(e))return;let o=[];n.forEach((n,i)=>{o.push(...this._findMatches({key:n,value:e[i],searcher:t}))}),o.length&&r.push({idx:i,item:e,matches:o})}),r}_findMatches({key:e,value:t,searcher:n}){if(!Zs(t))return[];let i=[];if(Ys(t))t.forEach(({v:t,i:r,n:o})=>{if(!Zs(t))return;const{isMatch:s,score:a,indices:c}=n.searchIn(t);s&&i.push({score:a,key:e,value:t,idx:r,norm:o,indices:c})});else{const{v:r,n:o}=t,{isMatch:s,score:a,indices:c}=n.searchIn(r);s&&i.push({score:a,key:e,value:r,norm:o,indices:c})}return i}}La.version="7.0.0",La.createIndex=da,La.parseIndex=function(e,{getFn:t=ca.getFn,fieldNormWeight:n=ca.fieldNormWeight}={}){const{keys:i,records:r}=e,o=new ua({getFn:t,fieldNormWeight:n});return o.setKeys(i),o.setIndexRecords(r),o},La.config=ca,La.parseQuery=Pa,function(...e){Ta.push(...e)}(class{constructor(e,{isCaseSensitive:t=ca.isCaseSensitive,includeMatches:n=ca.includeMatches,minMatchCharLength:i=ca.minMatchCharLength,ignoreLocation:r=ca.ignoreLocation,findAllMatches:o=ca.findAllMatches,location:s=ca.location,threshold:a=ca.threshold,distance:c=ca.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:r,location:s,threshold:a,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map(e=>{let n=e.trim().split(Ea).filter(e=>e&&!!e.trim()),i=[];for(let e=0,r=n.length;e<r;e+=1){const r=n[e];let o=!1,s=-1;for(;!o&&++s<ba;){const e=ya[s];let n=e.isMultiMatch(r);n&&(i.push(new e(n,t)),o=!0)}if(!o)for(s=-1;++s<ba;){const e=ya[s];let n=e.isSingleMatch(r);if(n){i.push(new e(n,t));break}}}return i})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let r=0,o=[],s=0;for(let i=0,a=t.length;i<a;i+=1){const a=t[i];o.length=0,r=0;for(let t=0,i=a.length;t<i;t+=1){const i=a[t],{isMatch:c,indices:l,score:u}=i.search(e);if(!c){s=0,r=0,o.length=0;break}if(r+=1,s+=u,n){const e=i.constructor.type;Sa.has(e)?o=[...o,...l]:o.push(l)}}if(r){let e={isMatch:!0,score:s/r};return n&&(e.indices=o),e}}return{isMatch:!1,score:1}}});var xa=function(){function e(e){this._haystack=[],this._fuseOptions=$o($o({},e.fuseOptions),{keys:qo([],e.searchFields,!0),includeMatches:!0})}return e.prototype.index=function(e){this._haystack=e,this._fuse&&this._fuse.setCollection(e)},e.prototype.reset=function(){this._haystack=[],this._fuse=void 0},e.prototype.isEmptyIndex=function(){return!this._haystack.length},e.prototype.search=function(e){return this._fuse||(this._fuse=new La(this._haystack,this._fuseOptions)),this._fuse.search(e).map(function(e,t){return{item:e.item,score:e.score||0,rank:t+1}})},e}(),Ma=function(e,t,n){var i=e.dataset,r=t.customProperties,o=t.labelClass,s=t.labelDescription;o&&(i.labelClass=Ss(o).join(" ")),s&&(i.labelDescription=s),n&&r&&("string"==typeof r?i.customProperties=r:"object"!=typeof r||function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(r)||(i.customProperties=JSON.stringify(r)))},Da=function(e,t,n){var i=t&&e.querySelector("label[for='".concat(t,"']")),r=i&&i.innerText;r&&n.setAttribute("aria-label",r)},ja={containerOuter:function(e,t,n,i,r,o,s){var a=e.classNames.containerOuter,c=document.createElement("div");return As(c,a),c.dataset.type=o,t&&(c.dir=t),i&&(c.tabIndex=0),n&&(c.setAttribute("role",r?"combobox":"listbox"),r?c.setAttribute("aria-autocomplete","list"):s||Da(this._docRoot,this.passedElement.element.id,c),c.setAttribute("aria-haspopup","true"),c.setAttribute("aria-expanded","false")),s&&c.setAttribute("aria-labelledby",s),c},containerInner:function(e){var t=e.classNames.containerInner,n=document.createElement("div");return As(n,t),n},itemList:function(e,t){var n=e.searchEnabled,i=e.classNames,r=i.list,o=i.listSingle,s=i.listItems,a=document.createElement("div");return As(a,r),As(a,t?o:s),this._isSelectElement&&n&&a.setAttribute("role","listbox"),a},placeholder:function(e,t){var n=e.allowHTML,i=e.classNames.placeholder,r=document.createElement("div");return As(r,i),bs(r,n,t),r},item:function(e,t,n){var i=e.allowHTML,r=e.removeItemButtonAlignLeft,o=e.removeItemIconText,s=e.removeItemLabelText,a=e.classNames,c=a.item,l=a.button,u=a.highlightedState,d=a.itemSelectable,h=a.placeholder,p=_s(t.value),f=document.createElement("div");if(As(f,c),t.labelClass){var g=document.createElement("span");bs(g,i,t.label),As(g,t.labelClass),f.appendChild(g)}else bs(f,i,t.label);if(f.dataset.item="",f.dataset.id=t.id,f.dataset.value=p,Ma(f,t,!0),(t.disabled||this.containerOuter.isDisabled)&&f.setAttribute("aria-disabled","true"),this._isSelectElement&&(f.setAttribute("aria-selected","true"),f.setAttribute("role","option")),t.placeholder&&(As(f,h),f.dataset.placeholder=""),As(f,t.highlighted?u:d),n){t.disabled&&Cs(f,d),f.dataset.deletable="";var m=document.createElement("button");m.type="button",As(m,l),bs(m,!0,ms(o,t.value));var v=ms(s,t.value);v&&m.setAttribute("aria-label",v),m.dataset.button="",r?f.insertAdjacentElement("afterbegin",m):f.appendChild(m)}return f},choiceList:function(e,t){var n=e.classNames.list,i=document.createElement("div");return As(i,n),t||i.setAttribute("aria-multiselectable","true"),i.setAttribute("role","listbox"),i},choiceGroup:function(e,t){var n=e.allowHTML,i=e.classNames,r=i.group,o=i.groupHeading,s=i.itemDisabled,a=t.id,c=t.label,l=t.disabled,u=_s(c),d=document.createElement("div");As(d,r),l&&As(d,s),d.setAttribute("role","group"),d.dataset.group="",d.dataset.id=a,d.dataset.value=u,l&&d.setAttribute("aria-disabled","true");var h=document.createElement("div");return As(h,o),bs(h,n,c||""),d.appendChild(h),d},choice:function(e,t,n,i){var r=e.allowHTML,o=e.classNames,s=o.item,a=o.itemChoice,c=o.itemSelectable,l=o.selectedState,u=o.itemDisabled,d=o.description,h=o.placeholder,p=t.label,f=_s(t.value),g=document.createElement("div");g.id=t.elementId,As(g,s),As(g,a),i&&"string"==typeof p&&(p=ys(r,p),p={trusted:p+=" (".concat(i,")")});var m=g;if(t.labelClass){var v=document.createElement("span");bs(v,r,p),As(v,t.labelClass),m=v,g.appendChild(v)}else bs(g,r,p);if(t.labelDescription){var _="".concat(t.elementId,"-description");m.setAttribute("aria-describedby",_);var w=document.createElement("span");bs(w,r,t.labelDescription),w.id=_,As(w,d),g.appendChild(w)}return t.selected&&As(g,l),t.placeholder&&As(g,h),g.setAttribute("role",t.group?"treeitem":"option"),g.dataset.choice="",g.dataset.id=t.id,g.dataset.value=f,n&&(g.dataset.selectText=n),t.group&&(g.dataset.groupId="".concat(t.group.id)),Ma(g,t,!1),t.disabled?(As(g,u),g.dataset.choiceDisabled="",g.setAttribute("aria-disabled","true")):(As(g,c),g.dataset.choiceSelectable=""),g},input:function(e,t){var n=e.classNames,i=n.input,r=n.inputCloned,o=e.labelId,s=document.createElement("input");return s.type="search",As(s,i),As(s,r),s.autocomplete="off",s.autocapitalize="off",s.spellcheck=!1,s.setAttribute("aria-autocomplete","list"),t?s.setAttribute("aria-label",t):o||Da(this._docRoot,this.passedElement.element.id,s),s},dropdown:function(e){var t=e.classNames,n=t.list,i=t.listDropdown,r=document.createElement("div");return As(r,n),As(r,i),r.setAttribute("aria-expanded","false"),r},notice:function(e,t,n){var i=e.classNames,r=i.item,o=i.itemChoice,s=i.addChoice,a=i.noResults,c=i.noChoices,l=i.notice;void 0===n&&(n="");var u=document.createElement("div");switch(bs(u,!0,t),As(u,r),As(u,o),As(u,l),n){case $s:As(u,s);break;case Hs:As(u,a);break;case Ws:As(u,c)}return n===$s&&(u.dataset.choiceSelectable="",u.dataset.choice=""),u},option:function(e){var t=_s(e.label),n=new Option(t,e.value,!1,e.selected);return Ma(n,e,!0),n.disabled=e.disabled,e.selected&&n.setAttribute("selected",""),n}},Ua="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,Ba={},Fa=function(e){if(e)return e.dataset.id?parseInt(e.dataset.id,10):void 0},Ga="[data-choice-selectable]",Va=function(){function e(t,n){void 0===t&&(t="[data-choice]"),void 0===n&&(n={});var i=this;this.initialisedOK=void 0,this._hasNonChoicePlaceholder=!1,this._lastAddedChoiceId=0,this._lastAddedGroupId=0;var r=e.defaults;this.config=$o($o($o({},r.allOptions),r.options),n),ss.forEach(function(e){i.config[e]=$o($o($o({},r.allOptions[e]),r.options[e]),n[e])});var o=this.config;o.silent||this._validateConfig();var s=o.shadowRoot||document.documentElement;this._docRoot=s;var a="string"==typeof t?s.querySelector(t):t;if(!a||"object"!=typeof a||"INPUT"!==a.tagName&&!js(a)){if(!a&&"string"==typeof t)throw TypeError("Selector ".concat(t," failed to find an element"));throw TypeError("Expected one of the following types text|select-one|select-multiple")}var c=a.type,l="text"===c;(l||1!==o.maxItemCount)&&(o.singleModeForMultiSelect=!1),o.singleModeForMultiSelect&&(c=cs);var u=c===as,d=c===cs,h=u||d;if(this._elementType=c,this._isTextElement=l,this._isSelectOneElement=u,this._isSelectMultipleElement=d,this._isSelectElement=u||d,this._canAddUserChoices=l&&o.addItems||h&&o.addChoices,"boolean"!=typeof o.renderSelectedChoices&&(o.renderSelectedChoices="always"===o.renderSelectedChoices||u),"auto"===o.closeDropdownOnSelect?o.closeDropdownOnSelect=l||u||o.singleModeForMultiSelect:o.closeDropdownOnSelect=xs(o.closeDropdownOnSelect),o.placeholder&&(o.placeholderValue?this._hasNonChoicePlaceholder=!0:a.dataset.placeholder&&(this._hasNonChoicePlaceholder=!0,o.placeholderValue=a.dataset.placeholder)),n.addItemFilter&&"function"!=typeof n.addItemFilter){var p=n.addItemFilter instanceof RegExp?n.addItemFilter:new RegExp(n.addItemFilter);o.addItemFilter=p.test.bind(p)}if(this._isTextElement)this.passedElement=new Ls({element:a,classNames:o.classNames});else{var f=a;this.passedElement=new Us({element:f,classNames:o.classNames,template:function(e){return i._templates.option(e)},extractPlaceholder:o.placeholder&&!this._hasNonChoicePlaceholder})}if(this.initialised=!1,this._store=new Vs(o),this._currentValue="",o.searchEnabled=!l&&o.searchEnabled||d,this._canSearch=o.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=function(e){var t=e.id||e.name&&"".concat(e.name,"-").concat(ps(2))||ps(4);return t=t.replace(/(:|\.|\[|\]|,)/g,""),"".concat("choices-","-").concat(t)}(a),this._direction=a.dir,!this._direction){var g=window.getComputedStyle(a).direction;g!==window.getComputedStyle(document.documentElement).direction&&(this._direction=g)}if(this._idNames={itemChoice:"item-choice"},this._templates=r.templates,this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onInput=this._onInput.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onSelectKey=this._onSelectKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),this.passedElement.isActive)return o.silent||console.warn("Trying to initialise Choices on element already initialised",{element:t}),this.initialised=!0,void(this.initialisedOK=!1);this.init(),this._initialItems=this._store.items.map(function(e){return e.value})}return Object.defineProperty(e,"defaults",{get:function(){return Object.preventExtensions({get options(){return Ba},get allOptions(){return Bs},get templates(){return ja}})},enumerable:!1,configurable:!0}),e.prototype.init=function(){if(!this.initialised&&void 0===this.initialisedOK){var e;this._searcher=(e=this.config,new xa(e)),this._loadChoices(),this._createTemplates(),this._createElements(),this._createStructure(),this._isTextElement&&!this.config.addItems||this.passedElement.element.hasAttribute("disabled")||this.passedElement.element.closest("fieldset:disabled")?this.disable():(this.enable(),this._addEventListeners()),this._initStore(),this.initialised=!0,this.initialisedOK=!0;var t=this.config.callbackOnInit;"function"==typeof t&&t.call(this)}},e.prototype.destroy=function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this._store._listeners=[],this.clearStore(!1),this._stopSearch(),this._templates=e.defaults.templates,this.initialised=!1,this.initialisedOK=void 0)},e.prototype.enable=function(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this},e.prototype.disable=function(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this},e.prototype.highlightItem=function(e,t){if(void 0===t&&(t=!0),!e||!e.id)return this;var n=this._store.items.find(function(t){return t.id===e.id});return!n||n.highlighted||(this._store.dispatch(hs(n,!0)),t&&this.passedElement.triggerEvent(os,this._getChoiceForOutput(n))),this},e.prototype.unhighlightItem=function(e,t){if(void 0===t&&(t=!0),!e||!e.id)return this;var n=this._store.items.find(function(t){return t.id===e.id});return n&&n.highlighted?(this._store.dispatch(hs(n,!1)),t&&this.passedElement.triggerEvent("unhighlightItem",this._getChoiceForOutput(n)),this):this},e.prototype.highlightAll=function(){var e=this;return this._store.withTxn(function(){e._store.items.forEach(function(t){t.highlighted||(e._store.dispatch(hs(t,!0)),e.passedElement.triggerEvent(os,e._getChoiceForOutput(t)))})}),this},e.prototype.unhighlightAll=function(){var e=this;return this._store.withTxn(function(){e._store.items.forEach(function(t){t.highlighted&&(e._store.dispatch(hs(t,!1)),e.passedElement.triggerEvent(os,e._getChoiceForOutput(t)))})}),this},e.prototype.removeActiveItemsByValue=function(e){var t=this;return this._store.withTxn(function(){t._store.items.filter(function(t){return t.value===e}).forEach(function(e){return t._removeItem(e)})}),this},e.prototype.removeActiveItems=function(e){var t=this;return this._store.withTxn(function(){t._store.items.filter(function(t){return t.id!==e}).forEach(function(e){return t._removeItem(e)})}),this},e.prototype.removeHighlightedItems=function(e){var t=this;return void 0===e&&(e=!1),this._store.withTxn(function(){t._store.highlightedActiveItems.forEach(function(n){t._removeItem(n),e&&t._triggerChange(n.value)})}),this},e.prototype.showDropdown=function(e){var t=this;return this.dropdown.isActive||(void 0===e&&(e=!this._canSearch),requestAnimationFrame(function(){t.dropdown.show();var n=t.dropdown.element.getBoundingClientRect();t.containerOuter.open(n.bottom,n.height),e||t.input.focus(),t.passedElement.triggerEvent("showDropdown")})),this},e.prototype.hideDropdown=function(e){var t=this;return this.dropdown.isActive?(requestAnimationFrame(function(){t.dropdown.hide(),t.containerOuter.close(),!e&&t._canSearch&&(t.input.removeActiveDescendant(),t.input.blur()),t.passedElement.triggerEvent("hideDropdown")}),this):this},e.prototype.getValue=function(e){var t=this,n=this._store.items.map(function(n){return e?n.value:t._getChoiceForOutput(n)});return this._isSelectOneElement||this.config.singleModeForMultiSelect?n[0]:n},e.prototype.setValue=function(e){var t=this;return this.initialisedOK?(this._store.withTxn(function(){e.forEach(function(e){e&&t._addChoice(Ds(e,!1))})}),this._searcher.reset(),this):(this._warnChoicesInitFailed("setValue"),this)},e.prototype.setChoiceByValue=function(e){var t=this;return this.initialisedOK?(this._isTextElement||(this._store.withTxn(function(){(Array.isArray(e)?e:[e]).forEach(function(e){return t._findAndSelectChoiceByValue(e)}),t.unhighlightAll()}),this._searcher.reset()),this):(this._warnChoicesInitFailed("setChoiceByValue"),this)},e.prototype.setChoices=function(e,t,n,i,r,o){var s=this;if(void 0===e&&(e=[]),void 0===t&&(t="value"),void 0===n&&(n="label"),void 0===i&&(i=!1),void 0===r&&(r=!0),void 0===o&&(o=!1),!this.initialisedOK)return this._warnChoicesInitFailed("setChoices"),this;if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if("string"!=typeof t||!t)throw new TypeError("value parameter must be a name of 'value' field in passed objects");if("function"==typeof e){var a=e(this);if("function"==typeof Promise&&a instanceof Promise)return new Promise(function(e){return requestAnimationFrame(e)}).then(function(){return s._handleLoadingState(!0)}).then(function(){return a}).then(function(e){return s.setChoices(e,t,n,i,r,o)}).catch(function(e){s.config.silent||console.error(e)}).then(function(){return s._handleLoadingState(!1)}).then(function(){return s});if(!Array.isArray(a))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(typeof a));return this.setChoices(a,t,n,!1)}if(!Array.isArray(e))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");return this.containerOuter.removeLoadingState(),this._store.withTxn(function(){r&&(s._isSearching=!1),i&&s.clearChoices(!0,o);var a="value"===t,c="label"===n;e.forEach(function(e){if("choices"in e){var i=e;c||(i=$o($o({},i),{label:i[n]})),s._addGroup(Ds(i,!0))}else{var r=e;c&&a||(r=$o($o({},r),{value:r[t],label:r[n]}));var o=Ds(r,!1);s._addChoice(o),o.placeholder&&!s._hasNonChoicePlaceholder&&(s._placeholderValue=ws(o.label))}}),s.unhighlightAll()}),this._searcher.reset(),this},e.prototype.refresh=function(e,t,n){var i=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this._isSelectElement?(this._store.withTxn(function(){var r=i.passedElement.optionsAsChoices(),o={};n||i._store.items.forEach(function(e){e.id&&e.active&&e.selected&&(o[e.value]=!0)}),i.clearStore(!1);var s=function(e){n?i._store.dispatch(ds(e)):o[e.value]&&(e.selected=!0)};r.forEach(function(e){"choices"in e?e.choices.forEach(s):s(e)}),i._addPredefinedChoices(r,t,e),i._isSearching&&i._searchChoices(i.input.value)}),this):(this.config.silent||console.warn("refresh method can only be used on choices backed by a <select> element"),this)},e.prototype.removeChoice=function(e){var t=this._store.choices.find(function(t){return t.value===e});return t?(this._clearNotice(),this._store.dispatch(function(e){return{type:Yo,choice:e}}(t)),this._searcher.reset(),t.selected&&this.passedElement.triggerEvent(rs,this._getChoiceForOutput(t)),this):this},e.prototype.clearChoices=function(e,t){var n=this;return void 0===e&&(e=!0),void 0===t&&(t=!1),e&&(t?this.passedElement.element.replaceChildren(""):this.passedElement.element.querySelectorAll(":not([selected])").forEach(function(e){e.remove()})),this.itemList.element.replaceChildren(""),this.choiceList.element.replaceChildren(""),this._clearNotice(),this._store.withTxn(function(){var e=t?[]:n._store.items;n._store.reset(),e.forEach(function(e){n._store.dispatch(ls(e)),n._store.dispatch(us(e))})}),this._searcher.reset(),this},e.prototype.clearStore=function(e){return void 0===e&&(e=!0),this.clearChoices(e,!0),this._stopSearch(),this._lastAddedChoiceId=0,this._lastAddedGroupId=0,this},e.prototype.clearInput=function(){var e=!this._isSelectOneElement;return this.input.clear(e),this._stopSearch(),this},e.prototype._validateConfig=function(){var e,t,n,i,r=this.config,o=(e=r,t=Bs,n=Object.keys(e).sort(),i=Object.keys(t).sort(),n.filter(function(e){return i.indexOf(e)<0}));o.length&&console.warn("Unknown config option(s) passed",o.join(", ")),r.allowHTML&&r.allowHtmlUserInput&&(r.addItems&&console.warn("Warning: allowHTML/allowHtmlUserInput/addItems all being true is strongly not recommended and may lead to XSS attacks"),r.addChoices&&console.warn("Warning: allowHTML/allowHtmlUserInput/addChoices all being true is strongly not recommended and may lead to XSS attacks"))},e.prototype._render=function(e){void 0===e&&(e={choices:!0,groups:!0,items:!0}),this._store.inTxn()||(this._isSelectElement&&(e.choices||e.groups)&&this._renderChoices(),e.items&&this._renderItems())},e.prototype._renderChoices=function(){var e=this;if(this._canAddItems()){var t=this.config,n=this._isSearching,i=this._store,r=i.activeGroups,o=i.activeChoices,s=0;if(n&&t.searchResultLimit>0?s=t.searchResultLimit:t.renderChoiceLimit>0&&(s=t.renderChoiceLimit),this._isSelectElement){var a=o.filter(function(e){return!e.element});a.length&&this.passedElement.addOptions(a)}var c=document.createDocumentFragment(),l=function(e){return e.filter(function(e){return!e.placeholder&&(n?!!e.rank:t.renderSelectedChoices||!e.selected)})},u=!1,d=function(i,r,o){n?i.sort(Es):t.shouldSort&&i.sort(t.sorter);var a=i.length;a=!r&&s&&a>s?s:a,a--,i.every(function(i,r){var s=i.choiceEl||e._templates.choice(t,i,t.itemSelectText,o);return i.choiceEl=s,c.appendChild(s),!n&&i.selected||(u=!0),r<a})};o.length&&(t.resetScrollPosition&&requestAnimationFrame(function(){return e.choiceList.scrollToTop()}),this._hasNonChoicePlaceholder||n||!this._isSelectOneElement||d(o.filter(function(e){return e.placeholder&&!e.group}),!1,void 0),r.length&&!n?(t.shouldSort&&r.sort(t.sorter),d(o.filter(function(e){return!e.placeholder&&!e.group}),!1,void 0),r.forEach(function(i){var r=l(i.choices);if(r.length){if(i.label){var o=i.groupEl||e._templates.choiceGroup(e.config,i);i.groupEl=o,o.remove(),c.appendChild(o)}d(r,!0,t.appendGroupInSearch&&n?i.label:void 0)}})):d(l(o),!1,void 0)),u||!n&&c.children.length&&t.renderSelectedChoices||(this._notice||(this._notice={text:vs(n?t.noResultsText:t.noChoicesText),type:n?Hs:Ws}),c.replaceChildren("")),this._renderNotice(c),this.choiceList.element.replaceChildren(c),u&&this._highlightChoice()}},e.prototype._renderItems=function(){var e=this,t=this._store.items||[],n=this.itemList.element,i=this.config,r=document.createDocumentFragment(),o=function(e){return n.querySelector('[data-item][data-id="'.concat(e.id,'"]'))},s=function(t){var n=t.itemEl;n&&n.parentElement||(n=o(t)||e._templates.item(i,t,i.removeItemButton),t.itemEl=n,r.appendChild(n))};t.forEach(s);var a=!!r.childNodes.length;if(this._isSelectOneElement){var c=n.children.length;if(a||c>1){var l=n.querySelector(Ts(i.classNames.placeholder));l&&l.remove()}else a||c||!this._placeholderValue||(a=!0,s(Ds({selected:!0,value:"",label:this._placeholderValue,placeholder:!0},!1)))}a&&(n.append(r),i.shouldSortItems&&!this._isSelectOneElement&&(t.sort(i.sorter),t.forEach(function(e){var t=o(e);t&&(t.remove(),r.append(t))}),n.append(r))),this._isTextElement&&(this.passedElement.value=t.map(function(e){return e.value}).join(i.delimiter))},e.prototype._displayNotice=function(e,t,n){void 0===n&&(n=!0);var i=this._notice;i&&(i.type===t&&i.text===e||i.type===$s&&(t===Hs||t===Ws))?n&&this.showDropdown(!0):(this._clearNotice(),this._notice=e?{text:e,type:t}:void 0,this._renderNotice(),n&&e&&this.showDropdown(!0))},e.prototype._clearNotice=function(){if(this._notice){var e=this.choiceList.element.querySelector(Ts(this.config.classNames.notice));e&&e.remove(),this._notice=void 0}},e.prototype._renderNotice=function(e){var t=this._notice;if(t){var n=this._templates.notice(this.config,t.text,t.type);e?e.append(n):this.choiceList.prepend(n)}},e.prototype._getChoiceForOutput=function(e,t){return{id:e.id,highlighted:e.highlighted,labelClass:e.labelClass,labelDescription:e.labelDescription,customProperties:e.customProperties,disabled:e.disabled,active:e.active,label:e.label,placeholder:e.placeholder,value:e.value,groupValue:e.group?e.group.label:void 0,element:e.element,keyCode:t}},e.prototype._triggerChange=function(e){null!=e&&this.passedElement.triggerEvent("change",{value:e})},e.prototype._handleButtonAction=function(e){var t=this,n=this._store.items;if(n.length&&this.config.removeItems&&this.config.removeItemButton){var i=e&&Fa(e.parentElement),r=i&&n.find(function(e){return e.id===i});r&&this._store.withTxn(function(){if(t._removeItem(r),t._triggerChange(r.value),t._isSelectOneElement&&!t._hasNonChoicePlaceholder){var e=(t.config.shouldSort?t._store.choices.reverse():t._store.choices).find(function(e){return e.placeholder});e&&(t._addItem(e),t.unhighlightAll(),e.value&&t._triggerChange(e.value))}})}},e.prototype._handleItemAction=function(e,t){var n=this;void 0===t&&(t=!1);var i=this._store.items;if(i.length&&this.config.removeItems&&!this._isSelectOneElement){var r=Fa(e);r&&(i.forEach(function(e){e.id!==r||e.highlighted?!t&&e.highlighted&&n.unhighlightItem(e):n.highlightItem(e)}),this.input.focus())}},e.prototype._handleChoiceAction=function(e){var t=this,n=Fa(e),i=n&&this._store.getChoiceById(n);if(!i||i.disabled)return!1;var r=this.dropdown.isActive;if(!i.selected){if(!this._canAddItems())return!0;this._store.withTxn(function(){t._addItem(i,!0,!0),t.clearInput(),t.unhighlightAll()}),this._triggerChange(i.value)}return r&&this.config.closeDropdownOnSelect&&(this.hideDropdown(!0),this.containerOuter.element.focus()),!0},e.prototype._handleBackspace=function(e){var t=this.config;if(t.removeItems&&e.length){var n=e[e.length-1],i=e.some(function(e){return e.highlighted});t.editItems&&!i&&n?(this.input.value=n.value,this.input.setWidth(),this._removeItem(n),this._triggerChange(n.value)):(i||this.highlightItem(n,!1),this.removeHighlightedItems(!0))}},e.prototype._loadChoices=function(){var e,t=this,n=this.config;if(this._isTextElement){if(this._presetChoices=n.items.map(function(e){return Ds(e,!1)}),this.passedElement.value){var i=this.passedElement.value.split(n.delimiter).map(function(e){return Ds(e,!1,t.config.allowHtmlUserInput)});this._presetChoices=this._presetChoices.concat(i)}this._presetChoices.forEach(function(e){e.selected=!0})}else if(this._isSelectElement){this._presetChoices=n.choices.map(function(e){return Ds(e,!0)});var r=this.passedElement.optionsAsChoices();r&&(e=this._presetChoices).push.apply(e,r)}},e.prototype._handleLoadingState=function(e){void 0===e&&(e=!0);var t=this.itemList.element;e?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?t.replaceChildren(this._templates.placeholder(this.config,this.config.loadingText)):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?(t.replaceChildren(""),this._render()):this.input.placeholder=this._placeholderValue||"")},e.prototype._handleSearch=function(e){if(this.input.isFocussed)if(null!=e&&e.length>=this.config.searchFloor){var t=this.config.searchChoices?this._searchChoices(e):0;null!==t&&this.passedElement.triggerEvent(is,{value:e,resultCount:t})}else this._store.choices.some(function(e){return!e.active})&&this._stopSearch()},e.prototype._canAddItems=function(){var e=this.config,t=e.maxItemCount,n=e.maxItemText;return!e.singleModeForMultiSelect&&t>0&&t<=this._store.items.length?(this.choiceList.element.replaceChildren(""),this._notice=void 0,this._displayNotice("function"==typeof n?n(t):n,$s),!1):(this._notice&&this._notice.type===$s&&this._clearNotice(),!0)},e.prototype._canCreateItem=function(e){var t=this.config,n=!0,i="";if(n&&"function"==typeof t.addItemFilter&&!t.addItemFilter(e)&&(n=!1,i=ms(t.customAddItemText,e)),n&&this._store.choices.find(function(n){return t.valueComparer(n.value,e)})){if(this._isSelectElement)return this._displayNotice("",$s),!1;t.duplicateItemsAllowed||(n=!1,i=ms(t.uniqueItemText,e))}return n&&(i=ms(t.addItemText,e)),i&&this._displayNotice(i,$s),n},e.prototype._searchChoices=function(e){var t=e.trim().replace(/\s{2,}/," ");if(!t.length||t===this._currentValue)return null;var n=this._searcher;n.isEmptyIndex()&&n.index(this._store.searchableChoices);var i=n.search(t);this._currentValue=t,this._highlightPosition=0,this._isSearching=!0;var r=this._notice;return(r&&r.type)!==$s&&(i.length?this._clearNotice():this._displayNotice(vs(this.config.noResultsText),Hs)),this._store.dispatch(function(e){return{type:Jo,results:e}}(i)),i.length},e.prototype._stopSearch=function(){this._isSearching&&(this._currentValue="",this._isSearching=!1,this._clearNotice(),this._store.dispatch({type:Xo,active:!0}),this.passedElement.triggerEvent(is,{value:"",resultCount:0}))},e.prototype._addEventListeners=function(){var e=this._docRoot,t=this.containerOuter.element,n=this.input.element;e.addEventListener("touchend",this._onTouchEnd,!0),t.addEventListener("keydown",this._onKeyDown,!0),t.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("click",this._onClick,{passive:!0}),e.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0}),this._isSelectOneElement&&(t.addEventListener("focus",this._onFocus,{passive:!0}),t.addEventListener("blur",this._onBlur,{passive:!0})),n.addEventListener("keyup",this._onKeyUp,{passive:!0}),n.addEventListener("input",this._onInput,{passive:!0}),n.addEventListener("focus",this._onFocus,{passive:!0}),n.addEventListener("blur",this._onBlur,{passive:!0}),n.form&&n.form.addEventListener("reset",this._onFormReset,{passive:!0}),this.input.addEventListeners()},e.prototype._removeEventListeners=function(){var e=this._docRoot,t=this.containerOuter.element,n=this.input.element;e.removeEventListener("touchend",this._onTouchEnd,!0),t.removeEventListener("keydown",this._onKeyDown,!0),t.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("click",this._onClick),e.removeEventListener("touchmove",this._onTouchMove),this.dropdown.element.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(t.removeEventListener("focus",this._onFocus),t.removeEventListener("blur",this._onBlur)),n.removeEventListener("keyup",this._onKeyUp),n.removeEventListener("input",this._onInput),n.removeEventListener("focus",this._onFocus),n.removeEventListener("blur",this._onBlur),n.form&&n.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()},e.prototype._onKeyDown=function(e){var t=e.keyCode,n=this.dropdown.isActive,i=1===e.key.length||2===e.key.length&&e.key.charCodeAt(0)>=55296||"Unidentified"===e.key;switch(this._isTextElement||n||27===t||9===t||16===t||(this.showDropdown(),!this.input.isFocussed&&i&&(this.input.value+=e.key," "===e.key&&e.preventDefault())),t){case 65:return this._onSelectKey(e,this.itemList.element.hasChildNodes());case 13:return this._onEnterKey(e,n);case 27:return this._onEscapeKey(e,n);case 38:case 33:case 40:case 34:return this._onDirectionKey(e,n);case 8:case 46:return this._onDeleteKey(e,this._store.items,this.input.isFocussed)}},e.prototype._onKeyUp=function(){this._canSearch=this.config.searchEnabled},e.prototype._onInput=function(){var e=this.input.value;e?this._canAddItems()&&(this._canSearch&&this._handleSearch(e),this._canAddUserChoices&&(this._canCreateItem(e),this._isSelectElement&&(this._highlightPosition=0,this._highlightChoice()))):this._isTextElement?this.hideDropdown(!0):this._stopSearch()},e.prototype._onSelectKey=function(e,t){(e.ctrlKey||e.metaKey)&&t&&(this._canSearch=!1,this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement&&this.highlightAll())},e.prototype._onEnterKey=function(e,t){var n=this,i=this.input.value,r=e.target;if(e.preventDefault(),r&&r.hasAttribute("data-button"))this._handleButtonAction(r);else if(t){var o=this.dropdown.element.querySelector(Ts(this.config.classNames.highlightedState));if(!o||!this._handleChoiceAction(o))if(r&&i){if(this._canAddItems()){var s=!1;this._store.withTxn(function(){if(!(s=n._findAndSelectChoiceByValue(i,!0))){if(!n._canAddUserChoices)return;if(!n._canCreateItem(i))return;n._addChoice(Ds(i,!1,n.config.allowHtmlUserInput),!0,!0),s=!0}n.clearInput(),n.unhighlightAll()}),s&&(this._triggerChange(i),this.config.closeDropdownOnSelect&&this.hideDropdown(!0))}}else this.hideDropdown(!0)}else(this._isSelectElement||this._notice)&&this.showDropdown()},e.prototype._onEscapeKey=function(e,t){t&&(e.stopPropagation(),this.hideDropdown(!0),this._stopSearch(),this.containerOuter.element.focus())},e.prototype._onDirectionKey=function(e,t){var n,i,r,o=e.keyCode;if(t||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;var s=40===o||34===o?1:-1,a=void 0;if(e.metaKey||34===o||33===o)a=s>0?this.dropdown.element.querySelector("".concat(Ga,":last-of-type")):this.dropdown.element.querySelector(Ga);else{var c=this.dropdown.element.querySelector(Ts(this.config.classNames.highlightedState));a=c?function(e,t,n){void 0===n&&(n=1);for(var i="".concat(n>0?"next":"previous","ElementSibling"),r=e[i];r;){if(r.matches(t))return r;r=r[i]}return null}(c,Ga,s):this.dropdown.element.querySelector(Ga)}a&&(n=a,i=this.choiceList.element,void 0===(r=s)&&(r=1),(r>0?i.scrollTop+i.offsetHeight>=n.offsetTop+n.offsetHeight:n.offsetTop>=i.scrollTop)||this.choiceList.scrollToChildElement(a,s),this._highlightChoice(a)),e.preventDefault()}},e.prototype._onDeleteKey=function(e,t,n){this._isSelectOneElement||e.target.value||!n||(this._handleBackspace(t),e.preventDefault())},e.prototype._onTouchMove=function(){this._wasTap&&(this._wasTap=!1)},e.prototype._onTouchEnd=function(e){var t=(e||e.touches[0]).target;this._wasTap&&this.containerOuter.element.contains(t)&&((t===this.containerOuter.element||t===this.containerInner.element)&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),e.stopPropagation()),this._wasTap=!0},e.prototype._onMouseDown=function(e){var t=e.target;if(t instanceof HTMLElement){if(Ua&&this.choiceList.element.contains(t)){var n=this.choiceList.element.firstElementChild;this._isScrollingOnIe="ltr"===this._direction?e.offsetX>=n.offsetWidth:e.offsetX<n.offsetLeft}if(t!==this.input.element){var i=t.closest("[data-button],[data-item],[data-choice]");i instanceof HTMLElement&&("button"in i.dataset?this._handleButtonAction(i):"item"in i.dataset?this._handleItemAction(i,e.shiftKey):"choice"in i.dataset&&this._handleChoiceAction(i)),e.preventDefault()}}},e.prototype._onMouseOver=function(e){var t=e.target;t instanceof HTMLElement&&"choice"in t.dataset&&this._highlightChoice(t)},e.prototype._onClick=function(e){var t=e.target,n=this.containerOuter;n.element.contains(t)?this.dropdown.isActive||n.isDisabled?this._isSelectOneElement&&t!==this.input.element&&!this.dropdown.element.contains(t)&&this.hideDropdown():this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),n.element.focus()):(n.removeFocusState(),this.hideDropdown(!0),this.unhighlightAll())},e.prototype._onFocus=function(e){var t=e.target,n=this.containerOuter;if(t&&n.element.contains(t)){var i=t===this.input.element;this._isTextElement?i&&n.addFocusState():this._isSelectMultipleElement?i&&(this.showDropdown(!0),n.addFocusState()):(n.addFocusState(),i&&this.showDropdown(!0))}},e.prototype._onBlur=function(e){var t=e.target,n=this.containerOuter;t&&n.element.contains(t)&&!this._isScrollingOnIe?t===this.input.element?(n.removeFocusState(),this.hideDropdown(!0),(this._isTextElement||this._isSelectMultipleElement)&&this.unhighlightAll()):t===this.containerOuter.element&&(n.removeFocusState(),this._canSearch||this.hideDropdown(!0)):(this._isScrollingOnIe=!1,this.input.element.focus())},e.prototype._onFormReset=function(){var e=this;this._store.withTxn(function(){e.clearInput(),e.hideDropdown(),e.refresh(!1,!1,!0),e._initialItems.length&&e.setChoiceByValue(e._initialItems)})},e.prototype._highlightChoice=function(e){void 0===e&&(e=null);var t=Array.from(this.dropdown.element.querySelectorAll(Ga));if(t.length){var n=e,i=this.config.classNames.highlightedState;Array.from(this.dropdown.element.querySelectorAll(Ts(i))).forEach(function(e){Cs(e,i),e.setAttribute("aria-selected","false")}),n?this._highlightPosition=t.indexOf(n):(n=t.length>this._highlightPosition?t[this._highlightPosition]:t[t.length-1])||(n=t[0]),As(n,i),n.setAttribute("aria-selected","true"),this.passedElement.triggerEvent("highlightChoice",{el:n}),this.dropdown.isActive&&(this.input.setActiveDescendant(n.id),this.containerOuter.setActiveDescendant(n.id))}},e.prototype._addItem=function(e,t,n){if(void 0===t&&(t=!0),void 0===n&&(n=!1),!e.id)throw new TypeError("item.id must be set before _addItem is called for a choice/item");(this.config.singleModeForMultiSelect||this._isSelectOneElement)&&this.removeActiveItems(e.id),this._store.dispatch(us(e)),t&&(this.passedElement.triggerEvent("addItem",this._getChoiceForOutput(e)),n&&this.passedElement.triggerEvent("choice",this._getChoiceForOutput(e)))},e.prototype._removeItem=function(e){if(e.id){this._store.dispatch(ds(e));var t=this._notice;t&&t.type===Ws&&this._clearNotice(),this.passedElement.triggerEvent(rs,this._getChoiceForOutput(e))}},e.prototype._addChoice=function(e,t,n){if(void 0===t&&(t=!0),void 0===n&&(n=!1),e.id)throw new TypeError("Can not re-add a choice which has already been added");var i=this.config;if(i.duplicateItemsAllowed||!this._store.choices.find(function(t){return i.valueComparer(t.value,e.value)})){this._lastAddedChoiceId++,e.id=this._lastAddedChoiceId,e.elementId="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(e.id);var r=i.prependValue,o=i.appendValue;r&&(e.value=r+e.value),o&&(e.value+=o.toString()),(r||o)&&e.element&&(e.element.value=e.value),this._clearNotice(),this._store.dispatch(ls(e)),e.selected&&this._addItem(e,t,n)}},e.prototype._addGroup=function(e,t){var n=this;if(void 0===t&&(t=!0),e.id)throw new TypeError("Can not re-add a group which has already been added");this._store.dispatch(function(e){return{type:Zo,group:e}}(e)),e.choices&&(this._lastAddedGroupId++,e.id=this._lastAddedGroupId,e.choices.forEach(function(i){i.group=e,e.disabled&&(i.disabled=!0),n._addChoice(i,t)}))},e.prototype._createTemplates=function(){var e=this,t=this.config.callbackOnCreateTemplates,n={};"function"==typeof t&&(n=t.call(this,gs,ys,Ss));var i={};Object.keys(this._templates).forEach(function(t){i[t]=t in n?n[t].bind(e):e._templates[t].bind(e)}),this._templates=i},e.prototype._createElements=function(){var e=this._templates,t=this.config,n=this._isSelectOneElement,i=t.position,r=t.classNames,o=this._elementType;this.containerOuter=new Ns({element:e.containerOuter(t,this._direction,this._isSelectElement,n,t.searchEnabled,o,t.labelId),classNames:r,type:o,position:i}),this.containerInner=new Ns({element:e.containerInner(t),classNames:r,type:o,position:i}),this.input=new Ps({element:e.input(t,this._placeholderValue),classNames:r,type:o,preventPaste:!t.paste}),this.choiceList=new ks({element:e.choiceList(t,n)}),this.itemList=new ks({element:e.itemList(t,n)}),this.dropdown=new Os({element:e.dropdown(t),classNames:r,type:o})},e.prototype._createStructure=function(){var e=this,t=e.containerInner,n=e.containerOuter,i=e.passedElement,r=this.dropdown.element;i.conceal(),t.wrap(i.element),n.wrap(t.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":(this._placeholderValue&&(this.input.placeholder=this._placeholderValue),this.input.setWidth()),n.element.appendChild(t.element),n.element.appendChild(r),t.element.appendChild(this.itemList.element),r.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&r.insertBefore(this.input.element,r.firstChild):t.element.appendChild(this.input.element),this._highlightPosition=0,this._isSearching=!1},e.prototype._initStore=function(){var e=this;this._store.subscribe(this._render).withTxn(function(){e._addPredefinedChoices(e._presetChoices,e._isSelectOneElement&&!e._hasNonChoicePlaceholder,!1)}),(!this._store.choices.length||this._isSelectOneElement&&this._hasNonChoicePlaceholder)&&this._render()},e.prototype._addPredefinedChoices=function(e,t,n){var i=this;void 0===t&&(t=!1),void 0===n&&(n=!0),t&&-1===e.findIndex(function(e){return e.selected})&&e.some(function(e){return!e.disabled&&!("choices"in e)&&(e.selected=!0,!0)}),e.forEach(function(e){"choices"in e?i._isSelectElement&&i._addGroup(e,n):i._addChoice(e,n)})},e.prototype._findAndSelectChoiceByValue=function(e,t){var n=this;void 0===t&&(t=!1);var i=this._store.choices.find(function(t){return n.config.valueComparer(t.value,e)});return!(!i||i.disabled||i.selected||(this._addItem(i,!0,t),0))},e.prototype._generatePlaceholderValue=function(){var e=this.config;if(!e.placeholder)return null;if(this._hasNonChoicePlaceholder)return e.placeholderValue;if(this._isSelectElement){var t=this.passedElement.placeholderOption;return t?t.text:null}return null},e.prototype._warnChoicesInitFailed=function(e){if(!this.config.silent){if(!this.initialised)throw new TypeError("".concat(e," called on a non-initialised instance of Choices"));if(!this.initialisedOK)throw new TypeError("".concat(e," called for an element which has multiple instances of Choices initialised on it"))}},e.version="11.1.0",e}();class Wa extends Ni{constructor(e){super(Pi.SET_KEYBOARD_ENABLED,e)}}var Ha=n(44436);function $a(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class qa{static init(){qa.devPanel=Ha(".dev-settings-panel");const e=window.localStorage.getItem(qa.storage_key);e&&parseInt(e)===qa.storage_value_expanded?qa.expandPanel():qa.collapsePanel(),qa.setupListeners()}static setupListeners(){const e=qa.devPanel;e.on("mousedown",qa.onMouseDown),e.find("#current_webgl_version").on("change",qa.onCurrentWebglVersionChange),e.find("#current_cluster").on("change",qa.onClusterChange),e.find("#override_user_currency").on("change",qa.onUserCurrencyChange),e.find("#override_user_country").on("change",qa.onUserCountryChange),e.find("#override_user_continent").on("change",qa.onUserContinentChange),e.find("#deny_tutorial").on("change",qa.onDenyTutorialChange),e.find("#death_timer").on("change",qa.onDeathTimerChange),e.find("#suid_simulate").on("change",qa.onSuidSimulateChange),e.find("#test_desktop_payment").on("click",qa.openDesktopPaymentWindow),e.find("#live_config_branch").on("change",qa.onLiveConfigBranchChange),e.find("#current_assets_branch").on("change",qa.onCurrentAssetsBranchChange);const t={searchResultLimit:-1};new Va("#current_assets_branch",t).initialised||console.error("Choices not initialized"),new Va("#current_cluster",t).initialised||console.error("Choices not initialized"),new Va("#current_webgl_version",t).initialised||console.error("Choices not initialized"),e.find("#button_collapse").on("click",qa.onButtonCollapseClick),e.find("#button_expand").on("click",qa.onButtonExpandClick),e.on("mouseenter",qa.onPanelMouseEnter),e.on("mouseleave",qa.onPanelMouseLeave)}static onMouseDown(e){e.stopPropagation();const t=qa.devPanel.get(0);if(!t)throw new Error("DevSettingsPanel.devPanel is not defined");qa.panelDragOffset=[e.clientX-t.getBoundingClientRect().left,e.clientY-t.getBoundingClientRect().top],Ha(document).on("mousemove",qa.devPanel,qa.onMouseMove),Ha(document).on("mouseup",qa.onMouseUp)}static onMouseUp(e){e.stopPropagation(),qa.removeListeners()}static removeListeners(){Ha(document).off("mousemove",qa.onMouseMove),Ha(document).off("mouseup",qa.onMouseUp)}static onMouseMove(e){e.stopPropagation(),qa.devPanel.css("bottom","unset"),qa.devPanel.css("left",e.clientX-qa.panelDragOffset[0]),qa.devPanel.css("top",e.clientY-qa.panelDragOffset[1])}static onCurrentWebglVersionChange(){const e=Ha("#current_webgl_version").val(),t=Fn(window.location.href,!0);t.set("query",{...t.query,current_webgl_version:e}),window.location.href=t.toString()}static onCurrentAssetsBranchChange(){const e=Ha("#current_assets_branch").val(),t=Fn(window.location.href,!0);t.set("query",{...t.query,assets_branch:e}),window.location.href=t.toString()}static onClusterChange(){const e=Ha("#current_cluster").val(),t=Fn(window.location.href,!0);t.set("query",{...t.query,cluster:e}),window.location.href=t.toString()}static onUserCurrencyChange(){const e=Ha("#override_user_currency").val(),t=Fn(window.location.href,!0);if(3===e.trim().length||0===e.trim().length){if(3!==e.trim().length){const{user_currency:e,...n}=t.query;t.set("query",n)}else{let n;n=void 0===t.query.suid_simulate?Ce.getInstance().getSuid().toString():t.query.suid_simulate,t.set("query",{...t.query,suid_simulate:n,user_currency:e.toUpperCase()})}window.location.href=t.toString()}}static onUserCountryChange(){const e=Ha("#override_user_country").val(),t=Fn(window.location.href,!0);if(2===e.trim().length||0===e.trim().length){if(2!==e.trim().length){const{country_code:e,...n}=t.query;t.set("query",n)}else{let n;n=void 0===t.query.suid_simulate?Ce.getInstance().getSuid().toString():t.query.suid_simulate,t.set("query",{...t.query,country_code:e.toUpperCase(),suid_simulate:n})}window.location.href=t.toString()}}static onUserContinentChange(){const e=Ha("#override_user_continent").val(),t=Fn(window.location.href,!0);if(2===e.trim().length||0===e.trim().length){if(2!==e.trim().length){const{continent_code:e,...n}=t.query;t.set("query",n)}else{let n;n=void 0===t.query.suid_simulate?Ce.getInstance().getSuid().toString():t.query.suid_simulate,t.set("query",{...t.query,suid_simulate:n,continent_code:e.toUpperCase()})}window.location.href=t.toString()}}static onSuidSimulateChange(){const e=Ha("#suid_simulate").val(),t=Fn(window.location.href,!0);if(0===e.trim().length){const{suid_simulate:e,...n}=t.query;t.set("query",n)}else t.set("query",{...t.query,suid_simulate:e.toLowerCase()});window.location.href=t.toString()}static onDenyTutorialChange(){const e=Ha("#deny_tutorial").prop("checked"),t=Fn(window.location.href,!0);if(e)t.set("query",{...t.query,deny_tutorial:1});else{const{deny_tutorial:e,...n}=t.query;t.set("query",n)}window.location.href=t.toString()}static onDeathTimerChange(){const e=Ha("#death_timer").prop("checked"),t=Fn(window.location.href,!0);if(e)t.set("query",{...t.query,death_timer:1});else{const{death_timer:e,...n}=t.query;t.set("query",n)}window.location.href=t.toString()}static onLiveConfigBranchChange(){const e=Ha("#live_config_branch").val(),t=Fn(window.location.href,!0);if(0===e.trim().length){const{live_config_branch:e,...n}=t.query;t.set("query",n)}else t.set("query",{...t.query,live_config_branch:e});window.location.href=t.toString()}static async openDesktopPaymentWindow(){var e,t;const n=re(),i=window.app.config.user_auth_token,r=window.app.config.language,o=window.open(`${T.getNoLangUrl("desktop/orderBox")}?suid=${n}&token=${i}&language=${r}`,"desktop pay","width=700,height=700");if(!o)throw new Error("Failed to open desktop payment window");let s;await new Promise(e=>{s=window.setInterval(()=>{o.app&&(window.clearInterval(s),e())},500)});const a=Object.keys(null===(e=window.app)||void 0===e?void 0:e.last_payment_object).length&&(null===(t=window.app)||void 0===t?void 0:t.last_payment_object)||null,c=null!=a?a:{id:34060,reward:[],pic:"",currency:"PLN",description:"",name:"Абсолютное превосходство",price:3e4,guid_receiver:window.app.getGameStartDataResponse.guid};o.gameInstance=window.gameInstance,o.order_box_ready=function(){console.log("desktop order box ready")},o.close_order_box=function(){o.close(),window.app.game_popup_close()},o.pay_finish=window.app.payFinish;const l=setInterval(()=>{o.app.pay(JSON.stringify(c)),clearInterval(l)},1e3)}static onButtonCollapseClick(){qa.collapsePanel(),window.localStorage.setItem(qa.storage_key,qa.storage_value_collapsed.toString())}static onButtonExpandClick(){qa.expandPanel(),window.localStorage.setItem(qa.storage_key,qa.storage_value_expanded.toString())}static collapsePanel(){qa.devPanel.find(".dev-settings-content").hide(),qa.devPanel.find("#button_collapse").hide(),qa.devPanel.find("#button_expand").show()}static expandPanel(){qa.devPanel.find(".dev-settings-content").show(),qa.devPanel.find("#button_collapse").show(),qa.devPanel.find("#button_expand").hide()}static onPanelMouseEnter(e){e.stopPropagation(),jl.getInstance().sendCommand(new Wa({enabled:0}))}static onPanelMouseLeave(e){e.stopPropagation(),jl.getInstance().sendCommand(new Wa({enabled:1}))}}$a(qa,"devPanel",void 0),$a(qa,"panelDragOffset",[10,10]),$a(qa,"storage_key","dev_settings_panel_collapsed"),$a(qa,"storage_value_collapsed",0),$a(qa,"storage_value_expanded",1);var za=n(44436);class Ka{static setupLayoutFixes(){za(window).on("resize",this.onWindowResize).trigger("resize");const e=setInterval(()=>{za(window).trigger("resize")},1e3);setTimeout(()=>{clearInterval(e)},2e3)}static onWindowResize(){yo.calculateResponsiveCenterSlot()}}let Ya=function(e){return e[e.SUCCESS=1]="SUCCESS",e[e.CANCEL=2]="CANCEL",e[e.FAIL=3]="FAIL",e[e.INITIATED=4]="INITIATED",e[e.CHECK_SERVER=5]="CHECK_SERVER",e}({});var Ja,Xa=n(44436);function Qa(e,t,n,i,r){let o="iframe";i&&(o="div");const s=document.createElement(o),a=t||600,c=n||530;return s.id="js-order_box_iframe",s.name="js-order_box_iframe",s.style.width=`${a}px`,s.style.height=`${c}px`,r&&(s.style.width=`${a}${r}`,s.style.height=`${c}${r}`),s.setAttribute("noResize",!0),i||(s.src=e),s}Xa.prototype.scrollbar=(Ja=Xa.prototype.scrollbar,function(){const e=window.app.config.user_os.name.toLowerCase().includes("mac"),t=window.app.config.user_browser.name.toLowerCase().includes("firefox");if(!e||!t)return Ja.call(this);Xa(this).css("overflow-y","auto")});class Za extends Ni{constructor(e){super(Pi.POLL_RESPONSE,e)}}var ec=n(44436);async function tc(){const e=new Za({});await jl.getInstance().sendCommand(e),window.app.game_popup_close()}var nc=n(44436);const ic=ye.getPrefixedCopy("GAME_GENERAL");function rc(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(){try{Ui&&(null==(e=ji)||null===(t=e.requestFullscreen)||void 0===t||t.call(e),null==e||null===(n=e.mozRequestFullScreen)||void 0===n||n.call(e),null==e||null===(i=e.webkitRequestFullscreen)||void 0===i||i.call(e),Ui=!1,ji=null)}catch(e){window.Sentry.captureException(e)}var e,t,n,i}(),ic.info("pay","Finish",e),(e=parseInt(e,10))!==Ya.SUCCESS&&e!==Ya.INITIATED||window.app.setPayerFlag(),n=new Vo({status:e,last_payment:window.app.last_payment,fbError:i}),jl.getInstance().sendCommand(n),window.app.last_payment=void 0}window.app.payFinish=rc,window.app.initGroupLinks=function(){nc(".js-group_link").on("click",function(){const e=`${nc(this).data("link")}`;void 0!==e&&""!==e.trim()&&window.open(e)})},nc(function(){window.app.initGroupLinks(),J.isSocial()||g.SITE!==window.app.config.current_entry_point||Mo(),nc(document.body).hasClass("article")||Ka.setupLayoutFixes();const e=nc(".dev-settings-panel");e.length&&e.is(":visible")&&qa.init()});let oc=function(e){return e.OD_PAY="od_pay",e.VK_PAY="vk_pay",e.MM_PAY="mm_pay",e.FC_PAY="fc_pay",e.FB_PAY="fb_pay",e.GOOGLE_PAY="google_pay",e.IOS_PAY="ios_pay",e.ADYEN="adyen",e.STEAM="steam",e.XSOLLA="xsolla",e}({});class sc extends Error{constructor(){super(...arguments),function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"code",void 0),this.name="PayserviceRequestError",this.code=arguments.length<=1?void 0:arguments[1]}}class ac{static async get(e,t){const n=T.getPayserviceUrl(e);return ae.A.get(n,{data:t}).then(ac.handleResponse)}static async post(e,t){const n=T.getPayserviceUrl(e),i=_(),r={...t};return r.token=window.app.config.user_auth_token,r.gameName=i,ae.A.post(n,r).then(ac.handleResponse)}}!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ac,"handleResponse",e=>{if(e.data.error)throw new sc(e.data.error.message,e.data.error.code);return e.data.result});class cc{static async getMethods(){const e={amount:window.app.last_payment_object.price,country:window.app.config.country,currency:window.app.last_payment_object.currency,locale:window.app.config.locale,suid:Ce.getInstance().getSuid()};return ac.post("payments/getPaymentMethods",e)}static async initiateTransaction(e,t){const n=await ac.post("/payments/initiate",{payService:t,pmObject:e,suid:re(),suid_simulate:re(!0)});return this.setLastPaymentMethod(t),sn.fireEvent(an.PAYMENT_PROCEED,{paymentId:e.id,paymentMethod:t,transactionId:n}),n}static setLastPaymentMethod(e){e?window.app.lastPaymentMethod=e:window.Sentry.captureException(e)}}async function lc(e,t){try{return await cc.initiateTransaction(e,t)}catch(e){window.Sentry.captureException(e),n=function(e,t){const n={error:"",success:""},i=function(e){return{amount:window.app.last_payment_object.price,country:window.app.config.country,currency:window.app.last_payment_object.currency,currentEntryPoint:window.app.config.current_entry_point,email:encodeURIComponent(Ce.getInstance().getEmail()||""),guid_receiver:window.app.last_payment_object.guid_receiver,locale:window.app.config.locale,method:e,name:window.app.last_payment_object.name,pm_id:window.app.last_payment_object.id,suid:re(),suid_simulate:re(!0)}}(e),r=Fn(T.getNoLangUrl("/payments/result?window=0"),!0);return r.set("query",{...r.query,amount:i.amount,currency:i.currency,description:i.name,error:0,orderId:i.pm_id}),n.success=r.toString(),r.set("query",{...r.query,error:1}),t&&r.set("query",{...r.query,error:1,errorMessage:t.message,errorCode:t.code}),n.error=r.toString(),n}("iframe",{message:e.message,code:e.code}).error,window.app.order_box.hideOrderBoxElements(),window.app.order_box.appendIframe(n,620,580,".ecommpay_order_box_popup_wrapper",!1)}var n;return null}n(44436);var uc,dc,hc,pc=n(44436);function fc(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let gc=!1,mc=0;const vc=`//connect.facebook.net/${window.app.config.locale}/sdk.js`,_c=null!==(uc=null===(dc=window.app.config)||void 0===dc||null===(hc=dc.fb)||void 0===hc?void 0:hc.fbsdkversion)&&void 0!==uc?uc:"",wc=`${window.app.config.static_path+window.app.config.fb.static_part_path+_c}.js`;class yc{constructor(e){fc(this,"appId",void 0),fc(this,"startPayment",async e=>{console.log(["payobj"],[e]),So.enable(),window.app.last_payment=e.id,e.guid_receiver||(e.guid_receiver=window.app.getGameStartDataResponse.guid),e.name||(e.name="Sale 80%"),pc.trim(e.description)||(e.description="Take the power and crush your enemies!"),(!e.pic||e.pic.length<4)&&(e.pic="default.png");const t=await lc(e,oc.FB_PAY);if(!t)return;const n=[t],i=window.app.config.fb.dynamic_price_url+n.join("/");window.app.fireInitiateCheckout(e),window.FB.ui({action:"purchaseitem",method:"pay",product:i,quantity:1,request_id:t},this.getFbPayUiCallback(e))}),fc(this,"getFbPayUiCallback",e=>function(t){let n;if(!t)throw new Error("Unexpected fb pay ui callback call, no argument");if(null!=t&&t.error_code)return So.disable(),void(1383010===t.error_code?rc(Ya.CANCEL):t.error_message&&t.error_message.length>=1?rc(Ya.FAIL,e.id,t.error_message):rc(Ya.FAIL,e.id,t.error_code));t.error_code||(console.log("ui pay check"),n={suid:re(!0),transaction_id:t.payment_id,pm_id:e.id,signed_request:t.signed_request,guid_receiver:e.guid_receiver},pc.post(window.app.config.fb.sync_buy_url,n,function(t){t&&!t.error?("completed"===t.response.status&&rc(Ya.SUCCESS,e.id),"initiated"===t.response.status&&rc(Ya.INITIATED,e.id)):rc(Ya.FAIL,e.id,666)}).fail(function(t,n,i){console.error(t,n),console.error(i),rc(Ya.INITIATED,e.id,"")}).always(function(){So.disable()}))}),this.appId=e}initWidgets(){console.log("init widgets stub")}async loadSdk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vc;try{await new Promise((t,n)=>{bo([e],()=>{void 0===window.FB?n(new Error("Failed to load fb sdk")):t()})})}catch(e){return mc+=1,mc<5?this.loadSdk():gc?Promise.reject(e):(gc=!0,this.loadSdk(wc))}}initSdk(){window.FB.init({appId:this.appId,xfbml:!0,version:window.app.config.fb.gapi_version,frictionlessRequests:!0,status:!0}),window.FB.Canvas.Prefetcher.setCollectionMode(window.FB.Canvas.Prefetcher.COLLECT_MANUAL)}logIn(){return new Promise((e,t)=>{window.FB.login(function(n){try{console.log(n),"connected"===n.status?e(!0):e(!1)}catch(e){t(e)}},{scope:window.app.config.fb.scope})})}async getAuthData(){return await window.FB.getAuthResponse()}async getIsLoggedIn(){const e=await this.getLoginStatus();return console.log("Facebook login status",e),"connected"===e}async getLoginStatus(){return new Promise((e,t)=>{window.FB.getLoginStatus(function(n){try{e(n.status)}catch(e){t(e)}},!0)})}getPermissions(){return new Promise((e,t)=>{window.FB.api("/me/permissions",n=>{try{e(n.data)}catch(e){t(e)}})})}async getPermission(e){const t=(await this.getPermissions()).find(t=>t.permission===e);return t&&"granted"===t.status}getUserData(){const e=window.app.config.fb.fields;return new Promise((t,n)=>{window.FB.api(`/me?fields=${e}`,e=>{try{var i,r;if(null!=e&&e.error)throw new Error(`Failed to get user fields: ${e.error.message}`);let n=0;null!=e&&e.gender&&(n="male"===e.gender?gt.MALE:gt.FEMALE);const o={age:e.birthday?parseInt((new Date).getFullYear())-parseInt(e.birthday.split("/")[2]):0,city:"",email:null!==(i=null==e?void 0:e.email)&&void 0!==i?i:null,country:window.app.config.fb.fb_country,first_name:e.first_name,full_name:`${e.first_name} ${e.last_name}`,gender:n,last_name:e.last_name,photo:null!==(r=null==e?void 0:e.picture.data.url)&&void 0!==r?r:window.app.config.default_picture};t(o)}catch(e){n(e)}})})}askPermission(e){return new Promise((t,n)=>{window.FB.login(function(i){try{t(i.authResponse.grantedScopes.includes(e))}catch(e){n(e)}},{auth_type:"rerequest",return_scopes:!0,scope:e})})}registerEventHandlers(){try{window.FB.Event.subscribe("edge.create",function(){console.log("page_liked"),window.app.user.isMember=!0,window.app.game_popup_close(r.FB_LIKE_PAGE)}),window.FB.Event.subscribe("edge.remove",function(){window.app.user.isMember=!1})}catch(e){window.Sentry.captureException(e),console.error(e)}let e;window.app.fb_purchase_info=function(e,t){try{return window.FB.AppEvents.logEvent(`${window.app.config.current_entry_point}_purchase_info`,null,{NAME:e,PCOUNT:t}),console.log("window.app.fb_purchase_info"),!0}catch(e){console.warn(`window.app.fb_purchase_info${e.message}`)}},window.app.fb_tutorial_complete=function(){try{return window.FB.AppEvents.logEvent(`${window.app.config.current_entry_point}_tutorial_complete`,null,{SUCCESS:1}),console.log("window.app.fb_tutorial_complete"),!0}catch(e){console.warn(`window.app.fb_tutorial_complete${e.message}`)}},window.app.fb_capitol_upgraded=function(e){try{return window.FB.AppEvents.logEvent(`${window.app.config.current_entry_point}_capitol_upgraded`,null,{LEVEL:e}),void console.log(`window.app.fb_capitol_upgraded level:${e}`)}catch(e){console.warn(`window.app.fb_capitol_upgraded${e.message}`)}},window.app.fb_remarketing_offer_taken=function(e,t){try{return window.FB.AppEvents.logEvent(`${window.app.config.current_entry_point}_remarketing_offer_taken`,null,{COUNT:e,REF:t}),console.log("window.app.fb_remarketing_offer_taken",e),!0}catch(e){console.warn(`window.app.fb_remarketing_offer_taken${e.message}`)}};try{-1!==window.app.config.ref.search(/_RM_/i)&&(e=1,pc.cookie("fb_rot")&&(e=pc.cookie("fb_rot",Number),e+=1),pc.cookie("fb_rot",e,{secure:!0}),window.app.fb_remarketing_offer_taken(e,window.app.config.ref))}catch(e){console.warn(e),window.Sentry.captureException(e)}pc(".js-header-invite-friend").on("click",async()=>{await this.getIsLoggedIn()&&yc.showInviteFriendDialog()}),pc("#fb_like_page").find(".js-close-button").on("click",function(){window.app.game_popup_close(r.FB_LIKE_PAGE)}),window.FB.Event.subscribe("xfbml.render",function(){yo.calculateResponsiveCenterSlot()})}static showInviteFriendDialog(){window.FB.ui({method:"apprequests",message:"Come play!"},function(e){console.log("apprequests",e)})}}function bc(){if(y.isBound(b.FB_ADAPTER))return y.get(b.FB_ADAPTER);const e=new yc(window.app.config.fb.oauth_app_id);return y.bind(b.FB_ADAPTER).toConstantValue(e),e}const Ec=ye.getPrefixedCopy("CMD_GET_FACEBOOK_ACCESS_TOKEN");class Sc extends Ni{constructor(e){super(Pi.SET_GOOGLE_ACCESS_TOKEN,e)}}var Tc=n(44436);class Ac{constructor(e){(function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(this,"config",void 0),this.config=e}init(){Tc(".gi").on("click",this.authenticateAndAuthorize.bind(this))}async authenticate(){return await this.requestAuthentication()}signIn(e){if(!e.access_token)throw new Error("Google SignIn credentials is not found");Hn($n(`${window.app.config.google.oauth_url}?access_token=${e.access_token}`))}async authenticateAndAuthorize(){const e=await this.requestAuthentication();this.signIn(e)}async requestAuthentication(){return new Promise((e,t)=>{try{window.google.accounts.oauth2.initTokenClient({callback:t=>e(t),client_id:this.config.client_id,scope:window.app.config.google.scope}).requestAccessToken()}catch(e){t(e)}})}}function Cc(){if(y.isBound(b.GOOGLE_SIGN_IN))return y.get(b.GOOGLE_SIGN_IN);const e=new Ac(window.app.config.google);return y.bind(b.GOOGLE_SIGN_IN).toConstantValue(e),e}const Ic=ye.getPrefixedCopy("CMD_GET_GOOGLE_ACCESS_TOKEN");class Oc extends Ni{constructor(e){super(Pi.SET_CONSENT_RESULT,{consent:null===e.consent?0:e.consent?1:2})}}let Nc=function(e){return e[e.TERMS_OF_SERVICE=1]="TERMS_OF_SERVICE",e[e.PRIVACY_POLICY=2]="PRIVACY_POLICY",e[e.PAYMENT_POLICY=3]="PAYMENT_POLICY",e[e.REFUND_POLICY=4]="REFUND_POLICY",e[e.EULA_POLICY=5]="EULA_POLICY",e}({});const Pc=new Map([[Nc.TERMS_OF_SERVICE,"terms_of_service"],[Nc.PRIVACY_POLICY,"privacy_policy"],[Nc.PAYMENT_POLICY,"payment_policy"],[Nc.REFUND_POLICY,"refund_policy"],[Nc.EULA_POLICY,"eula_policy"]]);class kc extends Ni{constructor(e){super(Pi.SET_CLIENT_NOTIFICATIONS_STATE,e)}}class Rc extends Ni{constructor(e){super(Pi.SET_CLIENT_NEW_NOTIFICATIONS_STATE,e)}}class Lc extends Ni{constructor(e){super(Pi.SET_CLIENT_NOTIFICATIONS_BROWSER_STATE,e)}}var xc=n(44436),Mc=n(44436);function Dc(e){const t=_n.getInstance();t.setMessage(e),t.setButtonText(C._n("ecommpay.button_to_retry")),t.show(),t.setCallback(()=>{t.hide()})}class jc{constructor(e){this.linkAuthMethodOut=e}async linkAuthMethod(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.linkAuthMethodOut.linkAuthMethod(e,t,n)}}function Uc(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Bc extends Error{constructor(e){super(e),Uc(this,"name",void 0),Uc(this,"stack",void 0),Object.setPrototypeOf(this,Bc.prototype)}}function Fc(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Gc extends Error{constructor(e){super(e),Fc(this,"name",void 0),Fc(this,"stack",void 0),Object.setPrototypeOf(this,Gc.prototype)}}class Vc{async linkAuthMethod(e,t,n){try{let i;switch(e){case Tn.EMAIL:i=de.LINK_AUTH_METHOD_EMAIL;break;case Tn.FB:i=de.LINK_AUTH_METHOD_FB;break;case Tn.GOOGLE:i=de.LINK_AUTH_METHOD_GOOGLE;break;case Tn.APPLE_ID:i=de.LINK_AUTH_METHOD_APPLE_ID;break;default:throw new Error("Unknown auth method")}const r=await ue.makeRequest(i,{authMethod:e,credentials:t,isBigReward:n,suid:Ce.getInstance().getSuid().toString(),token:Ce.getInstance().getAuthToken()},window.app.deviceIdentifier);return!("error"in r)||("error"in r?(console.error(r.error),5004===r.error.code?new Gc(r.error.message):new Bc(C._n("common_error"))):(console.error("Unexpected response",r),new Bc(C._n("common_error"))))}catch(e){return console.error(e),window.Sentry.captureException(e),new Bc(C._n("common_error"))}}}let Wc=function(e){return e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.AUTH_METHOD_ALREADY_LINKED=1]="AUTH_METHOD_ALREADY_LINKED",e[e.FAILED_TO_LINK=2]="FAILED_TO_LINK",e}({});class Hc extends Ni{constructor(e){super(Pi.FINISH_ACCOUNT_LINKING_REWARD,e)}}function $c(e,t){return e instanceof Bc?(console.error("Auth method is not linked",e),window.Sentry.captureException(e.message),On.hideAccountLoadingState(),On.showLinkError(e.message,t),void jl.getInstance().sendCommand(new Hc({isSuccess:!1,linkingError:Wc.FAILED_TO_LINK}))):e instanceof Gc?(console.error("Auth method is already linked. Canceled.",e),On.hideAccountLoadingState(),On.showLogoutBtnForWebGuest(),On.showLinkError(e.message,t),void jl.getInstance().sendCommand(new Hc({isSuccess:!1,linkingError:Wc.AUTH_METHOD_ALREADY_LINKED}))):(On.hideAccountLoadingState(),console.error("Unexpected unsuccessful result",e),window.Sentry.captureException(new Error("Unexpected unsuccessful link result")),On.showLinkError(C._n("common_error"),t),void jl.getInstance().sendCommand(new Hc({isSuccess:!1,linkingError:Wc.UNKNOWN_ERROR})))}async function qc(e,t,n){try{On.hideAccountError(),On.hideLinkError(),On.showAccountLoadingState();const i=new jc(new Vc),r=await i.linkAuthMethod(e,t,n);if(!0===r)return Ue.fireMarketing(ee.WEB_GUEST_HAS_SWITCHED_GP),On.hideAccountLoadingState(),On.hideGuestWarningIcon(),yo.showLogoutButton(),xn(),jl.getInstance().sendCommand(new Hc({isSuccess:!0})),!0;$c(r,e)}catch(t){console.error("Got exception",t),window.Sentry.captureException(`message: ${t.message} stack: ${t.stack}`),$c(t,e)}return!1}function zc(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Kc{constructor(){zc(this,"locks",void 0),this.locks={}}static getInstance(){return Kc.instance||(Kc.instance=new Kc),Kc.instance}hasLock(e){return!!this.locks[e]}setLock(e){return!this.hasLock(e)&&(this.locks[e]=!0,!0)}setTempLock(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return!!this.setLock(e)&&(setTimeout(()=>{this.releaseLock(e)},t),!0)}releaseLock(e){this.locks[e]&&delete this.locks[e]}}function Yc(){const e="fb:login",t=Kc.getInstance();if(t.setTempLock(e,5e3))try{!function(){let e;e=window.app.config.fb.oauth_url+window.location.search,e=$n(e),function(e){const t=`toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,width=600,height=600,left=${(Xa(window).width()-600)/2},top=${(Xa(window).height()-600)/2}`;window.open(e,"_blank",t)}(e)}()}catch(n){console.warn(n),t.releaseLock(e)}}zc(Kc,"instance",void 0);var Jc=function(e){return e.EMAIL="email",e.FB="fb",e.GOOGLE="google",e}(Jc||{}),Xc=n(44436);function Qc(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zc=function(e){return e.ONLINE="online",e.OFFLINE="offline",e}(Zc||{});class el{constructor(){Qc(this,"clientStatusBlock",void 0),this.clientStatusBlock=Xc("#player-simulated-status span")}static getInstance(){return void 0===el.instance&&(el.instance=new el),el.instance}setOnline(){this.clientStatusBlock.addClass("online").text(Zc.ONLINE)}setOffline(){this.clientStatusBlock.removeClass("online").text(Zc.OFFLINE)}}Qc(el,"instance",void 0);class tl extends Ni{constructor(e){super(Pi.SET_START_SHORT_DATA,e)}}const nl={[Ri.ANALYTICS_EVENT]:class{handle(e){}},[Ri.CITY_LEVEL_UP]:class{handle(e){sn.fireEvent(an.CITY_LEVEL_UP,e)}},[Ri.DONT_KILL_ME_PLS]:class{handle(){Lr.restartTimer()}},[Ri.EVENT_100_CLICKS]:class{handle(){sn.fireEvent(an.TUTORIAL_100_CLICKS)}},[Ri.EVENT_FIRST_BUY]:class{handle(e){sn.fireEvent(an.FIRST_BUY,{pmObject:e})}},[Ri.EVENT_PAYMENT_FINISHED]:class{handle(e){sn.fireEvent(an.PAYMENT_FINISHED,{paymentObject:e.payment})}},[Ri.EVENT_REBILL_BUY]:class{handle(e){sn.fireEvent(an.REBILL_BUY,{payment_object:e.payment})}},[Ri.EVENT_SERVER_LOGIN]:class{handle(){sn.fireEvent(an.SERVER_LOGIN),Tt.flushQueue()}},[Ri.EVENT_SUCCESS_BUY]:class{handle(e){sn.fireEvent(an.SUCCESS_BUY,{amount:e.value})}},[Ri.FB_CAPITOL_UPGRADED]:class{handle(e){"function"==typeof window.app.fb_capitol_upgraded?window.app.fb_capitol_upgraded(e.level):console.warn("No fb_capitol_upgraded handler, skipping")}},[Ri.FB_TUTORIAL_COMPLETE]:class{handle(){"function"==typeof window.app.fb_tutorial_complete?window.app.fb_tutorial_complete():console.warn("No fb_tutorial_complete handler, skipping")}},[Ri.GET_CONSENT_STATE]:class{handle(e){Ce.getInstance().getConsentState().then(e=>{jl.getInstance().sendCommand(new vo({consent:e}))})}},[Ri.GET_FACEBOOK_ACCESS_TOKEN]:class{async handle(){try{const e=bc();if(e.initSdk(),!await e.getIsLoggedIn()&&!await e.logIn())throw new Error("Failed to login to Facebook");const t=await e.getAuthData();if(!t||!t.accessToken)throw new Error("Failed to obtain Facebook access token");jl.getInstance().sendCommand(new _o({accessToken:t.accessToken}))}catch(e){Ec.error(e),window.Sentry.captureException(e),jl.getInstance().sendCommand(new ki({error:e instanceof Error?e.message:"Unknown error",method:Ri.GET_FACEBOOK_ACCESS_TOKEN}))}}},[Ri.GET_GOOGLE_ACCESS_TOKEN]:class{async handle(){try{const e=Cc(),t=await e.authenticate();if(!t||!t.access_token)throw new Error("Failed to obtain Google access token");jl.getInstance().sendCommand(new Sc({accessToken:t.access_token}))}catch(e){Ic.error(e),window.Sentry.captureException(e),jl.getInstance().sendCommand(new ki({error:e instanceof Error?e.message:"Unknown error",method:Ri.GET_GOOGLE_ACCESS_TOKEN}))}}},[Ri.GET_MAINTENANCE_DATA]:class{handle(){try{fo.getStateData().then(e=>{jl.getInstance().sendCommand(new go({...e,cluster:Mi()}))}).catch(e=>{jl.getInstance().sendCommand(new ki({error:e.message,method:Ri.GET_MAINTENANCE_DATA}))})}catch(e){mo.error(e),window.Sentry.captureException(e)}}},[Ri.GET_START_DATA]:class{handle(){Di(!1)}},[Ri.GET_START_SHORT_DATA]:class{handle(){const e={accountId:Ce.getInstance().getAccountId(),accountToken:Ce.getInstance().getAuthToken(),browser:un(),clusterConfig:Mi(),deviceId:window.app.deviceIdentifier,entryPoint:window.app.config.current_entry_point,locale:window.app.config.locale,restApiUrl:window.app.restApiUrl,sig:window.app.config.sig,suid:re(),suidSimulate:window.app.config.suid_simulate};jl.getInstance().sendCommand(new tl(e))}},[Ri.HERO_LEVEL_UP]:class{handle(e){sn.fireEvent(an.HERO_LEVEL_UP,e)}},[Ri.MARCHES_9]:class{handle(){sn.fireEvent(an.MARCHES_9)}},[Ri.MONSTER_LVL_5]:class{handle(){sn.fireEvent(an.MONSTER_LVL_5)}},[Ri.OPEN_POLICY_WINDOW]:class{handle(e){let t="";t=Pc.get(e.policyType),window.app.game_popup(t)}},[Ri.PAYMENT_WINDOW_ICON_CLICK]:class{handle(){Ir.info("app.paymentWindowIconClick")}},[Ri.PAY]:class{handle(e){const t="string"==typeof(n=Object.assign(new wr,e.pmObject))?Gi(Cr).validateSync(n,i,undefined):Gi(Cr).validateSync(n,i);var n,i;if(t.length>0){const e=t.map(e=>Object.values(e.constraints||{})).flat();throw new Error(`Validation failed: ${JSON.stringify(e)}`)}window.app.pay(e.pmObject),Bi()}},[Ri.SEND_TUTOR_COMPLETED]:class{handle(){!function(){const e=[g.SITE2];ie()||"function"!=typeof window.fbq||-1===e.indexOf(window.app.config.current_entry_point)||Ue.fireMarketing(ee.TUTOR_FINISH)}()}},[Ri.SET_CLIPBOARD_CONTENT]:class{handle(e){const t="clipboardElement";let n=po(`#${t}`);if(console.log("setting clipboard content",e.textContent),ho.isSupported()){if(!n.length){const e=po("<button>");e.text("Test clipboard"),e.attr("id",t),e.css("display","none"),po("body").append(e),n=e}n.attr("data-clipboard-text",e.textContent),n.attr("data-clipboard-action","copy"),new ho(`#${t}`).on("error",e=>{console.error(e),jl.getInstance().sendCommand(new ki({method:Ri.SET_CLIPBOARD_CONTENT,error:e.message}))}),n.click()}else jl.getInstance().sendCommand(new ki({method:Ri.SET_CLIPBOARD_CONTENT,error:"Copying to clipboard is not supported on your client"}))}},[Ri.SET_CONSENT_STATE]:class{handle(e){Ce.getInstance().setConsentState(e.email,e.consent,nt.POPUP).then(e=>{jl.getInstance().sendCommand(new Oc({consent:e}))})}},[Ri.SET_PAYER_INFO]:class{handle(e){var t,n,i;t=e.name,n=e.totalValue,i=e.paymentCohort,window.app.user.gameNickname=t,window.app.user.donate=n,window.app.user.hasPayment=!!n,window.app.user.paymentCohort=i,"function"==typeof window.app.fb_purchase_info&&window.app.fb_purchase_info(t,n)}},[Ri.SET_PRELOADER_HINT]:class{handle(e){wt.getInstance().setHintText(e.text)}},[Ri.SET_PRELOADER_PROGRESS]:class{handle(e){Pr.fireClientLoadingProgressEvent(e.percents)}},[Ri.SET_REGISTRATION_REF]:class{handle(e){}},[Ri.SET_TUTOR_FINISHED]:class{handle(e){}},[Ri.SHOW_CLIENT]:class{handle(){const e=jl.getInstance().getLoadingState()===Dl.LOADED;!0===Kr.getIsVideoInProgress()&&e||(Kr.forceClose(),wt.getInstance().hide(),wt.getInstance().removePreloader(),jl.show(),this.setupDeathTimer(),lo())}setupDeathTimer(){y.get(b.FEATURE_FLAG_LOADER).get(X.CLIENT_DEATH_TIMER_ENABLED).isOn()||-1===location.search.search("death_timer=1")?(sn.fireEvent(an.WEBGL_FINISH_LOADING),Lr.init(),jl.getInstance().sendCommand(new xr),setInterval(()=>{jl.getInstance().sendCommand(new xr)},1e4)):console.warn("death timer disabled")}},[Ri.UNITS_TRAIN_SILVER_10000]:class{handle(){sn.fireEvent(an.UNITS_TRAIN_SILVER_10000)}},[Ri.VALOR_MONSTER_1000]:class{handle(){sn.fireEvent(an.VALOR_MONSTER_1000)}},[Ri.VALOR_MONSTER_1000_PER_MARCH]:class{handle(){sn.fireEvent(an.VALOR_MONSTER_1000_PER_MARCH)}},[Ri.OPEN_POLLING_WINDOW]:class{handle(e){(function(e){const t=l.getPopupOpenConfig(r.POLLING_WINDOW);jl.hide(),ec("#polling_window_popup .popup_body > *").remove();const n=e.params;let i;if(function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(n)){var o;const e=JSON.parse(n);let t=null!==(o=e[window.app.config.locale])&&void 0!==o?o:e.en_US;e.base_link&&(t=e.base_link),window.pollFinish=tc,i=Qa(t,860,650,!1)}else i=Qa(n,860,650,!1);ec("#polling_window_popup .popup_body").append(i),window.app.popup(t),ec("body").on("click","#polling_window_popup .close_button",()=>{window.app.game_popup_close()})})(e),Bi()}},[Ri.GET_NOTIFICATIONS_STATE]:class{handle(){nn.isWebPushSubscribed().then(e=>{const t=e;jl.getInstance().sendCommand(new kc({isAccessPush:t}))}).catch(e=>{window.Sentry.captureException(e),jl.getInstance().sendCommand(new kc({isAccessPush:!1}))})}},[Ri.SET_NOTIFICATIONS_STATE]:class{handle(e){this.setNotificationState(e.isAccessPush)}async setNotificationState(e){try{let t;if(e){if(!nn.hasBrowserGrantedPushes())return console.error("Browser has disabled web-push notifications"),void jl.getInstance().sendCommand(new Rc({isSuccess:!1}));await qt.isAccountExists()?await qt.setAccountState(e):await qt.saveUserToken("provider"),t=await nn.registerForProviderExternally()}else t=await nn.unregisterFromWebPush();jl.getInstance().sendCommand(new Rc({isSuccess:t}))}catch(e){jl.getInstance().sendCommand(new Rc({isSuccess:!1})),console.error("Provider fault on setNotificationState",e),window.Sentry.captureException(e)}}},[Ri.GET_NOTIFICATIONS_BROWSER_STATE]:class{handle(){const e=nn.hasBrowserGrantedPushes();console.log(`Notifications in browser: ${e}`),jl.getInstance().sendCommand(new Lc({isAccessBrowserPush:`${e}`}))}},[Ri.SET_PRELOADER_BACKGROUND]:class{handle(e){wt.getInstance().setBackground(e.linkage)}},[Ri.EVENT_STORAGE_OPENED]:class{handle(){Mc("#minimized_chat").css("display","none")}},[Ri.EVENT_STORAGE_CLOSED]:class{handle(){const e=xc("#minimized_chat");window.messageCount>0&&e.css("display","block")}},[Ri.EVENT_BANK_OPENED]:class{handle(){uo(Qr.HIDE),window.helpshiftWebChatState.hideChatIcon=!0,window.HelpshiftWidget("close")}},[Ri.EVENT_BANK_CLOSED]:class{handle(){window.helpshiftWebChatState.messageCount>0&&(window.helpshiftWebChatState.hideChatIcon=!1,uo(Qr.SHOW))}},[Ri.SWITCH_CURRENT_CHARACTER]:class{async handle(e){var t;const n=Ce.getInstance(),i=await Nn.getLinkedAccountsInfo(n.getSuid().toString(),n.getAuthToken());if("error"in i)throw Dc(C._n("common_error")),new Error("Failed to get linked accounts");const r=null===(t=i.tethers)||void 0===t?void 0:t.find(t=>t.suid===e.suid);if(!r)throw Dc(C._n("common_error")),new Error("Suid not owned");!function(e,t){const n=Gn(e.token,t);try{J.isSite()?(Sn(),Hn(n)):window.top.location.href=`${n}&state=switchAccount`}catch(e){!function(e){const t=_n.getInstance();t.setMessage(e),t.setButtonText(C._n("ecommpay.button_to_retry")),t.show(),t.setCallback(()=>{t.hide()})}(C._n("common_error")),window.Sentry.captureException(e)}}(r,e.suid)}},[Ri.SET_GAME_CLIENT_SIZE]:class{async handle(e){jl.setClientSize(e.widthPercent,e.heightPercent)}},[Ri.START_ACCOUNT_LINKING_REWARD]:class{async handle(e){switch(console.log(e),e.linkingMethod){case Jc.EMAIL:this.handleEmailLinking(e.isBigReward);break;case Jc.FB:this.handleFbLinking(e.isBigReward);break;case Jc.GOOGLE:this.handleGoogleLinking(e.isBigReward);break;default:throw new Error("Unknown linking method")}}async handleEmailLinking(e){await xn(),On.setIsBigReward(e)}async handleFbLinking(e){await async function(e){const t=bc();if(t.initSdk(),!await t.getIsLoggedIn()){const e=await t.logIn();if(!e)return console.error("Can't login in Facebook",e),window.Sentry.captureException("Can't login in Facebook"),void On.hideAccountLoadingState()}const n=await t.getAuthData();if(!n)return console.error("Facebook data is null",n),window.Sentry.captureException("Facebook data is null"),void On.hideAccountLoadingState();qc(Tn.FB,{access_token:n.accessToken},e)}(e)}async handleGoogleLinking(e){await async function(e){On.hideSocialSwitchAccountError(),On.showAccountLoadingState();const t=Cc(),n=await t.authenticate();qc(Tn.GOOGLE,n,e)}(e)}},[Ri.UPDATE_SIMULATED_PLAYER_STATUS]:class{handle(e){return e.isOnline?el.getInstance().setOnline():el.getInstance().setOffline()}}},il=ye.getPrefixedCopy("WEBGL_TO_JS");class rl{expose(){il.info("Exposing interface"),window.app.webglInterface=function(e){let t,n,i;il.info("ACCEPTED COMMAND RAW",e);try{n=JSON.parse(e),il.info("PARSED COMMAND",n),i=n.params?JSON.parse(n.params):{},t=function(e){const t=nl[e];if(!t)throw new Error(`No handler found for web command ${e}`);return new t}(n.method),il.info("handler found",n),t.handle(i)}catch(e){const t=n&&n.method?n.method:"N/A";il.error(`WebGlJsInterface error (${t})`,e),window.Sentry.captureException(e)}}}}class ol{static show(){throw new Error("Not implemented")}static hide(){throw new Error("Not implemented")}static embed(){throw new Error("Not implemented")}static setClientSize(e,t){throw new Error("Not implemented")}static stretchClient(){throw new Error("Not implemented")}static getClientToJsInterface(){throw new Error("Not implemented")}static getJsToClientInterface(){throw new Error("Not implemented")}static clientApiReady(){throw new Error("Not implemented")}}class sl extends Ni{constructor(e){super(Pi.PASTE_CLIPBOARD_CONTENT,e)}}const al={initialPercent:0,compilingEndPercent:20,clientLoadingStart:20,clientLoadingEnd:100},cl={initialPercent:56,compilingEndPercent:66,clientLoadingStart:66,clientLoadingEnd:100};function ll(){return y.get(b.FEATURE_FLAG_LOADER).get(X.SHOW_REAL_LOADING_PERCENTS).isOn()?al:cl}function ul(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let dl=[.25,.5,.75,1];class hl{constructor(){ul(this,"loadingStartTimer",void 0),ul(this,"startTs",void 0)}static async sendNewUserPrecompileStageFact(e){await Ci.getInstance().isNewProgress()&&fn(e,0,0)}enableUnityLoaderMonitor(){var e=this;const t=window.UnityLoader.Job.schedule;window.UnityLoader.Job.schedule=(n,i,r,o,s)=>{Ii().then(()=>{fn(`schedule${i}`,this.getMillisSinceStart(),this.getStartTs())});let a=o;try{a=function(){try{Ii().then(()=>{fn(i,e.getMillisSinceStart(),e.getStartTs())})}catch(e){console.error(e)}o(...arguments)}}catch(e){console.error(e)}return t(n,i,r,a,s)}}startTimer(){this.loadingStartTimer=new Date}getMillisSinceStart(){return Number(new Date)-Number(this.loadingStartTimer)}getStartTs(){return this.startTs||(this.startTs=Math.floor(Date.now()/1e3)),this.startTs}onClientLoadingProgressChanged(e){pn(e,this.getMillisSinceStart(),this.getStartTs())}onCompatibilityCheckFailed(){pn(-2,this.getMillisSinceStart(),this.getStartTs())}onCompileProgressChange(e){if(dl.length){const t=dl.filter(t=>t<=e);dl=dl.filter(e=>!t.includes(e)),t.forEach(e=>{pn(e*al.compilingEndPercent,this.getMillisSinceStart(),this.getStartTs())})}}onPreStart(e){pn(al.initialPercent,this.getMillisSinceStart(),this.getStartTs())}}function pl(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class fl{static enable(){this.connection=new WebSocket("wss://total-battle-13525799.uc.r.appspot.com/"),this.connection.addEventListener("open",()=>{ye.debug("Created assisting connection"),this.pingTimer=window.setInterval(()=>{this.connection.readyState!==this.connection.OPEN&&this.disable(),this.connection.send("ping message")},1e3*(3+3*Math.random()))}),this.connection.addEventListener("close",()=>{ye.debug("Closed assisting connection")}),this.connection.addEventListener("error",e=>{ye.error("Assisting connection error",e)})}static disable(){window.clearInterval(this.pingTimer),this.connection.close(1e3,"loading finished")}}pl(fl,"connection",void 0),pl(fl,"pingTimer",void 0);var gl=n(44436);class ml{static show(){gl("#download_client_screen").show()}}var vl=n(44436);class _l{static show(){vl("#no_flash_screen").show()}}class wl extends Ni{constructor(){super(Pi.ENABLE_SOUND)}}class yl{onCompatibilityCheckFailed(){}onPreStart(e){wt.getInstance().setLoadingProgress(e)}onClientLoadingProgressChanged(e){const t=ll(),n=t.clientLoadingEnd-t.clientLoadingStart,i=t.clientLoadingStart+e/100*n;wt.getInstance().setLoadingProgress(i)}onCompileProgressChange(e){const t=ll(),n=t.initialPercent+e*(t.compilingEndPercent-t.initialPercent);wt.getInstance().setLoadingProgress(n)}}class bl{static getTroubleshootingLink(){let e="ru";return["en","fr","de","it","pl","ko","ru","tr","pt","es","ar"].includes(window.app.config.language)&&(e=window.app.config.language),`https://scorewarrior.helpshift.com/a/total-battle/?l=${e}&s=technical-issues&f=issues-with-webgl`}static getNotSupportedMessage(){let e=C._n("no_browser_webgl_support");const t=`<a class="font2 color2" href="${bl.getTroubleshootingLink()}">FAQ</a>`;return e+=`<br>${C._n("check_faq_for_webgl_issues",{link:t})}`,e}}function El(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Sl{constructor(e){El(this,"isOrganic",void 0),El(this,"refState",void 0),this.refState=e;const t=Fn(`?${this.refState.refQueryString}`,!0);this.isOrganic="ads"!==t.query.ads_group}getIsOrganic(){return this.isOrganic}}class Tl{async getState(){return await Ii(),new Sl(window.app.getGameStartDataResponse.human_data.refState)}}class Al{constructor(){!function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"hasEnabled",!1)}onCompatibilityCheckFailed(){}onPreStart(e){}onClientLoadingProgressChanged(e){this.hasEnabled||(jl.getInstance().sendCommand(new wl),this.hasEnabled=!0)}onCompileProgressChange(e){}}class Cl extends Ni{constructor(e){super(Pi.SET_TAB_STATE,e)}}var Il=n(44436);function Ol(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Nl=ye.getPrefixedCopy("WEBGL_CLIENT"),Pl="#gameContainer",kl=`${Pl} #unityCanvas`;class Rl extends ol{static async embed(){const e=wt.getInstance(),t=await this.getShouldShowNewgamePreloader(),n=jl.getInstance();if(Ii().then(()=>{hl.sendNewUserPrecompileStageFact("getUserInstall")}).finally(async()=>{Rl.showPreloaderBg(),await Ci.getInstance().isNewProgress()&&e.showFirstSessionWarning()}),t?(Tt.sendEvent(cn.client_preloader_video_initiating),await Kr.showVideoPreloader(()=>{n.getLoadingState()===Dl.LOADED?(jl.show(),n.sendCommand(new wl)):(Pr.addLoadingProgressHandler(new Al),e.show(),e.showPreloader())}).catch(e=>{window.Sentry.captureException(e),console.error("Failed to show video preloader",e)})):(e.show(),e.showPreloader()),await this.provideClientDependencies(),e.setLoadingProgress(ll().initialPercent),hl.sendNewUserPrecompileStageFact("clientEmbedStart"),Rl.setListeners(),!Rl.getIsWebglSupported())return e.hide(),void _l.show();if(!window.app.isDesktop)return void ml.show();sn.fireEvent(an.WEBGL_START_LOADING),Pr.addLoadingProgressHandler(new yl);const i=new hl;Pr.addLoadingProgressHandler(i),await Rl.clientLoaderReady(),hl.sendNewUserPrecompileStageFact("unityLoaderReady");try{fl.enable()}catch(e){ye.error(e),window.Sentry.captureException(e)}i.startTimer(),hl.sendNewUserPrecompileStageFact("instantiateStarting"),Pr.firePreStartEvent(al.initialPercent),this.applyFbGamepadBugFix(),window.createUnityInstance(Il(kl).get(0),this.getInstantiateConfig(),function(e){n.setLoadingState(Dl.LOADING),Pr.fireCompilingProgressEvent(parseFloat(e))}).then(e=>{window.gameInstance=e}).catch(Rl.handleCreateUnityInstanceError),hl.sendNewUserPrecompileStageFact("instantiateStarted"),Il(window).on("resize",()=>{Rl.stretchClient()}),Il(window).trigger("resize"),Rl.stretchClient(),Rl.hide(),n.setLoadingState(Dl.EMBEDDED)}static applyFbGamepadBugFix(){navigator.getGamepads=null}static async getShouldShowNewgamePreloader(){const e=await Ci.getInstance().isNewProgress().catch(()=>!1),t=new Tl;let n=!1;try{n=(await t.getState()).getIsOrganic()}catch(e){window.Sentry.captureException(e),n=!0}return e&&n}static async provideClientDependencies(){window.WebglSendbirdApi=await async function(){const e=await n.e(138).then(n.bind(n,43176)),{ConnectionHandler:t}=e,{GroupChannelModule:i,GroupChannelHandler:r}=await n.e(138).then(n.bind(n,60403));return{ConnectionHandler:t,GroupChannelHandler:r,GroupChannelModule:i,SendbirdChat:e.default}}()}static getInstantiateConfig(){return{dataUrl:`${window.app.webglBaseUrl}Build/${this.getBuildJsonFilename()}.data`,frameworkUrl:`${window.app.webglBaseUrl}Build/${this.getBuildJsonFilename()}.framework.js`,codeUrl:`${window.app.webglBaseUrl}Build/${this.getBuildJsonFilename()}.wasm`,streamingAssetsUrl:`${window.app.webglBaseUrl}StreamingAssets`,companyName:"Scorewarrior",productName:"Triumph",productVersion:"7205",preInit:[()=>{gn(dn.PRE_INIT_STARTED)}],preRun:[()=>{gn(dn.PRE_RUN_STARTED)}],postRun:[()=>{gn(dn.POST_RUN_STARTED)}],onRuntimeInitialized:()=>{gn(dn.RUNTIME_INITIALIZED)}}}static getWebglBuildLink(){return`${window.app.webglBaseUrl}Build/${this.getBuildJsonFilename()}.json`}static show(){Il(Pl).css("left","0px"),Rl.stretchClient()}static hide(){Il(Pl).css("left","-999999px")}static clientApiReady(){let e=!1;return new Promise(t=>{let n=0;const i=setInterval(()=>{if(n>20?Nl.warning(`Waiting for webgl too long, try ${n}`):Nl.info(`waiting for webgl api to be ready, try ${n}`),(window.createUnityInstance||window.gameInstance&&window.gameInstance.SendMessage)&&(Nl.info(`WebGL Api ready check number ${n}`),jl.getInstance().sendCommand(new Wa({enabled:1})).then(()=>{Nl.info(`WebGL Api ready at ${n} try`),clearInterval(i),t()}).catch(()=>{Nl.warning("Api not yet ready")})),n>100&&!e){const t="`Game instance init error: Max await tries exceeded (over 50 seconds)";window.Sentry.captureException(new Error(t)),e=!0}n+=1},500)})}static clientLoaderReady(){let e=!1;return new Promise(t=>{let n=0;const i=setInterval(()=>{if(n>20?Nl.warning(`Waiting for webgl too long, try ${n}`):Nl.info(`waiting for unity loader to be ready, try ${n}`),window.createUnityInstance&&(Nl.info(`Unity loader ready ready at ${n} try`),clearInterval(i),t()),n>100&&!e){const t="Unity loader init error: Max await tries exceeded (over 50 seconds)";window.Sentry.captureException(new Error(t)),e=!0}n+=1},500)})}static getBuildJsonFilename(){return"Triumph"}static showPreloaderBg(){wt.getInstance().showPreloader(),Hr()}static setClientSize(e,t){this.widthPercent=e,this.heightPercent=t,this.stretchClient()}static stretchClient(){const e=Il(Pl),t=e.find("canvas");let n=e.height(),i=e.width();if(n%2==1&&(n-=1),i%2==1&&(i-=1),i=i*this.widthPercent/100,n=n*this.heightPercent/100,t.width()===i&&t.height()===n)return void console.info("Game container already has correct size");t.css({height:`${this.heightPercent}%`,left:(100-this.widthPercent)/2+"%",margin:"auto",position:"relative",top:(100-this.heightPercent)/2+"%",width:`${this.widthPercent}%`});const r=window.devicePixelRatio,o=r?i*r:i,s=r?n*r:n;t.width()===o&&t.height()===s||(t[0].width=o,t[0].height=s,(t[0].getContext("webgl2")||t[0].getContext("webgl")).viewport(0,0,o,s))}static setListeners(){const e=Il(Pl).find("canvas");Il(document).on("paste",e=>{Il(".popup").is(":visible")||function(e,t){if(navigator.clipboard&&navigator.clipboard.readText)navigator.clipboard.readText().then(t);else if(e.originalEvent&&e.originalEvent.clipboardData)t(e.originalEvent.clipboardData.getData("text"));else if(e.clipboardData)t(e.clipboardData.getData("text/plain"));else{if(!window.clipboardData)throw new Error("Pasting capture is unavailable");t(window.clipboardData.getData("Text"))}}(e,e=>{jl.getInstance().sendCommand(new sl({content:e}))})}),e.on("dragstart",e=>(console.log("DRAG START"),e.preventDefault(),!1)),sn.one(an.WEBGL_START_LOADING,()=>{Ue.fireClient(ne.WEBGL_START_LOADING)}),Il(document).on("notEnoughMemory",()=>{Rl.showErrorPopup(C._n("not_enough_memory"),"OK",()=>{Nl.error("Not enough memory")})}),sn.one(an.WEBGL_FINISH_LOADING,()=>{Ue.fireClient(ne.WEBGL_FINISH_LOADING),function(){const e=Yr("#minimized_chat");parseInt(Yr("#minimized_chat #unread_chat_messages_count").text())>0&&e.show()}(),fl.disable()}),Il(window).on("blur",()=>{var e,t;(null===(e=window)||void 0===e||null===(t=e.gameInstance)||void 0===t?void 0:t.SendMessage)&&jl.getInstance().sendCommand(new Cl({active:!1}))}),Il(window).on("focus",()=>{var e,t;(null===(e=window)||void 0===e||null===(t=e.gameInstance)||void 0===t?void 0:t.SendMessage)&&jl.getInstance().sendCommand(new Cl({active:!0}))})}static getIsWebglSupported(){return window.app.config.user_browser.name.toLowerCase()!==Bo.IE}static handleCreateUnityInstanceError(e){!async function(e){const t=new Map([["Your browser does not support WebGL","webl_not_supported"],["Your browser does not support WebAssembly","wasm_not_supported"]]).get(e)||(/out of memory/i.test(e)?"out_of_memory":"other"),n=[window.app.config.current_entry_point,un(),String(he.getInstance().getSuid()),t];Tt.sendEvent(cn.client_create_unity_instance_error,1,[],n)}(e),/not support WebGL/i.test(e)?(Pr.fireCompatibilityCheckFailedEvent(),Rl.showErrorPopup(bl.getNotSupportedMessage(),"OK",()=>{Nl.error("WebGL Compatibility check failed")})):(window.Sentry.captureException(new Error(`createUnityInstance failed: ${e}`)),Rl.showErrorPopup("Some error occured during game start, please try again or contact support","OK",()=>{Nl.error(e)}))}static showErrorPopup(e,t,n){const i=_n.getInstance(),r={callback:n,text:t};i.setTitle("WebGL error"),i.setHtmlMessage(e),i.setButtonText(r.text),i.setCallback(r.callback),i.show()}}function Ll(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ol(Rl,"heightPercent",100),Ol(Rl,"widthPercent",100);const xl=ye.getPrefixedCopy("GAME_CLIENT");let Ml=!1,Dl=function(e){return e[e.FAILED=0]="FAILED",e[e.ABSENT=1]="ABSENT",e[e.EMBEDDED=2]="EMBEDDED",e[e.LOADING=3]="LOADING",e[e.LOADED=4]="LOADED",e}({});class jl extends ol{constructor(){super(),Ll(this,"clientToJsInterface",void 0),Ll(this,"jsToClientInterface",void 0),Ll(this,"loadingState",Dl.ABSENT),this.clientToJsInterface=jl.getClientToJsInterface(),this.clientToJsInterface.expose(),this.jsToClientInterface=jl.getJsToClientInterface(),xl.info("Constructor complete")}static getInstance(){return void 0===jl.instance&&(jl.instance=new jl),jl.instance}static clientApiReady(){if(!0===Ml)return new Promise(e=>e());const e=jl.getCurrentClient().clientApiReady();return e.then(()=>{xl.info("saving api ready state"),Ml=!0}),e}static getCurrentClient(){return Rl}static embed(){window.app.isDesktop?this.getCurrentClient().embed():ml.show()}static show(){this.getCurrentClient().show()}static hide(){this.getCurrentClient().hide()}static setClientSize(e,t){this.getCurrentClient().setClientSize(e,t)}static stretchClient(){this.getCurrentClient().stretchClient()}static getClientToJsInterface(){return new rl}static getJsToClientInterface(){return new dt}setLoadingState(e){this.loadingState=e}getLoadingState(){return this.loadingState}async sendCommand(e){let t;return xl.info("sending client command",e),t=this.jsToClientInterface.sendCommand(e),xl.info(`Command ${e.getName()} result`,t),t}openAccountWindow(){this.jsToClientInterface.openAccountWindow()}}Ll(jl,"instance",void 0);class Ul extends Error{constructor(e){super(e),this.message=e,this.name="JsClickError",Object.setPrototypeOf(this,Ul.prototype)}}var Bl=n(44436);function Fl(){const e=Bl(this),t=Bl.extend({},e.data()),n=void 0!==t.link,i=void 0!==t.handler;if(n)window.location.href=T.getNoLangUrl(e.data("link"));else if(i){const e=t.handler;delete t.handler;try{window.app[e](t)}catch(n){const i=new Ul(`Call ${e} handler error: ${n.message}`);i.stack=n.stack,console.error(i,e,t),window.Sentry.captureException(i)}}if(!e.hasClass("js-click-no-block"))return!1}Bl(()=>{Bl("body").on("click",".js-click, .js-click-no-block",Fl)});var Gl=n(44436);function Vl(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Wl="loading-animator";class Hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gl("body");Vl(this,"loader",void 0),Vl(this,"loading",void 0),this.loading=!1;let t=e.find(`#${Wl}`);console.debug("loader",t),0===t.length&&(t=this.getLoader(),t.hide(),console.debug("loader",t),e.append(t)),this.loader=t}isLoading(){return this.loading}startLoading(){return console.debug("startLoading",this.loader),!this.isLoading()&&(this.loader.show(),this.loading=!0,!0)}stopLoading(){this.loader.hide(),this.loading=!1}getLoader(){const e=`<div>\n            <div class="loading_animator" id="${Wl}"><div class="loader-large"></div></div>\n        </div>`,t=Gl.parseHTML(e);return Gl(t).find(`#${Wl}`)}}var $l=n(44436);function ql(e){void 0!==e&&void 0!==e.hideclass?$l(`.${e.hideclass}`).hide():$l(".popup,.popup-no-style").hide(),Ke.isGamePage()&&jl.clientApiReady().then(()=>{$l(".popup,.popup-no-style").is(":visible")||jl.getInstance().sendCommand(new Wa({enabled:1})),window.app.game_popup_close()}),$l(window).off("resize.popupAlign")}function zl(){window.app.popup_opened=!1}function Kl(e){const t=e.outerHeight(),n=e.outerWidth();if(void 0===t||void 0===n)throw new Error("popupHeight or popupWidth is undefined");const i=(window.innerHeight-t)/2+42,r=parseInt(i,10);e.css("margin-top",`${r}px`),e.css("margin-left",`-${n/2}px`)}zl(),window.app.popup=function e(t){const n=t.id,i=$l(`#${n}`);return!i.length&&t.url?(function(t){const n=new Hl($l("body"));n.startLoading(),(async()=>{if(void 0===t.url)throw new Error("params.url is undefined");const i=await ae.A.get(T.getFullLangUrl(t.url));$l("body").append(i.data),function(e,t){e.on("click",".js-click, .js-click-no-block",Fl),e.on("click",".js-close-button",()=>{ql(t)}),e.find(".scrollbar-rail").scrollbar()}($l(`#${t.id}`),t),n.stopLoading(),e(t)})()}(t),!0):(function(e,t){const n=void 0!==t.hideclass&&t.hideclass,i=void 0!==t.alignoff&&t.alignoff,r=void 0!==t.autoposoff&&t.autoposoff;Ke.isGamePage()&&jl.clientApiReady().then(()=>{e.is(":visible")&&jl.getInstance().sendCommand(new Wa({enabled:0}))}),n&&$l(`.${n}`).hide(),i||(Kl(e),$l(window).on("resize.popupAlign",()=>{Kl(e)}));const o=$l(".js-close-button",e);if((r||void 0!==o&&!o.data("autoposoff"))&&!window.app.config.rtl_lang){const t=e.width(),n=o.width();void 0!==t&&void 0!==n&&o.css("margin-left",t-n)}if(0!==parseInt(e.data("blackout"))){const e=$l("body").height();if(void 0===e)throw new Error("bodyHeight is undefined");$l("#blackout").css("height",e).show()}}(i,t),i.show(),function(e,t){(void 0===t.firstInputFocus||t.firstInputFocus)&&e.find("input:visible").first().trigger("focus")}(i,t),!1)},window.app.closePopups=ql,window.app.closeAndOpenPopup=function(e){window.app.closePopups(e),$l(window).off("resize.popupAlign"),window.app.popup(e)},window.app.game_popup=function(e){const t=l.getPopupOpenConfig(e);window.app.popup_opened=!0,$l("#download_client_screen").hide(),$l("#game_frame").addClass("bg_pattern"),Ke.isGamePage()&&(jl.getInstance().getLoadingState()===Dl.LOADED?(wt.getInstance().hide(),jl.hide()):wt.getInstance().hide()),window.app.popup(t)},window.app.game_popup_close=function(){zl(),Ke.isGamePage()&&jl.clientApiReady().then(()=>{$l(".popup,.popup-no-style").is(":visible")||jl.getInstance().sendCommand(new Wa({enabled:1}))}),window.app.isDesktop?($l(".popup,.popup-no-style").hide(),$l("#support_success").hide(),$l("#game_frame").removeClass("bg_pattern"),jl.getInstance().getLoadingState()===Dl.LOADED?jl.show():wt.getInstance().show()):ml.show()},n(18062),n(49981);var Yl=n(44436);class Jl{static init(){Yl(document).on("click",".popup-manager-trigger",this.handleTrigger)}static handleTrigger(){if("openSingle"===Yl(this).data("action")){const e=Yl(this).data("target");Jl.openSingle(e)}}static closeAll(){Yl(".popup-window").removeAttr("data-visible"),x.getTooltipElement().hide(),Yl(".error").removeClass("error")}static openSingle(e){Jl.closeAll(),Yl(`.popup-window[data-popup-id="${e}"]`).attr("data-visible","true"),qe.stretch()}}var Xl=n(44436);const Ql=new Set;var Zl,eu=n(44436);function tu(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class nu{constructor(e){var t,n,i;tu(this,"_isOn",!1),tu(this,"startTs",null),tu(this,"finishTs",null),e&&(this._isOn=null!==(t=null==e?void 0:e.isOn)&&void 0!==t&&t,this.startTs=null!==(n=null==e?void 0:e.startTs)&&void 0!==n?n:null,this.finishTs=null!==(i=null==e?void 0:e.finishTs)&&void 0!==i?i:null)}isOn(){if(!0!==this._isOn)return!1;const e=Y(Date.now());return!(this.startTs&&e<this.startTs||this.finishTs&&e>this.finishTs)}}let iu=(0,w._G)()(Zl=class{constructor(e){(function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(this,"config",void 0),this.config=e}get(e){var t;let n;return this.config&&"object"==typeof(null==this||null===(t=this.config)||void 0===t?void 0:t[e])&&(n=this.config[e]),new nu(n)}})||Zl;class ru{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(this,"previousPath",[]),this.previousPath=e}get(e,t){const n=[...this.previousPath,t];if(e[t])return"object"==typeof e[t]?new Proxy(e[t],new ru(n)):e[t];console.warn(`Trying to reference undefined config field ${n.join(".")}`)}}function ou(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class su{static async libIsLoaded(){return this.loadingPromise||(this.loadingPromise=n.e(657).then(n.t.bind(n,64657,23)).then(e=>{this.lib=e.default})),this.loadingPromise}static evaluate(e){return su.lib(e).score}}ou(su,"loadingPromise",void 0),ou(su,"lib",void 0);var au=n(44436);class cu{constructor(e){(function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(this,"widgetRoot",void 0),this.widgetRoot=e}setPasswordStrength(e){const t=C._n(`password_strength.${e}`);this.widgetRoot.find(".password-strength-widget__text").text(t);const n=this.widgetRoot.find(".password-strength-widget__meter");for(const e of new Array(5).keys())n.removeClass(cu.getMeterStrengthClass(e));n.addClass(cu.getMeterStrengthClass(e))}static getMeterStrengthClass(e){return`password-strength-widget__meter_${e}`}}function lu(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class uu{constructor(e){lu(this,"config",void 0),lu(this,"accessToken",void 0),this.config=e}init(){window.onload=()=>{window.google.accounts.id.initialize({client_id:this.config.client_id,prompt_parent_id:"google-one-tap__container",callback:this.handleCredentials.bind(this)}),window.google.accounts.id.prompt()}}getToken(){return this.accessToken?void 0:this.accessToken}handleCredentials(e){if(!e.credential)throw new Error("ID Token is not exist for user");Hn($n(`${window.app.config.google.oauth_one_tap_url}?idtoken=${e.credential}`))}}function du(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class hu{constructor(){let{oneLinkURL:e,pidKeysList:t=[],pidStaticValue:n=null,campaignKeysList:i=[],campaignStaticValue:r=null,pidOverrideList:o=[],gclIdParam:s="af_sub5",skipList:a=["facebook"]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(du(this,"oneLinkURL",void 0),du(this,"pidOverrideList",void 0),du(this,"gclIdParam",void 0),du(this,"pidKeysList",void 0),du(this,"pidStaticValue",void 0),du(this,"campaignKeysList",void 0),du(this,"campaignStaticValue",void 0),du(this,"skipList",void 0),du(this,"campaign",void 0),du(this,"mediaSource",void 0),du(this,"afParams",void 0),console.debug("Constructing OneLink URL generator"),void 0===e||"string"!=typeof e||""===e)return console.error("OneLinkUrlGenerator: oneLinkURL arg invalid"),null;this.oneLinkURL=e,this.pidOverrideList=o,this.gclIdParam=s,this.pidKeysList=t,this.pidStaticValue=n,this.campaignKeysList=i,this.campaignStaticValue=r,this.skipList=a,this.campaign=function(e,t){for(let t of e)if(pu(t))return pu(t);return null!==t?t:document.getElementsByTagName("title")[0]?document.getElementsByTagName("title")[0].innerText:"unknown"}(this.campaignKeysList,this.campaignStaticValue),this.mediaSource=function(e,t,n){let i=null;for(let t of e)null!==t&&pu(t)&&(i=pu(t));return null!==i?n.hasOwnProperty(i)&&(i=n[i]):i=t,i}(this.pidKeysList,this.pidStaticValue,this.pidOverrideList),this.afParams={af_js_web:"true"}}generateUrl(){if(null===this.mediaSource)return console.debug("No valid pid value was found. URL will no be changed"),null;if(pu("af_redirect"))return console.debug("This user comes from AppsFlyer by redirection and is ready to be attributed. \nKeep direct app store links."),null;if(this.isSkipped())return console.debug("This URL is marked for skipping. The script will return null"),null;let e=this.mediaSource;const t=pu("gclid");if(t){this.afParams[this.gclIdParam]=t,console.debug("This user comes from Google AdWords");const e=pu("keyword");e&&(this.afParams.af_keywords=e,console.debug("There is a keyword associated with the ad"))}else console.debug("This user comes from SRN or custom network ");const n=`${this.oneLinkURL}?pid=${e}&c=${this.campaign}${function(e){let t="";for(let n of Object.keys(e))console.debug(n+"->"+e[n]),null!==e[n]&&(t+=`&${n}=${e[n]}`);return t}(this.afParams)}`;return console.debug(`Generated OneLink URL ${n}`),n}isSkipped(){if(document.referrer&&""!==document.referrer)for(let e=0;e<this.skipList.length;e++){const t=this.skipList[e];if(document.referrer.toLowerCase().includes(t.toLowerCase()))return console.debug("Skipping the script. HTTP referrer has: "+t),!0}return!1}setDeepLinkValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fu(this.afParams,"deep_link_value",e,t)}setChannel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fu(this.afParams,"af_channel",e,t)}setAdset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fu(this.afParams,"af_adset",e,t)}setAd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fu(this.afParams,"af_ad",e,t)}setAfSub1(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fu(this.afParams,"af_sub1",e,t)}setAfSub2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fu(this.afParams,"af_sub2",e,t)}setAfSub3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fu(this.afParams,"af_sub3",e,t)}setAfSub4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fu(this.afParams,"af_sub4",e,t)}setAfSub5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fu(this.afParams,"af_sub5",e,t)}setCustomParameter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;fu(this.afParams,t,e,n)}}function pu(e){const t=window.location.href,n=e.replace(/[\[\]]/g,"\\$&"),i=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function fu(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=pu(n);r?(e[t]=r,console.debug(`${n} found. ${t} = ${r}`)):null!==i?(e[t]=i,console.debug(`${n} not found. ${t} = ${i}`)):console.debug(`${n} not found and newParamValue is null. Skipping.`)}var gu=n(44436);function mu(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class vu{constructor(e,t){mu(this,"onelink",void 0),mu(this,"baseUrl",void 0),mu(this,"userAgent",void 0),this.onelink=new hu({oneLinkURL:e,pidKeysList:["prtr"],campaignKeysList:["cpn"],gclIdParam:"gclid"}),this.baseUrl=e,this.userAgent=t}setDefaultOpts(){const e=gu.cookie("_fbc"),t=gu.cookie("_fbp");this.onelink.setAfSub1("userAgent",[encodeURI(this.userAgent)]),this.onelink.setAfSub3("fbc",[e]),this.onelink.setAfSub4("fbp",[t]),this.onelink.setAdset("af_adset"),this.onelink.setAd("af_ad"),this.onelink.setChannel("af_channel"),this.onelink.setCustomParameter("af_c_id","af_c_id"),this.onelink.setCustomParameter("adgroup_id","adgroup_id"),this.onelink.setCustomParameter("fbclid","fbclid"),this.onelink.setCustomParameter("af_adset_id","af_adset_id")}generate(){return this.onelink.generateUrl()||this.baseUrl}}var _u=n(44436);class wu{constructor(e){(function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(this,"appConfig",void 0),this.appConfig=e}registerHandlers(){window.app.redirectToStoreVieOneLink=this.redirectToStoreVieOneLink.bind(this)}redirectToStoreVieOneLink(e){_u(".error",e.form).removeClass("error");const t=e.form,n=_u("input[name=email]",t),i=n.val(),r=e.caller.data("tooltipdirection"),o=R[r],s=n.parents(".white_input");if(!D(i)){const e=x.getTooltipElement();return s.addClass("error"),e.showTooltipElement(n,o,C._n("wrong_data")),!1}const a=new vu(this.appConfig.landings.onelink_url,navigator.userAgent);return a.setDefaultOpts(),location.href=a.generate(),!1}}function yu(){window.AppleID.auth.signIn().then(e=>{Hn(function(e){const t=Fn(window.app.config.apple_id.redirect_uri,!0);return t.set("query",{...t.query,id_token:e}),t.toString()}(e.authorization.id_token))})}var bu=n(44436);function Eu(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Su{constructor(e,t){Eu(this,"form",void 0),Eu(this,"showTooltipOnLeft",void 0),this.form=e,this.showTooltipOnLeft="right"===t.toLowerCase()}static fromForm(e,t){return new Su(e,t)}showEmailError(e){const t=this.getEmailInputParent();t.addClass("error"),i(t,this.showTooltipOnLeft,e)}showPasswordError(e){const t=this.getPasswordInputParent();t.addClass("error"),i(t,this.showTooltipOnLeft,e)}showSubmitButtonError(e){const t=this.getSubmitButton();i(t,this.showTooltipOnLeft,e)}show2FaError(e){const t=this.getAuth2FaCodeInputParent();t.addClass("error"),i(t,this.showTooltipOnLeft,e)}show2FaForm(){this.getEmailInputParent().hide(),this.getPasswordInputParent().hide(),this.hideSocialLoginButtons(),bu(".login-2fa-info",this.form).show(),bu(".forgot-pass-button",this.form).hide(),this.getAuth2FaCodeInputParent().show(),qe.stretch(),bu(".forgot-pass-button",this.form).one("click",()=>{this.returnToLoginForm()})}returnToLoginForm(){this.getEmailInputParent().show(),this.getPasswordInputParent().show(),this.showSocialLoginButtons(),bu(".login-2fa-info",this.form).hide(),bu(".forgot-pass-button",this.form).show(),this.getAuth2FaCodeInputParent().hide(),qe.stretch()}hideErrors(){this.getEmailInputParent().removeClass("error"),this.getPasswordInputParent().removeClass("error")}hideSocialLoginButtons(){bu(".social-login-buttons-block",this.form).hide()}showSocialLoginButtons(){bu(".social-login-buttons-block",this.form).show()}getEmailInputParent(){return bu("input[name=email]",this.form).parent()}getPasswordInputParent(){return bu("input[name=password]",this.form).parent()}getAuth2FaCodeInputParent(){return bu("input[name=login_2fa_code]",this.form).parent()}getSubmitButton(){return bu("button[type=submit]",this.form).parent()}}var Tu=function(e){return e[e.COMMON_ERROR=0]="COMMON_ERROR",e[e.NOT_REGISTERED=1]="NOT_REGISTERED",e[e.WRONG_PASSWORD=2]="WRONG_PASSWORD",e[e.REQUIRED_2FA=3]="REQUIRED_2FA",e[e.INVALID_2FA=4]="INVALID_2FA",e[e.USER_MUST_CHANGE_PASSWORD=11]="USER_MUST_CHANGE_PASSWORD",e[e.EMAIL_EMPTY=6]="EMAIL_EMPTY",e[e.PASS_EMPTY=7]="PASS_EMPTY",e[e.TO_BE_DELETED=5006]="TO_BE_DELETED",e[e.ACCOUNT_IS_TRANSFERRED=410]="ACCOUNT_IS_TRANSFERRED",e}(Tu||{});function Au(e){const t=e.response,n=Su.fromForm(e.form,e.caller.data("tooltipdirection"));if(n.hideErrors(),t.error){if([Tu.EMAIL_EMPTY].includes(t.error.code))return void n.showEmailError(t.error.message);if([Tu.PASS_EMPTY,Tu.WRONG_PASSWORD].includes(t.error.code))return void n.showPasswordError(t.error.message);if([Tu.REQUIRED_2FA,Tu.INVALID_2FA].includes(t.error.code))return n.show2FaForm(),void n.show2FaError(t.error.message);if([Tu.TO_BE_DELETED].includes(t.error.code))return void window.app.handleAccountToBeDeleted(t.error.data.id,t.error.data.token,t.error.data.deleteAt);n.showSubmitButtonError(t.error.message)}else location.reload()}async function Cu(e){const t=e.find("input[type=email]").val().trim(),n=e.find("input[type=password]").val().trim();try{const e=await ue.makeRequest(de.GET_TOKEN_EMAIL,{email:t,password:n,current_entry_point:window.app.config.current_entry_point,locale:window.app.config.locale},window.app.deviceIdentifier);if("error"in e)return e.error.code===Tu.ACCOUNT_IS_TRANSFERRED&&window.app.handleAccountTransferredWindow(),{error:{code:e.error.code,message:Iu(e.error.code),data:e.error.data}};let i=Gn(e.tether.token,e.tether.suid);return i=$n(i),await ae.A.get(i),{}}catch(e){return window.Sentry.captureException(e),{error:{code:Tu.COMMON_ERROR,message:C._n("errors.common_error")}}}}function Iu(e){let t;switch(e){case Tu.NOT_REGISTERED:t="login.email_not_exists";break;case Tu.WRONG_PASSWORD:t="errors.pass_wrong";break;case Tu.REQUIRED_2FA:t="login.2fa_required_sending";break;case Tu.INVALID_2FA:t="login.2fa_invalid_code";break;case Tu.USER_MUST_CHANGE_PASSWORD:t="login.must_change_password";break;case Tu.EMAIL_EMPTY:t="errors.email_empty";break;case Tu.PASS_EMPTY:t="errors.pass_empty";break;case Tu.TO_BE_DELETED:t="errors.account_to_be_deleted";break;case Tu.ACCOUNT_IS_TRANSFERRED:t="errors.account_is_transferred";break;default:t="error.operation_failed"}return C._n(t)}function Ou(){const e=_n.getInstance();return e.setMessage(C._n("acccount_is_transferred")),e.setButtonText("Ok"),e.show(),e.setCallback(()=>{e.hide()}),!0}let Nu=function(e){return e[e.WRONG_OTP=9]="WRONG_OTP",e[e.NOT_REGISTERED=17]="NOT_REGISTERED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.WRONG_EMAIL=16]="WRONG_EMAIL",e[e.EMAIL_EXISTS=18]="EMAIL_EXISTS",e[e.BAD_REQUEST=400]="BAD_REQUEST",e}({});function Pu(e,t){var n;let i;switch(e){case Nu.WRONG_EMAIL:i="errors.email_wrong";break;case Nu.EMAIL_EXISTS:i="errors.already_reg";break;case Nu.WRONG_OTP:i="otp_request_code.not_full";break;case Nu.BAD_REQUEST:i=null!==(n=t.error)&&void 0!==n?n:"errors.common_error";break;case Nu.TOO_MANY_REQUESTS:i="errors.too_many_requests";break;case Nu.NOT_REGISTERED:default:i="errors.common_error"}return C._n(i)}var ku=n(44436);function Ru(e){return ku(e).closest(".js-main")}let Lu,xu=null;const Mu={allowResend:0,isResend:!1};let Du;function ju(){const e=(new Date).getTime(),t=Mu.allowResend?Mu.allowResend-e:0;if(t<0)return clearInterval(Du),ku(".otp-resend-info").html(C._n("accounting.OTP_window.resend_code")),void ku(".otp-resend-info a").on("click",function(e){e.preventDefault(),async function(){ku(".pin-input").val(""),Mu.isResend=!0,Mu.allowResend=(new Date).getTime()+6e4,ju();const e={email:xu,locale:window.app.config.locale,current_entry_point:window.app.config.current_entry_point},t=Ai(),n=await t.requestEmailOtpReg(window.app.deviceIdentifier,e);"error"in n?(Mu.allowResend=0,ju(),x.getTooltipElement().showTooltipElement(ku(".otp-resend-info a"),R.RIGHT,n.error.message)):(Du&&clearInterval(Du),Du=window.setInterval(()=>{ju()},1e3))}()});!function(e){const t=Math.floor(e%36e5/6e4);let n=Math.ceil(e%6e4/1e3);n<10&&(n=`0${n}`);let i="";i=Mu.isResend?"accounting.OTP_window.code_resend_resend_code_after":"accounting.OTP_window.resend_code_after",ku(".otp-resend-info").html(C._n(i,{minutes:`${t}`,seconds:`${n}`}))}(t)}function Uu(e){const t=e.form,n=ku(".js-terms_agree",t),i=ku("input[name=email]",t).val(),r=e.caller.data("tooltipdirection"),o=R[r],s=ku("input[name=email]",e.form),a=s.parents(".white_input");if(ku(".error",e.form).removeClass("error"),n.length&&!n.hasClass("checked"))return Lu.showTooltipElement(n,o,C._n("agree_error"),!0),!1;if(!D(i))return a.addClass("error"),Lu.showTooltipElement(s,o,C._n("wrong_data")),!1;xu=i;const c={email:i,locale:window.app.config.locale,current_entry_point:window.app.config.current_entry_point};return Ai().requestEmailOtpReg(window.app.deviceIdentifier,c).then(()=>{var t,n,i;ku(".otp-login-info",e.form).html(C._n("accounting.OTP_window.description",{value:xu}));const r=null!==(t=null===(n=window.app.config)||void 0===n||null===(i=n.otp)||void 0===i?void 0:i.delay)&&void 0!==t?t:6e4;Mu.allowResend=(new Date).getTime()+r,ju(),Du&&clearInterval(Du),Du=window.setInterval(()=>{ju()},1e3),ku(".pin-input",e.form).val(""),new Qe(window.location).send("2");const o=Ru(e.caller);o.removeClass("step1 step2"),o.addClass("step2"),e.caller.removeAttr("disabled"),qe.stretch()}).catch(e=>{"RpcReceivedError"===e.name?(a.addClass("error"),Lu.showTooltipElement(s,o,Pu(e.code,e.data))):(a.addClass("error"),Lu.showTooltipElement(s,o,C._n("errors.common_error")))}),!1}async function Bu(e){ku(".error",e.form).removeClass("error");const t=ku(".pin-input",e.form).toArray().map(e=>e.value).join("").toUpperCase(),n={email:xu,otp:t,locale:window.app.config.locale,current_entry_point:window.app.config.current_entry_point};try{const t=Ai(),i=await t.emailOtpRegistration(window.app.deviceIdentifier,n);if("error"in i){let t;const n=ku(".pin-container",e.form);t=e.form.parents(".forms2").length?R.RIGHT:R.LEFT;const r=i.error;x.getTooltipElement().showTooltipElement(n,t,Pu(r.code,i)),n.addClass("error")}else{window.app.user_huid=i.accountId,Ue.fireMarketing(te.EMAIL_REG_SUCCESS),He(e.caller);let t=Gn(null==i?void 0:i.tether.token,null==i?void 0:i.tether.suid);t=$n(t),Hn(t)}}catch(t){console.error(t),window.Sentry.captureException(t);const n=ku(".pin-container",e.form);x.getTooltipElement().showTooltipElement(n,R.RIGHT,C._n("errors.common_error"))}}var Fu=n(44436);function Gu(){Fu(document).scrollTop(0)}function Vu(){void 0!==window.Didomi?window.Didomi.preferences.show():console.warn("Didomi is not defined. Cookie settings cannot be opened.")}y.bind(b.FEATURE_FLAG_LOADER).toConstantValue(new iu(window.app.config.featureFlags)),y.bind(b.CONFIG).toConstantValue(new Proxy(window.app.config,new ru)),y.bind(b.FEE_SERVICE).toConstantValue(new Le(new be,new Ie)),y.bind(b.VAT_SERVICE).toConstantValue(new Me(new be,new Ie)),ae.A.interceptors.request.use(function(e){return e.headers["X-Requested-With"]="XMLHttpRequest",e.headers["X-Language"]=window.app.config.language,e}),ae.A.interceptors.response.use(function(e){return e},function(e){throw e}),eu.ajaxSetup({beforeSend:function(e){e.setRequestHeader("X-Language",window.app.config.language)},complete:function(e){return e}}),window.Sentry.configureScope(e=>{e.addEventProcessor(e=>(function(e){var t;const n=null==e||null===(t=e.extra)||void 0===t?void 0:t.__serialized__;return"idpiframe_initialization_failed"===(null==n?void 0:n.error)}(e)&&function(e){var t;const n=null==e||null===(t=e.extra)||void 0===t?void 0:t.__serialized__,i=e.exception.values[0];i.type="GoogleApiError",i.value=`${null==n?void 0:n.details} (${null==n?void 0:n.error})`,i.mechanism.synthetic=!1,i.mechanism.type="onerror"}(e),new Promise(t=>t(e)))),e.addEventProcessor(e=>{var t,n,i;const r=null===(t=e.exception)||void 0===t||null===(n=t.values)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.value;return r?/allocate memory/i.test(r)?(async function(){const e=[window.app.config.current_entry_point,un(),String(he.getInstance().getSuid())];Tt.sendEvent(cn.client_memory_allocation_error,1,[],e)}(),null):/enlarge memory arrays/i.test(r)?(async function(){const e=[window.app.config.current_entry_point,un(),String(he.getInstance().getSuid())];Tt.sendEvent(cn.client_enlarge_memory_arrays_error,1,[],e)}(),null):/(memory access out of bounds|Out of bounds memory access)/i.test(r)?(async function(){const e=[window.app.config.current_entry_point,un(),String(he.getInstance().getSuid())];Tt.sendEvent(cn.client_memory_access_out_of_bounds_error,1,[],e)}(),null):/(out of memory)/i.test(r)?(async function(){const e=[window.app.config.current_entry_point,un(),String(he.getInstance().getSuid())];Tt.sendEvent(cn.client_out_of_memory_error,1,[],e)}(),Xl(document).trigger("notEnoughMemory"),null):new Promise(t=>t(e)):new Promise(t=>t(e))}),e.addEventProcessor(e=>{var t,n,i;if(!e.exception)return e;const r=null===(t=e.exception)||void 0===t||null===(n=t.values)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.value;return/^[0-9]+$/.test(r)?(console.warn("Filtering meaningless numeric messages"),null):e}),e.addEventProcessor(e=>{var t,n,i;const r=null===(t=e.exception)||void 0===t||null===(n=t.values)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.value;return Ql.has(r)?(console.warn("Filtering repeated error message"),null):(Ql.add(r),e)})}),y.get(b.FEATURE_FLAG_LOADER).get(X.WEB_CHAT_SUPPORT).isOn()?Yr("#support_button").on("click",co):function(){const e=Yr("#support_ticket");Yr("#support_button").on("click",Zr),Yr("#support_success .js-close-button,#support_success .support_but").on("click",eo),Yr("#support_ticket_body.scrollbar-rail").scrollbar(),e.find(".js-close-button").on("click",to),Yr(document).on("click",so),e.find(".select").on("click",no),e.find(".option").on("click",ro),e.find("form").on("submit",oo),e.find(".support_appeal").on("click",io),e.find(".support_deleted_personal_data").on("click",ao)}(),Fu(function(){Jl.init(),qe.stretch(),Fu(window).on("resize",()=>{qe.stretch()}),window.app.login_form_handler=Au,window.app.login_send_request_handler=Cu,window.location.hash&&function(){let e;const t=o.SITE_INDEX;e=window.location.hash.slice(1).split("?"),e=e[0],-1!==t.indexOf(e)&&(window.app.closePopups(),window.app.popup(l.getPopupOpenConfig(e)),Jl.openSingle(e))}(),Fu(".popup .js-close-button").on("click",function(){window.app.closePopups(),Jl.openSingle(r.REGISTRATION)}),Fu(".popup2 .js-close-button").on("click",function(){window.app.closePopups({hideclass:"popup2"})}),Fu(".js-toggle-checked").on("click",function(){Fu(this).toggleClass("checked")}),Fu("[data-go-top]").on("click",Gu),function(){let e;au(document).on("keyup",'input[type="password"].js-pass-strength-meter',function(){window.clearTimeout(e),e=window.setTimeout(async()=>{const e=au(this).parents("form").find(".password-strength-widget");if(e.length){await su.libIsLoaded();const t=new cu(e),n=String(au(this).val()),i=su.evaluate(n);t.setPasswordStrength(i)}},200)})}(),Sn(),function(){try{window.app.fb_login=Yc}catch(e){console.warn("fb not initialized",e)}}(),window.app.isSite1||function(){if(y.get(b.FEATURE_FLAG_LOADER).get(X.WEB_APPLE_ID_LOGIN).isOn())try{window.AppleID.auth.init({clientId:window.app.config.apple_id.client_id,nonce:window.app.deviceIdentifier,redirectURI:window.app.config.apple_id.redirect_uri,scope:"email",state:"Initial user authentication request",usePopup:!0}),window.app.apple_id_login=yu}catch(e){console.warn("appleId not initialized",e)}}(),Cc().init(),!window.app.config.landings.enableGoogleOneTap&&J.isLanding()||![g.SITE,g.SITE2].includes(window.app.config.current_entry_point)||new uu(window.app.config.google).init(),Fu("#carousel").Cloud9Carousel({buttonLeft:Fu(".navigate-right"),buttonRight:Fu(".navigate-left"),frontItemClass:"active",itemClass:"slide",yOrigin:0,yRadius:-24}),Fu(".seo-index-layout__feedback").lightSlider({adaptiveHeight:window.app.isMobile,item:1,nextHtml:"<div class='seo-index-layout__navigate-right'></div>",prevHtml:"<div class='seo-index-layout__navigate-left'></div>"}),window.app.handleAccountTransferredWindow=Ou,ku(function(){Lu=x.getTooltipElement(),ku(".js-close-button-reg").on("click",function(){const e=Ru(this);e.removeClass("step1 step2"),e.addClass("step1"),qe.stretch()}),ku(".js-form .button-back").on("click",function(){const e=Ru(this);e.removeClass("step1 step2"),e.addClass("step1"),qe.stretch()})}),window.app.registrationWithOtpStep1=Uu,window.app.registrationWithOtpStep2=Bu,Hr(),Fu("video").on("load loadedmetadata",()=>{Hr()}),J.isLanding()&&new wu(window.app.config).registerHandlers()});var Wu=n(44436);Wu(function(){Wu.urlParam=function(e){const t=new RegExp(`[?&]${e}=([^&#]*)`,"i").exec(window.location.href);return null!=t&&(t[1]||!1)},Wu(".ornament_popup .scrollbar-rail").scrollbar(),window.app.openCookieSettings=Vu});var Hu=n(44436);let $u=!1;Fe.registerAfterSendHandler("restore_form_handler",function(e){const t=e.response;let n=R.RIGHT;const r=Hu("input[name=email]",e.form).parent();if(t.error)n=e.form.parents(".forms2").length?R.RIGHT:R.LEFT,i(r,n,t.error.message),r.addClass("error");else{const n=Hu(".js-close-button",e.form.parent()),i=Hu(e.form).find(".restore-form__restore-button");Hu(".js-response",e.form).text(t.message),n.bind("click.restoreReset",function(){Hu(".js-response",e.form).text(C._n("restore_pass")),n.unbind("click.restoreReset")}),r.removeClass("error"),$u=!0,i.text(C._n("ecommpay.button_to_retry")).hide(),e.form.parents(".forms2").length&&i.addClass("t-size-13"),setTimeout(()=>{$u=!1,i.show()},3e4)}}),Fe.registerBeforeSendHandler("before_restore_form",function(e){if($u){const t=Hu("input[name=email]",e.form).parent();let n;return console.log(e.caller),n=e.form.parents(".forms2").length?R.RIGHT:R.LEFT,i(t,n,C._n("restore_form.wait_30")),!1}return!0}),Fe.registerSendRequestHandler("restore_form_send_request",function(e){return t={email:Hu(e).find("input[name=email]").val().toString().trim(),locale:window.app.config.locale},ue.makeRequest(de.RESET_EMAIL_PASSWORD,t,window.app.deviceIdentifier);var t});class qu{constructor(e){(function(e,t,n){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(this,"mailingUser",void 0),this.mailingUser=e}async auth(){try{const e=await ue.makeRequest(de.GET_TOKEN_BY_MAILING_TOKEN,{locale:this.mailingUser.getLocale(),entryPoint:this.mailingUser.getEntryPoint(),mailingToken:this.mailingUser.getMailingToken(),suid:this.mailingUser.getSuid(),generatedAt:this.mailingUser.getGeneratedAt()},this.mailingUser.getDeviceId());if("error"in e)throw new Error(e.error.message);let t=Gn(e.tether.token,e.tether.suid);t=$n(t),Hn(t)}catch(e){window.Sentry.captureException(`Got exception on mailing login ${JSON.stringify(e)}`)}}}let zu=function(e){return e.TOKEN="mailing-token",e.SUID="suid",e.PROVIDER_ACTION="provider-auth",e.GENERATED_AT="generatedAt",e.GROUP_BY="groupBy",e}({});function Ku(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Yu{constructor(e,t,n){Ku(this,"deviceId",void 0),Ku(this,"mailingToken",void 0),Ku(this,"suid",void 0),Ku(this,"entryPoint",void 0),Ku(this,"locale",void 0),Ku(this,"generatedAt",void 0),this.deviceId=e,this.locale=t.locale,this.entryPoint=t.current_entry_point,this.mailingToken=n.getQueryParam(zu.TOKEN),this.suid=n.getQueryParam(zu.SUID),this.generatedAt=n.getQueryParam(zu.GENERATED_AT)}getGeneratedAt(){return this.generatedAt}getDeviceId(){return this.deviceId}getEntryPoint(){return this.entryPoint}getLocale(){return this.locale}getMailingToken(){return this.mailingToken}getSuid(){return this.suid}}function Ju(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Xu{constructor(e,t,n){Ju(this,"mailingToken",void 0),Ju(this,"suid",void 0),Ju(this,"generatedAt",void 0),Ju(this,"url",void 0),Ju(this,"config",void 0),Ju(this,"session",void 0),this.config=e,this.mailingToken=t.getQueryParam(zu.TOKEN),this.suid=t.getQueryParam(zu.SUID),this.generatedAt=t.getQueryParam(zu.GENERATED_AT),this.url=t,this.session=n}build(){return this.isMailingUser()?new Yu(this.session.getDeviceId(),this.config,this.url):null}isMailingUser(){return!!(this.suid&&this.mailingToken&&this.url.getQueryParam(zu.PROVIDER_ACTION)&&this.generatedAt)}}var Qu=n(44436);const Zu={accountId:0,deleteAt:0,token:""};let ed;function td(e,t,n){Zu.accountId=e,Zu.token=t,Zu.deleteAt=1e3*n,Qu(`.popup-window[data-popup-id="${r.CANCEL_ACCOUNT_DELETION}"]`).attr("data-visible","true"),nd(),ed&&clearInterval(ed),ed=window.setInterval(()=>{nd()},1e3)}function nd(){const e=(new Date).getTime(),t=Zu.deleteAt-e;if(t<0)return clearInterval(ed),void id();!function(e){const t=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5);let i=Math.ceil(e%36e5/6e4);i<10&&(i=`0${i}`),document.getElementById("delete_message").innerHTML=C._n("client.accounting.deletion.waiting.message",{name:`${Zu.accountId}`,time:`${t}d ${n}:${i}`})}(t)}function id(){Qu(`.popup-window[data-popup-id="${r.CANCEL_ACCOUNT_DELETION}"]`).attr("data-visible","false")}function rd(e){return ue.makeRequest(de.REQUEST_EMAIL_OTP_AUTH,e,window.app.deviceIdentifier)}var od=n(44436);let sd=null;function ad(e){const t=od("input[name=email]",e.form),n=t.parent();let i;return 0===t.length||0===t.val().toString().length?(i=e.form.parents(".forms2").length?R.RIGHT:R.LEFT,x.getTooltipElement().showTooltipElement(n,i,C._n("errors.email_empty")),!1):!(cd.allowResend&&cd.allowResend>(new Date).getTime()&&(i=e.form.parents(".forms2").length?R.RIGHT:R.LEFT,x.getTooltipElement().showTooltipElement(n,i,C._n("otp_request_code.wait_30")),1))}const cd={allowResend:0,isResend:!1};let ld;function ud(){const e=(new Date).getTime(),t=cd.allowResend?cd.allowResend-e:0;if(t<0)return clearInterval(ld),od(".otp-resend-info").html(C._n("accounting.OTP_window.resend_code")),void od(".otp-resend-info a").on("click",function(e){e.preventDefault(),async function(){od(".pin-input").val(""),cd.isResend=!0,cd.allowResend=(new Date).getTime()+3e4,ud();const e={email:sd,locale:window.app.config.locale,current_entry_point:window.app.config.current_entry_point},t=await rd(e);"error"in t?(cd.allowResend=0,ud(),x.getTooltipElement().showTooltipElement(od(".otp-resend-info a"),R.RIGHT,t.error.message)):(ld&&clearInterval(ld),ld=window.setInterval(()=>{ud()},1e3))}()});!function(e){const t=Math.floor(e/dd);let n=Math.ceil(e%dd/hd);n<10&&(n=`0${n}`);let i="";i=cd.isResend?"accounting.OTP_window.code_resend_resend_code_after":"accounting.OTP_window.resend_code_after",od(".otp-resend-info").html(C._n(i,{minutes:`${t}`,seconds:`${n}`}))}(t)}const dd=6e4,hd=1e3;function pd(e){const t=e.response;let n=R.RIGHT;const i=od("input[name=email]",e.form).parent();if("error"in t)n=e.form.parents(".forms2").length?R.RIGHT:R.LEFT,x.getTooltipElement().showTooltipElement(i,n,t.error.message),i.addClass("error");else{var r,o,s;od(".otp-login-info").html(C._n("accounting.OTP_window.description",{value:sd}));const t=null!==(r=null===(o=window.app.config)||void 0===o||null===(s=o.otp)||void 0===s?void 0:s.delay)&&void 0!==r?r:6e4;cd.allowResend=(new Date).getTime()+t,ud(),ld&&clearInterval(ld),ld=window.setInterval(()=>{ud()},1e3),window.app.closeAndOpenPopup({hideclass:"popup2",alignoff:!0,id:e.caller[0].dataset.id}),od(".pin-input").val(""),Jl.openSingle("otp_email_login")}}function fd(e){const t=od(e).find("input[name=email]").val().toString().trim(),n={email:t,locale:window.app.config.locale,current_entry_point:window.app.config.current_entry_point};return sd=t,rd(n)}function gd(e){if(6!==od(".pin-input",e.form).toArray().map(e=>e.value).join("").length){const t=od(".pin-container",e.form);let n;return n=e.form.parents(".forms2").length?R.RIGHT:R.LEFT,x.getTooltipElement().showTooltipElement(t,n,C._n("otp_request_code.not_full")),!1}return!0}function md(e){const t=e.response;let n=R.RIGHT;const i=od(".pin-container",e.form);if("error"in t)n=e.form.parents(".forms2").length?R.RIGHT:R.LEFT,x.getTooltipElement().showTooltipElement(i,n,13===(null==t?void 0:t.error.code)?C._n("otp_confirm.wrong_otp"):t.error.message),i.addClass("error");else{let e=Gn(null==t?void 0:t.tether.token,null==t?void 0:t.tether.suid);e=$n(e),Hn(e)}}function vd(e){const t=od(".pin-input",e).toArray().map(e=>e.value).join("").toUpperCase();sd||(window.app.closeAndOpenPopup({hideclass:"popup2",alignoff:!0,id:"otp_request_code2"}),Jl.openSingle("otp_request_code"));return n={email:sd,otp:t,locale:window.app.config.locale,current_entry_point:window.app.config.current_entry_point},ue.makeRequest(de.CONFIRM_EMAIL_OTP_AUTH,n,window.app.deviceIdentifier);var n}async function _d(e){var t,n;try{var i;const r=await Q.getConfidenceScore(),o=(null!==(i=e.find("input[type=email]").val())&&void 0!==i?i:"").trim(),s=e.find("[name=state]").val(),a=e.find("[name=lp]").val(),c={confidence:r,csrftoken:e.find("[name=csrftoken]").val(),email:o,lp:a,receive_consent:e.find("[name=receive_consent]").prop("checked")?"on":"off",state:s};switch(Number(a)){case 4:const i=(null!==(t=e.find("input[type=email_confirm]").val())&&void 0!==t?t:"").trim();c.email_confirm=i;break;case 2:break;default:const r=(null!==(n=e.find("input[type=password]").val())&&void 0!==n?n:"").trim();c.password=r}return await async function(e){try{const t=await async function(){try{const e=Fn(window.location.href,!0);return(await ae.A.get(T.getNoLangUrl("marketing/getData/"),{params:e.query})).data}catch(e){return console.error("Error fetching marketing data: ",e),{}}}(),n=Ai();let i;switch(Number(e.lp)){case 4:i=await n.registrationWithConfirmation(window.app.deviceIdentifier,e.email,e.email_confirm,window.app.config.current_entry_point,window.app.config.locale,e.state,e.confidence,t);break;case 2:i=await n.registrationEmailOnly(window.app.deviceIdentifier,e.email,window.app.config.current_entry_point,window.app.config.locale,e.state,e.confidence,t);break;default:i=await n.registrationWithPassword(window.app.deviceIdentifier,e.email,e.password,window.app.config.current_entry_point,window.app.config.locale,e.state,e.confidence,t)}let r=Gn(i.token,i.suid);return r=$n(r),await ae.A.get(r),Ue.fireClient(te.EMAIL_REG_SUCCESS),J.isLanding()&&Ue.fireClient(te.IS_LANDING_REG),window.app.user_huid=i.huid,{jsonrpc:"2.0",result:i}}catch(e){var t;return[Nu.EMAIL_EXISTS,Nu.WRONG_OTP].includes(e.code)||(console.error(e),window.Sentry.captureException(e)),"RpcReceivedError"===e.name?{jsonrpc:"2.0",error:{code:e.code,message:Pu(e.code,e.data),data:e.data}}:{jsonrpc:"2.0",error:{code:null!==(t=e.code)&&void 0!==t?t:500,message:e.message,data:{}}}}}(c)}catch(e){throw console.log("Exception on register user through API",e),window.Sentry.captureException(e),e}}var wd=n(44436);Fe.registerBeforeSendHandler("before_send_new_password_form",function(){const e=wd("input[name=current-password]"),t=e.val().toString().trim(),n=wd("input[name=new-password]"),i=n.val().toString().trim();return!1!==M(t)?(x.getTooltipElement().showTooltipElement(e,R.BOTTOM,C._n("errors.pass_empty")),!1):i===t||(x.getTooltipElement().showTooltipElement(n,R.UP,C._n("errors.pass_c_fail")),!1)}),Fe.registerSendRequestHandler("new_password_form_send_request",function(e){const t=wd(e).find("input[name=current-password]").val().toString().trim(),n=new URL(window.location.href),i=n.searchParams.get("token"),r=parseInt(n.searchParams.get("expires"));let o=n.searchParams.get("email");return null!==o&&(o=decodeURIComponent(o).trim()),s={email:o,expires:r,locale:window.app.config.locale,password:t,token:i},ue.makeRequest(de.SET_NEW_PASSWORD,s,window.app.deviceIdentifier);var s}),Fe.registerAfterSendHandler("newpass_form_handler",function(e){const t=e.form.parent(),n=e.response;n.error?x.getTooltipElement().showTooltipElement(wd("input[name=current-password]",t),R.BOTTOM,n.error.message):(e.form.hide(),wd(".js-response",t).show(),wd(".js-response input",t).on("click",()=>{window.location.href=T.getNoLangUrl("restore/to-login")}))});var yd=n(44436);function bd(e){const t=e.form.parent(),n=e.response;if(n.error)return void(6===n.error.code||7===n.error.code?i(yd("input[name=new-password]",t),0,n.error.message):i(yd("input[name=current-password]",t),0,n.error.message));const r=yd(".js-response",t),o=yd(".js-close-button, .js-response input",t);e.form.hide(),r.show(),o.on("click.restoreReset",function(){e.form.show(),r.hide(),o.off("click.restoreReset")}),qe.stretch()}yd(function(){yd("#registration input[name=email], #registration2 input[name=email]").one("keypress",function(){yd("#registration input[name=email], #registration2 input[name=email]").one("change",function(){Ue.fireIndex(te.ENTER_EMAIL)})}),yd("#registration input[name=password], #registration2 input[name=password]").one("keypress",function(){yd("#registration input[name=password], #registration2 input[name=password]").one("change",function(){Ue.fireIndex(te.ENTER_PASSWORD)})}),yd("#login, #registration").find(".icon").one("click",function(){Ue.fireIndex(te.CLICK_SOCIAL_ICON)}),yd("#registration .js-terms_agree,#registration2 .js-terms_agree").one("click",()=>{Ue.fireIndex(te.CHECK_POLICY)}),yd(["#registration #receive_consent","#registration2 .registration_dialog_terms__agree","#registration #receive_consent0","#registration #receive_consent1"].join(", ")).one("click",()=>{Ue.fireIndex(te.CHECK_CONSENT)}),yd(document).one("click",'#registration:not(.step1) [type="submit"],#registration2:not(.step1) [type="submit"]',()=>{Ue.fireIndex(te.SUBMIT)}),new Nt(new At.ClientJS),g.SITE===window.app.config.current_entry_point&&Mo(),window.app.newpass_form_handler=bd,yd("#expires").val(yd.urlParam("expires")),yd("#email").val(yd.urlParam("email")),yd("#token").val(yd.urlParam("token")),Hr(),yd("video").on("load loadedmetadata",()=>{Hr()}),window.app.config.current_entry_point===g.SITE2&&"en"===window.app.config.language&&n.e(624).then(n.t.bind(n,35624,23)),Fe.registerAfterSendHandler("otp_request_code_form_handler",pd),Fe.registerBeforeSendHandler("before_otp_request_code",ad),Fe.registerSendRequestHandler("otp_request_code_send_request",fd),Fe.registerAfterSendHandler("otp_confirm_code_form_handler",md),Fe.registerBeforeSendHandler("before_otp_confirm_code",gd),Fe.registerSendRequestHandler("otp_confirm_code_send_request",vd),document.querySelectorAll(".pin-container").forEach(e=>{const t=e.querySelectorAll(".pin-input");t.forEach(function(e,n){e.addEventListener("input",function(){this.value.length>=this.maxLength&&n<t.length-1&&t[n+1].focus()}),e.addEventListener("keydown",function(e){"Backspace"===e.key&&0===this.value.length&&n>0&&t[n-1].focus()}),e.addEventListener("paste",e=>{const n=e.clipboardData.getData("text");t.forEach((e,t)=>e.value=n[t]||"")})})}),function(){const e=Ci.getInstance(),t=T.current(),n=new Xu(window.app.config,t,e).build();n&&(console.log("trying to authorize mailing user"),new qu(n).auth())}(),function(){window.app.handleAccountToBeDeleted=td;const e=Qu('[data-handler="cancel_account_deletion"]');e.on("click",()=>{var t;(t=Zu.token,ue.makeRequest(de.CANCEL_REMOVE_ACCOUNT,{token:t},window.app.deviceIdentifier)).then(t=>{"status"in t&&1===t.status?id():i(e,R.LEFT,"Error processing request.")})})}(),Fe.registerSendRequestHandler("registration_through_hub_send_request",_d)})},34431:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});for(var i=n(22582),r=[],o=0;o<256;++o)r.push((o+256).toString(16).substr(1));const s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase();if(!(0,i.A)(n))throw TypeError("Stringified UUID is invalid");return n}},35709:(e,t,n)=>{var i;!function(e){!function(){var t="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=r(e);function r(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}void 0===t.Reflect?t.Reflect=e:i=r(t.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return D(Object.create(null))}:s?function(){return D({__proto__:null})}:function(){return D({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),u="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=u||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[r]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,i)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[r]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}():Map,h=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[r]=function(){return this.keys()},e}():Set,p=new(u||"function"!=typeof WeakMap?function(){var e=c.create(),n=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=r(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=r(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return r(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=r(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var t;do{t="@@WeakMap@@"+s()}while(c.has(e,t));return e[t]=!0,t}function r(e,i){if(!t.call(e,n)){if(!i)return;Object.defineProperty(e,n,{value:c.create()})}return e[n]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",i=0;i<16;++i){var r=t[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}():WeakMap);function f(e,t,n){var i=p.get(e);if(S(i)){if(!n)return;i=new d,p.set(e,i)}var r=i.get(t);if(S(r)){if(!n)return;r=new d,i.set(t,r)}return r}function g(e,t,n){if(m(e,t,n))return!0;var i=M(t);return!T(i)&&g(e,i,n)}function m(e,t,n){var i=f(t,n,!1);return!S(i)&&!!i.has(e)}function v(e,t,n){if(m(e,t,n))return _(e,t,n);var i=M(t);return T(i)?void 0:v(e,i,n)}function _(e,t,n){var i=f(t,n,!1);if(!S(i))return i.get(e)}function w(e,t,n,i){f(n,i,!0).set(e,t)}function y(e,t){var n=b(e,t),i=M(e);if(null===i)return n;var r=y(i,t);if(r.length<=0)return n;if(n.length<=0)return r;for(var o=new h,s=[],a=0,c=n;a<c.length;a++){var l=c[a];o.has(l)||(o.add(l),s.push(l))}for(var u=0,d=r;u<d.length;u++)l=d[u],o.has(l)||(o.add(l),s.push(l));return s}function b(e,t){var n=[],i=f(e,t,!1);if(S(i))return n;for(var o=function(e){var t=k(e,r);if(!N(t))throw new TypeError;var n=t.call(e);if(!A(n))throw new TypeError;return n}(i.keys()),s=0;;){var a=L(o);if(!a)return n.length=s,n;var c=R(a);try{n[s]=c}catch(e){try{x(o)}finally{throw e}}s++}}function E(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function S(e){return void 0===e}function T(e){return null===e}function A(e){return"object"==typeof e?null!==e:"function"==typeof e}function C(e,t){switch(E(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",r=k(e,i);if(void 0!==r){var o=r.call(e,n);if(A(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(N(n)&&!A(r=n.call(e)))return r;if(N(i=e.valueOf)&&!A(r=i.call(e)))return r}else{var i;if(N(i=e.valueOf)&&!A(r=i.call(e)))return r;var r,o=e.toString;if(N(o)&&!A(r=o.call(e)))return r}throw new TypeError}(e,"default"===n?"number":n)}function I(e){var t=C(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function O(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function N(e){return"function"==typeof e}function P(e){return"function"==typeof e}function k(e,t){var n=e[t];if(null!=n){if(!N(n))throw new TypeError;return n}}function R(e){return e.value}function L(e){var t=e.next();return!t.done&&t}function x(e){var t=e.return;t&&t.call(e)}function M(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return t;var r=i.constructor;return"function"!=typeof r||r===e?t:r}function D(e){return e.__=void 0,delete e.__,e}e("decorate",function(e,t,n,i){if(S(n)){if(!O(e))throw new TypeError;if(!P(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var i=(0,e[n])(t);if(!S(i)&&!T(i)){if(!P(i))throw new TypeError;t=i}}return t}(e,t)}if(!O(e))throw new TypeError;if(!A(t))throw new TypeError;if(!A(i)&&!S(i)&&!T(i))throw new TypeError;return T(i)&&(i=void 0),function(e,t,n,i){for(var r=e.length-1;r>=0;--r){var o=(0,e[r])(t,n,i);if(!S(o)&&!T(o)){if(!A(o))throw new TypeError;i=o}}return i}(e,t,n=I(n),i)}),e("metadata",function(e,t){return function(n,i){if(!A(n))throw new TypeError;if(!S(i)&&!function(e){switch(E(e)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;w(e,t,n,i)}}),e("defineMetadata",function(e,t,n,i){if(!A(n))throw new TypeError;return S(i)||(i=I(i)),w(e,t,n,i)}),e("hasMetadata",function(e,t,n){if(!A(t))throw new TypeError;return S(n)||(n=I(n)),g(e,t,n)}),e("hasOwnMetadata",function(e,t,n){if(!A(t))throw new TypeError;return S(n)||(n=I(n)),m(e,t,n)}),e("getMetadata",function(e,t,n){if(!A(t))throw new TypeError;return S(n)||(n=I(n)),v(e,t,n)}),e("getOwnMetadata",function(e,t,n){if(!A(t))throw new TypeError;return S(n)||(n=I(n)),_(e,t,n)}),e("getMetadataKeys",function(e,t){if(!A(e))throw new TypeError;return S(t)||(t=I(t)),y(e,t)}),e("getOwnMetadataKeys",function(e,t){if(!A(e))throw new TypeError;return S(t)||(t=I(t)),b(e,t)}),e("deleteMetadata",function(e,t,n){if(!A(t))throw new TypeError;S(n)||(n=I(n));var i=f(t,n,!1);if(S(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var r=p.get(t);return r.delete(n),r.size>0||p.delete(t),!0})}(i)}()}(i||(i={}))},38108:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46987);t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===i.STACK_OVERFLOW}},38323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(65985),r=n(46987),o=n(2209),s=n(58478),a=n(51588);t.getFunctionName=a.getFunctionName;var c=n(8289);function l(e,t,n,i){var o=e.getConstructorMetadata(n),s=o.compilerGeneratedMetadata;if(void 0===s){var a=r.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(a)}var c=o.userGeneratedMetadata,l=Object.keys(c),h=function(e,t,n,i,r){for(var o=[],s=0;s<r;s++){var a=u(s,e,t,n,i);null!==a&&o.push(a)}return o}(i,t,s,c,0===n.length&&l.length>0?l.length:n.length),p=d(e,n);return h.concat(p)}function u(e,t,n,s,a){var l=a[e.toString()]||[],u=h(l),d=!0!==u.unmanaged,p=s[e];if((p=u.inject||u.multiInject||p)instanceof i.LazyServiceIdentifer&&(p=p.unwrap()),d){if(!t&&(p===Object||p===Function||void 0===p)){var f=r.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(f)}var g=new c.Target(o.TargetTypeEnum.ConstructorArgument,u.targetName,p);return g.metadata=l,g}return null}function d(e,t){for(var n=e.getPropertiesMetadata(t),i=[],r=0,s=Object.keys(n);r<s.length;r++){var a=s[r],l=n[a],u=h(n[a]),p=u.targetName||a,f=u.inject||u.multiInject,g=new c.Target(o.TargetTypeEnum.ClassProperty,p,f);g.metadata=l,i.push(g)}var m=Object.getPrototypeOf(t.prototype).constructor;if(m!==Object){var v=d(e,m);i=i.concat(v)}return i}function h(e){var t={};return e.forEach(function(e){t[e.key.toString()]=e.value}),{inject:t[s.INJECT_TAG],multiInject:t[s.MULTI_INJECT_TAG],targetName:t[s.NAME_TAG],unmanaged:t[s.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return l(e,a.getFunctionName(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var i=Object.getPrototypeOf(n.prototype).constructor;if(i!==Object){var r=l(t,a.getFunctionName(i),i,!0),o=r.map(function(e){return e.metadata.filter(function(e){return e.key===s.UNMANAGED_TAG})}),c=[].concat.apply([],o).length,u=r.length-c;return u>0?u:e(t,i)}return 0}},41079:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationsRpcMethods=void 0,(n=t.NotificationsRpcMethods||(t.NotificationsRpcMethods={})).CHECK="account.check",n.NEW="account.new",n.CHANGE_ACCOUNT_STATE="account.changeState",n.GET_PROVIDER_TOKEN="account.getProviderToken"},41720:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const i={mn:()=>"serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,vn:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>i.mn()||i.vn(),isPushBlocked:()=>{const e=i.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,t=i.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return e||t},isPushPermissionGranted:()=>i.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,Tr:()=>!i.isPushBlocked()&&i.isPushSupported()&&!i.isPushPermissionGranted()},r=i},42996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},43294:function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var i,r,o=n(1)(),s=n(3),a=n(4),c=n(6),l=function(){var e=new a;return i=e.getResult(),r=new c,this};l.prototype={getSoftwareVersion:function(){return"0.1.11"},getBrowserData:function(){return i},getFingerprint:function(){var e="|",t=i.ua,n=this.getScreenPrint(),r=this.getPlugins(),o=this.getFonts(),a=this.isLocalStorage(),c=this.isSessionStorage(),l=this.getTimeZone(),u=this.getLanguage(),d=this.getSystemLanguage(),h=this.isCookie(),p=this.getCanvasPrint();return s(t+e+n+e+r+e+o+e+a+e+c+e+l+e+u+e+d+e+h+e+p,256)},getCustomFingerprint:function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t]+"|";return s(e,256)},getUserAgent:function(){return i.ua},getUserAgentLowerCase:function(){return i.ua.toLowerCase()},getBrowser:function(){return i.browser.name},getBrowserVersion:function(){return i.browser.version},getBrowserMajorVersion:function(){return i.browser.major},isIE:function(){return/IE/i.test(i.browser.name)},isChrome:function(){return/Chrome/i.test(i.browser.name)},isFirefox:function(){return/Firefox/i.test(i.browser.name)},isSafari:function(){return/Safari/i.test(i.browser.name)},isMobileSafari:function(){return/Mobile\sSafari/i.test(i.browser.name)},isOpera:function(){return/Opera/i.test(i.browser.name)},getEngine:function(){return i.engine.name},getEngineVersion:function(){return i.engine.version},getOS:function(){return i.os.name},getOSVersion:function(){return i.os.version},isWindows:function(){return/Windows/i.test(i.os.name)},isMac:function(){return/Mac/i.test(i.os.name)},isLinux:function(){return/Linux/i.test(i.os.name)},isUbuntu:function(){return/Ubuntu/i.test(i.os.name)},isSolaris:function(){return/Solaris/i.test(i.os.name)},getDevice:function(){return i.device.model},getDeviceType:function(){return i.device.type},getDeviceVendor:function(){return i.device.vendor},getCPU:function(){return i.cpu.architecture},isMobile:function(){var e=i.ua||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},isMobileMajor:function(){return this.isMobileAndroid()||this.isMobileBlackBerry()||this.isMobileIOS()||this.isMobileOpera()||this.isMobileWindows()},isMobileAndroid:function(){return!!i.ua.match(/Android/i)},isMobileOpera:function(){return!!i.ua.match(/Opera Mini/i)},isMobileWindows:function(){return!!i.ua.match(/IEMobile/i)},isMobileBlackBerry:function(){return!!i.ua.match(/BlackBerry/i)},isMobileIOS:function(){return!!i.ua.match(/iPhone|iPad|iPod/i)},isIphone:function(){return!!i.ua.match(/iPhone/i)},isIpad:function(){return!!i.ua.match(/iPad/i)},isIpod:function(){return!!i.ua.match(/iPod/i)},getScreenPrint:function(){return"Current Resolution: "+this.getCurrentResolution()+", Available Resolution: "+this.getAvailableResolution()+", Color Depth: "+this.getColorDepth()+", Device XDPI: "+this.getDeviceXDPI()+", Device YDPI: "+this.getDeviceYDPI()},getColorDepth:function(){return screen.colorDepth},getCurrentResolution:function(){return screen.width+"x"+screen.height},getAvailableResolution:function(){return screen.availWidth+"x"+screen.availHeight},getDeviceXDPI:function(){return screen.deviceXDPI},getDeviceYDPI:function(){return screen.deviceYDPI},getPlugins:function(){for(var e="",t=0;t<navigator.plugins.length;t++)t==navigator.plugins.length-1?e+=navigator.plugins[t].name:e+=navigator.plugins[t].name+", ";return e},isJava:function(){return navigator.javaEnabled()},getJavaVersion:function(){throw new Error("Please use client.java.js or client.js if you need this functionality!")},isFlash:function(){return!!navigator.plugins["Shockwave Flash"]},getFlashVersion:function(){throw new Error("Please use client.flash.js or client.js if you need this functionality!")},isSilverlight:function(){return!!navigator.plugins["Silverlight Plug-In"]},getSilverlightVersion:function(){return this.isSilverlight()?navigator.plugins["Silverlight Plug-In"].description:""},isMimeTypes:function(){return!(!navigator.mimeTypes||!navigator.mimeTypes.length)},getMimeTypes:function(){var e="";if(navigator.mimeTypes)for(var t=0;t<navigator.mimeTypes.length;t++)t==navigator.mimeTypes.length-1?e+=navigator.mimeTypes[t].description:e+=navigator.mimeTypes[t].description+", ";return e},isFont:function(e){return r.detect(e)},getFonts:function(){for(var e=["Abadi MT Condensed Light","Adobe Fangsong Std","Adobe Hebrew","Adobe Ming Std","Agency FB","Aharoni","Andalus","Angsana New","AngsanaUPC","Aparajita","Arab","Arabic Transparent","Arabic Typesetting","Arial Baltic","Arial Black","Arial CE","Arial CYR","Arial Greek","Arial TUR","Arial","Batang","BatangChe","Bauhaus 93","Bell MT","Bitstream Vera Serif","Bodoni MT","Bookman Old Style","Braggadocio","Broadway","Browallia New","BrowalliaUPC","Calibri Light","Calibri","Californian FB","Cambria Math","Cambria","Candara","Castellar","Casual","Centaur","Century Gothic","Chalkduster","Colonna MT","Comic Sans MS","Consolas","Constantia","Copperplate Gothic Light","Corbel","Cordia New","CordiaUPC","Courier New Baltic","Courier New CE","Courier New CYR","Courier New Greek","Courier New TUR","Courier New","DFKai-SB","DaunPenh","David","DejaVu LGC Sans Mono","Desdemona","DilleniaUPC","DokChampa","Dotum","DotumChe","Ebrima","Engravers MT","Eras Bold ITC","Estrangelo Edessa","EucrosiaUPC","Euphemia","Eurostile","FangSong","Forte","FrankRuehl","Franklin Gothic Heavy","Franklin Gothic Medium","FreesiaUPC","French Script MT","Gabriola","Gautami","Georgia","Gigi","Gisha","Goudy Old Style","Gulim","GulimChe","GungSeo","Gungsuh","GungsuhChe","Haettenschweiler","Harrington","Hei S","HeiT","Heisei Kaku Gothic","Hiragino Sans GB","Impact","Informal Roman","IrisUPC","Iskoola Pota","JasmineUPC","KacstOne","KaiTi","Kalinga","Kartika","Khmer UI","Kino MT","KodchiangUPC","Kokila","Kozuka Gothic Pr6N","Lao UI","Latha","Leelawadee","Levenim MT","LilyUPC","Lohit Gujarati","Loma","Lucida Bright","Lucida Console","Lucida Fax","Lucida Sans Unicode","MS Gothic","MS Mincho","MS PGothic","MS PMincho","MS Reference Sans Serif","MS UI Gothic","MV Boli","Magneto","Malgun Gothic","Mangal","Marlett","Matura MT Script Capitals","Meiryo UI","Meiryo","Menlo","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU-ExtB","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","Miriam Fixed","Miriam","Mongolian Baiti","MoolBoran","NSimSun","Narkisim","News Gothic MT","Niagara Solid","Nyala","PMingLiU","PMingLiU-ExtB","Palace Script MT","Palatino Linotype","Papyrus","Perpetua","Plantagenet Cherokee","Playbill","Prelude Bold","Prelude Condensed Bold","Prelude Condensed Medium","Prelude Medium","PreludeCompressedWGL Black","PreludeCompressedWGL Bold","PreludeCompressedWGL Light","PreludeCompressedWGL Medium","PreludeCondensedWGL Black","PreludeCondensedWGL Bold","PreludeCondensedWGL Light","PreludeCondensedWGL Medium","PreludeWGL Black","PreludeWGL Bold","PreludeWGL Light","PreludeWGL Medium","Raavi","Rachana","Rockwell","Rod","Sakkal Majalla","Sawasdee","Script MT Bold","Segoe Print","Segoe Script","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Segoe UI","Shonar Bangla","Showcard Gothic","Shruti","SimHei","SimSun","SimSun-ExtB","Simplified Arabic Fixed","Simplified Arabic","Snap ITC","Sylfaen","Symbol","Tahoma","Times New Roman Baltic","Times New Roman CE","Times New Roman CYR","Times New Roman Greek","Times New Roman TUR","Times New Roman","TlwgMono","Traditional Arabic","Trebuchet MS","Tunga","Tw Cen MT Condensed Extra Bold","Ubuntu","Umpush","Univers","Utopia","Utsaah","Vani","Verdana","Vijaya","Vladimir Script","Vrinda","Webdings","Wide Latin","Wingdings"],t="",n=0;n<e.length;n++)r.detect(e[n])&&(t+=n==e.length-1?e[n]:e[n]+", ");return t},isLocalStorage:function(){try{return!!o.localStorage}catch(e){return!0}},isSessionStorage:function(){try{return!!o.sessionStorage}catch(e){return!0}},isCookie:function(){return navigator.cookieEnabled},getTimeZone:function(){var e,t;return e=new Date,(t=String(-e.getTimezoneOffset()/60))<0?"-"+("0"+(t*=-1)).slice(-2):"+"+("0"+t).slice(-2)},getLanguage:function(){return navigator.language},getSystemLanguage:function(){return navigator.systemLanguage||window.navigator.language},isCanvas:function(){var e=document.createElement("canvas");try{return!(!e.getContext||!e.getContext("2d"))}catch(e){return!1}},getCanvasPrint:function(){var e,t=document.createElement("canvas");try{e=t.getContext("2d")}catch(e){return""}var n="ClientJS,org <canvas> 1.0";return e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText(n,4,17),t.toDataURL()}},t.ClientJS=l},function(e,t,i){"use strict";var r=i(2);e.exports=function(){return"object"==typeof n.g&&n.g&&n.g.Math===Math&&n.g.Array===Array?n.g:r}},function(e,t,n){"use strict";"undefined"!=typeof self?e.exports=self:"undefined"!=typeof window?e.exports=window:e.exports=Function("return this")()},function(e,t,n){e.exports=function(e,t){var n,i,r,o,s,a,c,l;for(n=3&e.length,i=e.length-n,r=t,s=3432918353,a=461845907,l=0;l<i;)c=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,r=27492+(65535&(o=5*(65535&(r=(r^=c=(65535&(c=(c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,n){case 3:c^=(255&e.charCodeAt(l+2))<<16;case 2:c^=(255&e.charCodeAt(l+1))<<8;case 1:r^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(l)))*s+(((c>>>16)*s&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}},function(e,t,n){var i;!function(r,o){"use strict";var s="function",a="undefined",c="object",l="string",u="model",d="name",h="type",p="vendor",f="version",g="architecture",m="console",v="mobile",_="tablet",w="smarttv",y="wearable",b="embedded",E="Amazon",S="Apple",T="ASUS",A="BlackBerry",C="Google",I="Huawei",O="LG",N="Microsoft",P="Motorola",k="Samsung",R="Sony",L="Xiaomi",x="Zebra",M="Facebook",D=function(e){var t={};for(var n in e)t[e[n].toUpperCase()]=e[n];return t},j=function(e,t){return typeof e===l&&-1!==U(t).indexOf(U(e))},U=function(e){return e.toLowerCase()},B=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===a?e:e.substring(0,255)},F=function(e,t){for(var n,i,r,a,l,u,d=0;d<t.length&&!l;){var h=t[d],p=t[d+1];for(n=i=0;n<h.length&&!l;)if(l=h[n++].exec(e))for(r=0;r<p.length;r++)u=l[++i],typeof(a=p[r])===c&&a.length>0?2==a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3==a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):o:this[a[0]]=u?a[1].call(this,u,a[2]):o:4==a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):o):this[a]=u||o;d+=2}},G=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(j(t[n][i],e))return"?"===n?o:n}else if(j(t[n],e))return"?"===n?o:n;return e},V={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,f],[/opios[\/ ]+([\w\.]+)/i],[f,[d,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[f,[d,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[d,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[f,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],f],[/\bfocus\/([\w\.]+)/i],[f,[d,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[f,[d,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[d,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[d,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[f,[d,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,M],f],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[d,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,f],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[f,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[f,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[f,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,U]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",U]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,U]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[p,k],[h,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[p,k],[h,v]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[p,S],[h,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[p,S],[h,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[p,I],[h,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[u,[p,I],[h,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[p,L],[h,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[p,L],[h,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[u,[p,"OPPO"],[h,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[p,"Vivo"],[h,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[p,"Realme"],[h,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[p,P],[h,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[p,P],[h,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[p,O],[h,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[p,O],[h,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[p,"Lenovo"],[h,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[p,"Nokia"],[h,v]],[/(pixel c)\b/i],[u,[p,C],[h,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[p,C],[h,v]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[p,R],[h,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[p,R],[h,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[p,"OnePlus"],[h,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[p,E],[h,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[p,E],[h,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,p,[h,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[p,A],[h,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[p,T],[h,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[p,T],[h,v]],[/(nexus 9)/i],[u,[p,"HTC"],[h,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[p,[u,/_/g," "],[h,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[p,"Acer"],[h,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[p,"Meizu"],[h,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[p,"Sharp"],[h,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,u,[h,v]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,u,[h,_]],[/(surface duo)/i],[u,[p,N],[h,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[p,"Fairphone"],[h,v]],[/(u304aa)/i],[u,[p,"AT&T"],[h,v]],[/\bsie-(\w*)/i],[u,[p,"Siemens"],[h,v]],[/\b(rct\w+) b/i],[u,[p,"RCA"],[h,_]],[/\b(venue[\d ]{2,7}) b/i],[u,[p,"Dell"],[h,_]],[/\b(q(?:mv|ta)\w+) b/i],[u,[p,"Verizon"],[h,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[p,"Barnes & Noble"],[h,_]],[/\b(tm\d{3}\w+) b/i],[u,[p,"NuVision"],[h,_]],[/\b(k88) b/i],[u,[p,"ZTE"],[h,_]],[/\b(nx\d{3}j) b/i],[u,[p,"ZTE"],[h,v]],[/\b(gen\d{3}) b.+49h/i],[u,[p,"Swiss"],[h,v]],[/\b(zur\d{3}) b/i],[u,[p,"Swiss"],[h,_]],[/\b((zeki)?tb.*\b) b/i],[u,[p,"Zeki"],[h,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],u,[h,_]],[/\b(ns-?\w{0,9}) b/i],[u,[p,"Insignia"],[h,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[p,"NextBook"],[h,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],u,[h,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],u,[h,v]],[/\b(ph-1) /i],[u,[p,"Essential"],[h,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[p,"Envizen"],[h,_]],[/\b(trio[-\w\. ]+) b/i],[u,[p,"MachSpeed"],[h,_]],[/\btu_(1491) b/i],[u,[p,"Rotor"],[h,_]],[/(shield[\w ]+) b/i],[u,[p,"Nvidia"],[h,_]],[/(sprint) (\w+)/i],[p,u,[h,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[p,N],[h,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[p,x],[h,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[p,x],[h,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,u,[h,m]],[/droid.+; (shield) bui/i],[u,[p,"Nvidia"],[h,m]],[/(playstation [345portablevi]+)/i],[u,[p,R],[h,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[p,N],[h,m]],[/smart-tv.+(samsung)/i],[p,[h,w]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[p,k],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,O],[h,w]],[/(apple) ?tv/i],[p,[u,"Apple TV"],[h,w]],[/crkey/i],[[u,"Chromecast"],[p,C],[h,w]],[/droid.+aft(\w)( bui|\))/i],[u,[p,E],[h,w]],[/\(dtv[\);].+(aquos)/i],[u,[p,"Sharp"],[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,B],[u,B],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/((pebble))app/i],[p,u,[h,y]],[/droid.+; (glass) \d/i],[u,[p,C],[h,y]],[/droid.+; (wt63?0{2,3})\)/i],[u,[p,x],[h,y]],[/(quest( 2)?)/i],[u,[p,M],[h,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[h,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[h,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[h,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,_]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[f,G,V]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[f,G,V]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[f,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,f],[/\(bb(10);/i],[f,[d,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[f,[d,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],f],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,f],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,f]]},H=function(e,t){if(typeof e===c&&(t=e,e=o),!(this instanceof H))return new H(e,t).getResult();var n=e||(typeof r!==a&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n}(W,t):W;return this.getBrowser=function(){var e,t={};return t.name=o,t.version=o,F.call(t,n,i.browser),t.major=typeof(e=t.version)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var e={};return e.architecture=o,F.call(e,n,i.cpu),e},this.getDevice=function(){var e={};return e.vendor=o,e.model=o,e.type=o,F.call(e,n,i.device),e},this.getEngine=function(){var e={};return e.name=o,e.version=o,F.call(e,n,i.engine),e},this.getOS=function(){var e={};return e.name=o,e.version=o,F.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===l&&e.length>255?B(e,255):e,this},this.setUA(n),this};H.VERSION="0.7.30",H.BROWSER=D([d,f,"major"]),H.CPU=D([g]),H.DEVICE=D([u,p,h,m,v,w,_,y,b]),H.ENGINE=H.OS=D([d,f]),typeof t!==a?(typeof e!==a&&e.exports&&(t=e.exports=H),t.UAParser=H):n(5)?(i=function(){return H}.call(t,n,t,e))===o||(e.exports=i):typeof r!==a&&(r.UAParser=H);var $=typeof r!==a&&(r.jQuery||r.Zepto);if($&&!$.ua){var q=new H;$.ua=q.getResult(),$.ua.get=function(){return q.getUA()},$.ua.set=function(e){q.setUA(e);var t=q.getResult();for(var n in t)$.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){e.exports=function(){var e=["monospace","sans-serif","serif"],t=document.getElementsByTagName("body")[0],n=document.createElement("span");n.style.fontSize="72px",n.innerHTML="mmmmmmmmmmlli";var i={},r={};for(var o in e)n.style.fontFamily=e[o],t.appendChild(n),i[e[o]]=n.offsetWidth,r[e[o]]=n.offsetHeight,t.removeChild(n);this.detect=function(o){var s=!1;for(var a in e){n.style.fontFamily=o+","+e[a],t.appendChild(n);var c=n.offsetWidth!=i[e[a]]||n.offsetHeight!=r[e[a]];t.removeChild(n),s=s||c}return s}}}])},45424:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.RpcReceivedError=void 0;var o=n(50670),s=function(e){function t(n,i,r){void 0===i&&(i=o.ErrorCode.SERVER_ERROR),void 0===r&&(r={});var s=e.call(this,n)||this;return Object.setPrototypeOf(s,t.prototype),s.name="RpcReceivedError",s.code=i,s.data=r,s}return r(t,e),t}(Error);t.RpcReceivedError=s},45823:(e,t,n)=>{"use strict";n.d(t,{B:()=>J});var i=n(90175),r=n(93039);class o{constructor(e,t){this.triggerId=e,this.messageExtras=t,this.triggerId=e,this.messageExtras=t,this.extras={},this.isControl=!0,this.Ht=!1}static fromJson(e){return new o(e.trigger_id,e.message_extras)}_t(){return!this.Ht&&(this.Ht=!0,!0)}Bo(){return this.Ht}}var s=n(14971),a=n(62406),c=n(13786);const l={Ic:null,Ho:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null==e)return!1;t=t||!1,n=n||!1;const r=e.getBoundingClientRect();return null!=r&&(r.top>=0&&r.top<=(window.innerHeight||document.documentElement.clientHeight)||!t)&&(r.left>=0||!i)&&(r.bottom>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!n)&&(r.right<=(window.innerWidth||document.documentElement.clientWidth)||!i)}};function u(e){if(e.onclick){const t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.onclick.apply(e,[t])}}var d=n(56869);const h=e=>null!==e&&"IFRAME"===e.tagName;class p{constructor(e,t,n,i,r,o,s,a,c,l,u,h,f,g,m,v,_,w,y,b,E,S,T,A,C,I,O,N,P,k){this.message=e,this.messageAlignment=t,this.slideFrom=n,this.extras=i,this.triggerId=r,this.clickAction=o,this.uri=s,this.openTarget=a,this.dismissType=c,this.duration=l,this.icon=u,this.imageUrl=h,this.imageStyle=f,this.iconColor=g,this.iconBackgroundColor=m,this.backgroundColor=v,this.textColor=_,this.closeButtonColor=w,this.animateIn=y,this.animateOut=b,this.header=E,this.headerAlignment=S,this.headerTextColor=T,this.frameColor=A,this.buttons=C,this.cropType=I,this.orientation=O,this.htmlId=N,this.css=P,this.messageExtras=k,this.message=e,this.messageAlignment=t||p.TextAlignment.CENTER,this.duration=l||5e3,this.slideFrom=n||p.SlideFrom.BOTTOM,this.extras=i||{},this.triggerId=r,this.clickAction=o||p.ClickAction.NONE,this.uri=s,this.openTarget=a||p.OpenTarget.NONE,this.dismissType=c||p.DismissType.AUTO_DISMISS,this.icon=u,this.imageUrl=h,this.imageStyle=f||p.ImageStyle.TOP,this.iconColor=g||p.th.ih,this.iconBackgroundColor=m||p.th.sh,this.backgroundColor=v||p.th.ih,this.textColor=_||p.th.hh,this.closeButtonColor=w||p.th.eh,this.animateIn=y,null==this.animateIn&&(this.animateIn=!0),this.animateOut=b,null==this.animateOut&&(this.animateOut=!0),this.header=E,this.headerAlignment=S||p.TextAlignment.CENTER,this.headerTextColor=T||p.th.hh,this.frameColor=A||p.th.Eh,this.buttons=C||[],this.cropType=I||p.CropType.FIT_CENTER,this.orientation=O,this.htmlId=N,this.css=P,this.isControl=!1,this.messageExtras=k,this.nh=!1,this.Ht=!1,this.So=!1,this.Th=!1,this.jo=null,this.wo=null,this.ti=new d.A,this.oh=new d.A,this.$o=p.TextAlignment.CENTER}subscribeToClickedEvent(e){return this.ti.Dt(e)}subscribeToDismissedEvent(e){return this.oh.Dt(e)}removeSubscription(e){this.ti.removeSubscription(e),this.oh.removeSubscription(e)}removeAllSubscriptions(){this.ti.removeAllSubscriptions(),this.oh.removeAllSubscriptions()}closeMessage(){this.ll(this.jo)}vo(){return!0}Po(){return this.vo()}ho(){return null!=this.htmlId&&this.htmlId.length>4}lo(){return this.ho()&&null!=this.css&&this.css.length>0}do(){if(this.ho()&&this.lo())return this.htmlId+"-css"}_t(){return!this.Ht&&(this.Ht=!0,!0)}Bo(){return this.Ht}$t(e){return!this.So&&(this.So=!0,this.ti.X(),!0)}Qt(){return!this.Th&&(this.Th=!0,this.oh.X(),!0)}hide(e){if(e&&e.parentNode){let t=e.closest(".ab-iam-root");if(null==t&&(t=e),this.vo()&&null!=t.parentNode){const e=t.parentNode.classList;e&&e.contains(p.rh)&&e.remove(p.rh),document.body.removeEventListener("touchmove",p.lh)}t.className=t.className.replace(p.uh,p.ah)}return this.animateOut||!1}ll(e,t){if(null==e)return;let n;this.jo=null,n=-1===e.className.indexOf("ab-in-app-message")?e.getElementsByClassName("ab-in-app-message")[0]:e;let i=!1;n&&(i=this.hide(n));const r=document.body;let o;null!=r&&(o=r.scrollTop);const a=()=>{if(e&&e.parentNode){let t=e.closest(".ab-iam-root");null==t&&(t=e),t.parentNode&&t.parentNode.removeChild(t)}const n=this.do();if(null!=n){const e=document.getElementById(n);e&&e.parentNode&&e.parentNode.removeChild(e)}null!=r&&"Safari"===s.A.browser&&(r.scrollTop=o),t?t():this.Qt()};i?setTimeout(a,p.Ih):a(),this.wo&&this.wo.focus()}zo(){return document.createTextNode(this.message||"")}ko(e){let t="";this.message||this.header||!this.vo()||(t="Modal Image"),e.setAttribute("alt",t)}static lh(e){if(e.targetTouches&&e.targetTouches.length>1)return;const t=e.target;t&&t.classList&&t.classList.contains("ab-message-text")&&t.scrollHeight>t.clientHeight||document.querySelector(`.${p.rh}`)&&e.cancelable&&e.preventDefault()}Ah(e){const t=e.parentNode;this.vo()&&null!=t&&this.orientation!==p.Orientation.LANDSCAPE&&(null!=t.classList&&t.classList.add(p.rh),document.body.addEventListener("touchmove",p.lh,!!function(){if(null==l.Ic){l.Ic=!1;try{const e=Object.defineProperty({},"passive",{get:()=>{l.Ic=!0}});window.addEventListener("testPassive",()=>{},e),window.removeEventListener("testPassive",()=>{},e)}catch(e){a.A.error((0,c.u)(e))}}return l.Ic}()&&{passive:!1})),e.className+=" "+p.uh}static Oh(e){if(27===e.keyCode&&!r.Ay.ee(r.lw.mh)&&document.querySelectorAll(".ab-modal-interactions").length>0){const e=document.getElementsByClassName("ab-html-message");let t=!1;for(const n of e){let e=null;h(n)&&n.contentWindow&&(e=n.contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0]),null!=e&&(u(e),t=!0)}if(!t){const e=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=e&&u(e)}}}Lh(){this.nh||r.Ay.ee(r.lw.mh)||(document.addEventListener("keydown",p.Oh,!1),r.Ay.Nh(()=>{document.removeEventListener("keydown",p.Oh)}),this.nh=!0)}bt(e){const t={};return e?(t[p.es.ra]=this.message,t[p.es.sa]=this.messageAlignment,t[p.es.Sh]=this.slideFrom,t[p.es.qs]=this.extras,t[p.es.ta]=this.triggerId,t[p.es.ia]=this.clickAction,t[p.es.URI]=this.uri,t[p.es.oa]=this.openTarget,t[p.es.pa]=this.dismissType,t[p.es.ma]=this.duration,t[p.es.na]=this.icon,t[p.es.ls]=this.imageUrl,t[p.es.ua]=this.imageStyle,t[p.es.ca]=this.iconColor,t[p.es.fa]=this.iconBackgroundColor,t[p.es.da]=this.backgroundColor,t[p.es.la]=this.textColor,t[p.es.ga]=this.closeButtonColor,t[p.es.ja]=this.animateIn,t[p.es.xa]=this.animateOut,t[p.es.za]=this.header,t[p.es.ha]=this.headerAlignment,t[p.es.va]=this.headerTextColor,t[p.es.wa]=this.frameColor,t[p.es.ya]=this.buttons,t[p.es.Sa]=this.cropType,t[p.es.ba]=this.orientation,t[p.es.ka]=this.htmlId,t[p.es.CSS]=this.css,t[p.es.hs]=e,t[p.es.qa]=this.messageExtras,t):t}}p.th={hh:4281545523,ih:4294967295,sh:4278219733,Rh:4293914607,Mh:4283782485,Eh:3224580915,eh:4288387995},p.Co={Dh:"hd",xo:"ias",Ch:"of",dh:"do",Uh:"umt",bh:"tf",Ph:"te"},p.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},p.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},p.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},p.OpenTarget={NONE:"NONE",BLANK:"BLANK"},p.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},p.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},p.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},p.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},p.bo={Wr:"SLIDEUP",Vr:"MODAL",Fo:"MODAL_STYLED",Lr:"FULL",Ur:"WEB_HTML",po:"HTML",Jo:"HTML_FULL"},p.Ih=500,p.ph=200,p.uh="ab-show",p.ah="ab-hide",p.rh="ab-pause-scrolling",p.es={ra:"m",sa:"ma",Sh:"sf",qs:"e",ta:"ti",ia:"ca",URI:"u",oa:"oa",pa:"dt",ma:"d",na:"i",ls:"iu",ua:"is",ca:"ic",fa:"ibc",da:"bc",la:"tc",ga:"cbc",ja:"ai",xa:"ao",za:"h",ha:"ha",va:"htc",wa:"fc",ya:"b",Sa:"ct",ba:"o",ka:"hi",CSS:"css",hs:"type",Eo:"messageFields",qa:"me"};class f extends p{constructor(e,t,n,i,r,o,s,a,c,l,u,d){super(e,void 0,void 0,t,n,void 0,void 0,void 0,i=i||p.DismissType.MANUAL,r,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,o,s,void 0,void 0,void 0,a,void 0,void 0,void 0,c,l,d),this.messageFields=u,this.messageFields=u}Po(){return!1}$t(e){if(this.uo===p.bo.Ur){if(this.So)return!1;this.So=!0}return this.ti.X(e),!0}bt(){const e=super.bt(f.cs);return e[p.es.Eo]=this.messageFields,e}static Qr(e){return new f(e[p.es.ra],e[p.es.qs],e[p.es.ta],e[p.es.pa],e[p.es.ma],e[p.es.ja],e[p.es.xa],e[p.es.wa],e[p.es.ka],e[p.es.CSS],e[p.es.Eo],e[p.es.qa])}}f.cs=p.bo.Ur;class g{constructor(e,t,n,i,r,o,s){this.text=e,this.backgroundColor=t,this.textColor=n,this.borderColor=i,this.clickAction=r,this.uri=o,this.id=s,this.text=e||"",this.backgroundColor=t||p.th.sh,this.textColor=n||p.th.ih,this.borderColor=i||this.backgroundColor,this.clickAction=r||p.ClickAction.NONE,this.uri=o,null==s&&(s=g.Yi),this.id=s,this.So=!1,this.ti=new d.A}subscribeToClickedEvent(e){return this.ti.Dt(e)}removeSubscription(e){this.ti.removeSubscription(e)}removeAllSubscriptions(){this.ti.removeAllSubscriptions()}$t(){return!this.So&&(this.So=!0,this.ti.X(),!0)}static fromJson(e){return new g(e.text,e.bg_color,e.text_color,e.border_color,e.click_action,e.uri,e.id)}}g.Yi=-1;var m=n(7126);class v extends p{constructor(e,t,n,i,r,o,s,a,c,l,u,d,h,f,g,m,v,_,w,y,b,E,S,T,A,C,I,O,N){a=a||p.DismissType.MANUAL,C=C||p.Orientation.PORTRAIT,super(e,t,void 0,n,i,r,o,s,a,c,l,u,d,h,f,g,m,v,_,w,y,b,E,S,T,A=A||p.CropType.CENTER_CROP,C,I,O,N),this.$o=p.TextAlignment.CENTER}bt(){return super.bt(v.cs)}static Qr(e){return new v(e[p.es.ra],e[p.es.sa],e[p.es.qs],e[p.es.ta],e[p.es.ia],e[p.es.URI],e[p.es.oa],e[p.es.pa],e[p.es.ma],e[p.es.na],e[p.es.ls],e[p.es.ua],e[p.es.ca],e[p.es.fa],e[p.es.da],e[p.es.la],e[p.es.ga],e[p.es.ja],e[p.es.xa],e[p.es.za],e[p.es.ha],e[p.es.va],e[p.es.wa],b(e[p.es.ya]),e[p.es.Sa],e[p.es.ba],e[p.es.ka],e[p.es.CSS],e[p.es.qa])}}v.cs=p.bo.Lr;class _ extends p{constructor(e,t,n,i,r,o,s,a,c,l,u,d,h,f,g,m,v,_,w,y,b,E,S,T,A,C,I,O){super(e,t,void 0,n,i,r,o,s,a=a||p.DismissType.MANUAL,c,l,u,d,h,f,g,m,v,_,w,y,b,E,S,T,A=A||p.CropType.FIT_CENTER,void 0,C,I,O),this.$o=p.TextAlignment.CENTER}bt(){return super.bt(_.cs)}static Qr(e){return new _(e[p.es.ra],e[p.es.sa],e[p.es.qs],e[p.es.ta],e[p.es.ia],e[p.es.URI],e[p.es.oa],e[p.es.pa],e[p.es.ma],e[p.es.na],e[p.es.ls],e[p.es.ua],e[p.es.ca],e[p.es.fa],e[p.es.da],e[p.es.la],e[p.es.ga],e[p.es.ja],e[p.es.xa],e[p.es.za],e[p.es.ha],e[p.es.va],e[p.es.wa],b(e[p.es.ya]),e[p.es.Sa],e[p.es.ka],e[p.es.CSS],e[p.es.qa])}}_.cs=p.bo.Vr;class w extends p{constructor(e,t,n,i,r,o,s,a,c,l,u,d,h,f,g,m,v,_,w,y,b,E){m=m||p.th.Mh,g=g||p.th.Rh,super(e,t=t||p.TextAlignment.START,n,i,r,o,s,a,c,l,u,d,void 0,h,f,g,m,v,_,w,void 0,void 0,void 0,void 0,void 0,void 0,void 0,y,b,E),this.$o=p.TextAlignment.START}vo(){return!1}zo(){const e=document.createElement("span");return e.appendChild(document.createTextNode(this.message||"")),e}Ah(e){const t=e.getElementsByClassName("ab-in-app-message")[0];l.Ho(t,!0,!0)||(this.slideFrom===p.SlideFrom.TOP?t.style.top="0px":t.style.bottom="0px"),super.Ah(e)}bt(){return super.bt(w.cs)}static Qr(e){return new w(e[p.es.ra],e[p.es.sa],e[p.es.Sh],e[p.es.qs],e[p.es.ta],e[p.es.ia],e[p.es.URI],e[p.es.oa],e[p.es.pa],e[p.es.ma],e[p.es.na],e[p.es.ls],e[p.es.ca],e[p.es.fa],e[p.es.da],e[p.es.la],e[p.es.ga],e[p.es.ja],e[p.es.xa],e[p.es.ka],e[p.es.CSS],e[p.es.qa])}}function y(e){if(!e)return null;if(e.is_control)return o.fromJson(e);let t=e.type;null!=t&&(t=t.toUpperCase());const n=e.message,i=e.text_align_message,r=e.slide_from,s=e.extras,c=e.trigger_id,l=e.click_action,u=e.uri,d=e.open_target,h=e.message_close,m=e.duration,y=e.icon,b=e.image_url,E=e.image_style,S=e.icon_color,T=e.icon_bg_color,A=e.bg_color,C=e.text_color,I=e.close_btn_color,O=e.header,N=e.text_align_header,P=e.header_text_color,k=e.frame_color,R=[];let L=e.btns;null==L&&(L=[]);for(let e=0;e<L.length;e++)R.push(g.fromJson(L[e]));const x=e.crop_type,M=e.orientation,D=e.animate_in,j=e.animate_out;let U=e.html_id,B=e.css;null!=U&&""!==U&&null!=B&&""!==B||(U=void 0,B=void 0);const F=e.message_extras;let G;if(t===_.cs||t===p.bo.Fo)G=new _(n,i,s,c,l,u,d,h,m,y,b,E,S,T,A,C,I,D,j,O,N,P,k,R,x,U,B,F);else if(t===v.cs)G=new v(n,i,s,c,l,u,d,h,m,y,b,E,S,T,A,C,I,D,j,O,N,P,k,R,x,M,U,B,F);else if(t===w.cs)G=new w(n,i,r,s,c,l,u,d,h,m,y,b,S,T,A,C,I,D,j,U,B,F);else{if(t!==f.cs&&t!==p.bo.po&&t!==p.bo.Jo)return void a.A.error("Ignoring message with unknown type "+t);{const t=e.message_fields;G=new f(n,s,c,h,m,D,j,k,U,B,t,F),G.trusted=e.trusted||!1}}return G.uo=t,G}function b(e){const t=[];for(const n of e)t.push(new g(n.text,n.backgroundColor,n.textColor,n.borderColor,n.clickAction,n.uri,n.id));return t}w.cs=p.bo.Wr;var E=n(83156),S=n(98853),T=n(59836),A=n(55586);class C{constructor(e){this.xc=e,this.xc=e}zc(e){return null==this.xc||this.xc===e[0]}static fromJson(e){return new C(e?e.event_name:null)}bt(){return this.xc}}var I=n(91691);class O{constructor(e,t,n,i){this.yE=e,this.HE=t,this.comparator=n,this.LE=i,this.yE=e,this.HE=t,this.comparator=n,this.LE=i,this.HE===O.QE.UE&&this.comparator!==O.wE.XE&&this.comparator!==O.wE.BE&&this.comparator!==O.wE.jE&&this.comparator!==O.wE.zE&&(this.LE=(0,A.Zo)(this.LE))}zc(e){let t=null;switch(null!=e&&(t=e[this.yE]),this.comparator){case O.wE.FE:return null!=t&&t.valueOf()===this.LE.valueOf();case O.wE.kE:return null==t||t.valueOf()!==this.LE.valueOf();case O.wE.xE:return null!=t&&typeof t==typeof this.LE&&t>this.LE;case O.wE.XE:return this.HE===O.QE.UE?null!=t&&(0,I.$P)(t)&&(0,A.Jd)(t)<=this.LE.valueOf():null!=t&&typeof t==typeof this.LE&&t>=this.LE;case O.wE.JE:return null!=t&&typeof t==typeof this.LE&&t<this.LE;case O.wE.BE:return this.HE===O.QE.UE?null!=t&&(0,I.$P)(t)&&(0,A.Jd)(t)>=this.LE.valueOf():null!=t&&typeof t==typeof this.LE&&t<=this.LE;case O.wE.VE:return null!=t&&"string"==typeof t&&typeof t==typeof this.LE&&null!=t.match(this.LE);case O.wE.qE:return null!=t;case O.wE.PE:return null==t;case O.wE.jE:return null!=t&&(0,I.$P)(t)&&(0,A.DA)(t)<this.LE;case O.wE.zE:return null!=t&&(0,I.$P)(t)&&(0,A.DA)(t)>this.LE;case O.wE.WE:return null==t||typeof t!=typeof this.LE||"string"!=typeof t||null==t.match(this.LE)}return!1}static fromJson(e){return new O(e.property_key,e.property_type,e.comparator,e.property_value)}bt(){let e=this.LE;return(0,I.$P)(this.LE)&&(e=(0,A.UK)(e.valueOf())),{k:this.yE,t:this.HE,c:this.comparator,v:e}}static Rn(e){return new O(e.k,e.t,e.c,e.v)}}O.QE={ZE:"boolean",$E:"number",tT:"string",UE:"date"},O.wE={FE:1,kE:2,xE:3,XE:4,JE:5,BE:6,VE:10,qE:11,PE:12,jE:15,zE:16,WE:17};class N{constructor(e){this.filters=e,this.filters=e}zc(e){let t=!0;for(let n=0;n<this.filters.length;n++){const i=this.filters[n];let r=!1;for(let t=0;t<i.length;t++)if(i[t].zc(e)){r=!0;break}if(!r){t=!1;break}}return t}static fromJson(e){if(null==e||!(0,I.cy)(e))return null;const t=[];for(let n=0;n<e.length;n++){const i=[],r=e[n];for(let e=0;e<r.length;e++)i.push(O.fromJson(r[e]));t.push(i)}return new N(t)}bt(){const e=[];for(let t=0;t<this.filters.length;t++){const n=this.filters[t],i=[];for(let e=0;e<n.length;e++)i.push(n[e].bt());e.push(i)}return e}static Rn(e){const t=[];for(let n=0;n<e.length;n++){const i=[],r=e[n];for(let e=0;e<r.length;e++)i.push(O.Rn(r[e]));t.push(i)}return new N(t)}}class P{constructor(e,t){this.xc=e,this.tf=t,this.xc=e,this.tf=t}zc(e){if(null==this.xc||null==this.tf)return!1;const t=e[0],n=e[1];return t===this.xc&&this.tf.zc(n)}static fromJson(e){return new P(e?e.event_name:null,e?N.fromJson(e.property_filters):null)}bt(){return{e:this.xc,pf:this.tf?this.tf.bt():null}}}class k{constructor(e,t){this.if=e,this.rf=t,this.if=e,this.rf=t}zc(e){if(null==this.if)return!1;const t=D.sf(e[0],this.if);if(!t)return!1;let n=null==this.rf||0===this.rf.length;if(null!=this.rf)for(let t=0;t<this.rf.length;t++)if(this.rf[t]===e[1]){n=!0;break}return t&&n}static fromJson(e){return new k(e?e.id:null,e?e.buttons:null)}bt(){return this.if}}class R{constructor(e){this.productId=e,this.productId=e}zc(e){return null==this.productId||e[0]===this.productId}static fromJson(e){return new R(e?e.product_id:null)}bt(){return this.productId}}class L{constructor(e,t){this.productId=e,this.tf=t,this.productId=e,this.tf=t}zc(e){if(null==this.productId||null==this.tf)return!1;const t=e[0],n=e[1];return t===this.productId&&this.tf.zc(n)}static fromJson(e){return new L(e?e.product_id:null,e?N.fromJson(e.property_filters):null)}bt(){return{id:this.productId,pf:this.tf?this.tf.bt():null}}}class x{constructor(e){this.if=e,this.if=e}zc(e){return null==this.if||D.sf(e[0],this.if)}static fromJson(e){return new x(e?e.campaign_id:null)}bt(){return this.if}}var M=n(14528);class D{constructor(e,t){this.type=e,this.data=t,this.type=e,this.data=t}_c(e,t){return D.Ec[this.type]===e&&(null==this.data||this.data.zc(t))}static sf(e,t){let n=null;try{n=window.atob(e)}catch(t){return a.A.info("Failed to unencode analytics id "+e+": "+(0,c.u)(t)),!1}return t===n.split("_")[0]}static fromJson(e){const t=e.type;let n=null;switch(t){case D.Or.OPEN:case D.Or.As:break;case D.Or.Rr:n=R.fromJson(e.data);break;case D.Or.Cc:n=L.fromJson(e.data);break;case D.Or.hr:n=x.fromJson(e.data);break;case D.Or.Ee:n=C.fromJson(e.data);break;case D.Or.Pc:n=P.fromJson(e.data);break;case D.Or.Zr:n=k.fromJson(e.data)}return new D(t,n)}bt(){return{t:this.type,d:this.data?this.data.bt():null}}static Rn(e){let t,n=null;switch(e.t){case D.Or.OPEN:case D.Or.As:break;case D.Or.Rr:n=new R(e.d);break;case D.Or.Cc:t=e.d||{},n=new L(t.id,N.Rn(t.pf||[]));break;case D.Or.hr:n=new x(e.d);break;case D.Or.Ee:n=new C(e.d);break;case D.Or.Pc:t=e.d||{},n=new P(t.e,N.Rn(t.pf||[]));break;case D.Or.Zr:n=new k(e.d)}return new D(e.t,n)}}D.Or={OPEN:"open",Rr:"purchase",Cc:"purchase_property",hr:"push_click",Ee:"custom_event",Pc:"custom_event_property",Zr:"iam_click",As:"test"},D.Ec={},D.Ec[D.Or.OPEN]=M.A.OPEN,D.Ec[D.Or.Rr]=M.A.Rr,D.Ec[D.Or.Cc]=M.A.Rr,D.Ec[D.Or.hr]=M.A.hr,D.Ec[D.Or.Ee]=M.A.Ee,D.Ec[D.Or.Pc]=M.A.Ee,D.Ec[D.Or.Zr]=M.A.Zr,D.Ec[D.Or.As]=M.A.As;class j{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:j.td,l=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0;this.id=e,this.sd=t,this.startTime=n,this.endTime=i,this.priority=r,this.type=o,this.data=s,this.ed=a,this.rd=c,this.Jr=l,this.hd=u,this.od=d,this.id=e,this.sd=t||[],void 0===n&&(n=null),this.startTime=n,void 0===i&&(i=null),this.endTime=i,this.priority=r||0,this.type=o,this.ed=a||0,null==l&&(l=1e3*(this.ed+30)),this.Jr=l,this.data=s,null!=c&&(this.rd=c),this.hd=u,this.od=d||null}nd(e){return null==this.od||this.rd!==j.td&&e-this.od>=1e3*this.rd}ad(e){this.od=e}ud(e){const t=e+1e3*this.ed;return Math.max(t-(new Date).valueOf(),0)}dd(e){const t=(new Date).valueOf()-e,n=null==e||isNaN(t)||null==this.Jr||t<this.Jr;return n||a.A.info(`Trigger action ${this.type} is no longer eligible for display - fired ${t}ms ago and has a timeout of ${this.Jr}ms.`),!n}static fromJson(e){const t=e.id,n=[];for(let t=0;t<e.trigger_condition.length;t++)n.push(D.fromJson(e.trigger_condition[t]));const i=(0,A.Zo)(e.start_time),r=(0,A.Zo)(e.end_time),o=e.priority,s=e.type,a=e.delay,c=e.re_eligibility,l=e.timeout,u=e.data,d=e.min_seconds_since_last_trigger;return(0,I.BY)(j.Or,s,"Could not construct Trigger from server data","Trigger.Types")?new j(t,n,i,r,o,s,u,a,c,l,d):null}bt(){const e=[];for(let t=0;t<this.sd.length;t++)e.push(this.sd[t].bt());return{i:this.id,c:e,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.ed,r:this.rd,tm:this.Jr,ss:this.hd,ld:this.od}}static Rn(e){const t=[],n=e.c||[];for(let e=0;e<n.length;e++)t.push(D.Rn(n[e]));return new j(e.i,t,(0,A.jU)(e.s),(0,A.jU)(e.e),e.p,e.t,e.da,e.d,e.r,e.tm,e.ss,e.ld)}}j.Or={Cr:"inapp",md:"templated_iam"},j.td=-1;var U=n(56561),B=n(93520),F=n(41720),G=n(28975),V=n(32287);class W{constructor(e,t,n,i){this.S=e,this.T=t,this.C=n,this.Cs=i,this.S=e,this.T=t,this.C=n,this.Cs=i,this.Mi=new d.A,r.Ay.F(this.Mi),this.Bi=1e3,this._i=6e4,this.Pi=null,this.Gi=null,this.$i=null}Oi(){return this.Mi}Xi(e){return this.Mi.Dt(e)}Hi(){return this.Pi}Ji(e){this.Pi=e}ut(e,t,n,i){const r=new S.A;let s;if(t===T.w.Ki||e instanceof o){if(!e._t())return a.A.info("This in-app message has already received an impression. Ignoring analytics event."),r}else if((t===T.w.Li||e instanceof f&&t===T.w.Qi)&&!e.$t(i))return a.A.info("This in-app message has already received a click. Ignoring analytics event."),r;return s=e instanceof o?{trigger_ids:[e.triggerId]}:this.Vi(e),null==s?r:(e.messageExtras&&(s.message_extras=e.messageExtras),null!=n&&(s.bid=n),m.A.ut(t,s))}Wi(e,t){const n=new S.A;if(!e.$t())return a.A.info("This in-app message button has already received a click. Ignoring analytics event."),n;const i=this.Vi(t);return null==i?n:e.id===g.Yi?(a.A.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),n):(null!=e.id&&(i.bid=e.id),m.A.ut(T.w.Qi,i))}Zi(e){const t=e.messageFields;return null!=t&&t.is_push_primer||!1}Ir(e){if(!(e instanceof p))return;const t=e=>{if(!e)return;const t=(0,B.jj)(e);return(0,B.qj)(t)?(0,B.$6)(B.mY.Mr,"In-App Message"):(0,B.dy)(t)&&!F.A.Tr()?(0,B.$6)(B.mY.wr,"In-App Message"):void 0};if(this.Zi(e)&&!F.A.Tr())return"In-App Message contains a push prompt, but is not eligible for a push prompt. Ignoring.";const n=e.buttons||[];let i;for(const e of n)if(e.clickAction===p.ClickAction.URI&&e.uri&&U.nx.test(e.uri)&&(i=t(e.uri),i))return i;return e.clickAction===p.ClickAction.URI&&e.uri&&U.nx.test(e.uri)?t(e.uri):void 0}Br(e,t){t!==this.$i&&this._r(),this.Gi=e,this.$i=t}_r(){null!=this.Gi&&(clearTimeout(this.Gi),this.Gi=null,this.$i=null)}qr(e,t,n,r){var o=this;const s=this.S;if(!s)return;this.$i&&e.triggerId!==this.$i&&(this._r(),G.A.vi(this.C,G.A.O.Er));const c=s.Gr(!1,!1),l=s.H(c);l.template={trigger_id:e.triggerId,trigger_event_type:t},null!=n&&(l.template.data=n.Nr());const u=s.J(l,G.A.O.Er);s.V(l,function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;const c=o.S;if(!c)return;const d=(new Date).valueOf();G.A.W(o.C,G.A.O.Er,d),-1!==s&&u.push(["X-Braze-Req-Tokens-Remaining",s.toString()]);let h,p,f=!1;i.A.Y({url:`${c.Z()}/template/`,data:l,headers:u,tt:t=>{if(!c.st(l,t,u))return void("function"==typeof e.$r&&e.$r());if(c.it(),null==t||null==t.templated_message)return;const n=t.templated_message;if(n.type!==j.Or.Cr)return;const i=y(n.data);if(null==i)return;const r=o.Ir(i);if(r)return a.A.error(r),void("function"==typeof e.$r&&e.$r());"function"==typeof e.Xr&&e.Xr(i)},error:t=>{f=!0,h=t,p=`getting user personalization for message ${e.triggerId}.`},nt:(i,s)=>{if((new Date).valueOf()-e.Hr<e.Jr){let i=0;if(f){const t=Math.min(e.Jr,o._i),n=o.Bi;null==r&&(r=n),i=Math.min(t,(0,E.C)(n,3*r))}c.rt(s,()=>{o.qr(e,t,n,i)},G.A.O.Er,t=>o.Br(t,e.triggerId),()=>o._r(),i)}f&&c.et(h,p)}})},G.A.O.Er)}Vi(e){if(null==e.triggerId)return a.A.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;const t={};return null!=e.triggerId&&(t.trigger_ids=[e.triggerId]),t}sn(e){return!!this.C&&!(!(e&&e instanceof p&&e.constructor!==p)||e instanceof o)&&this.C.Bt(V.d.gt.Kr,e.bt())}Ar(){if(!this.C)return null;const e=this.C.ft(V.d.gt.Kr);if(!e)return null;let t;switch(e.type){case p.bo.Lr:t=v.Qr(e);break;case p.bo.Ur:case p.bo.po:case p.bo.Jo:t=f.Qr(e);break;case p.bo.Vr:case p.bo.Fo:t=_.Qr(e);break;case p.bo.Wr:t=w.Qr(e)}return t&&this.Yr(),t}Yr(){this.C&&this.C.Ut(V.d.gt.Kr)}}const H={aa:null,l:!1,ea:()=>(H.p(),H.aa||(H.aa=new W(r.Ay.g(),r.Ay.P(),r.Ay.j(),r.Ay.ir())),H.aa),p:()=>{H.l||(r.Ay.h(H),H.l=!0)},destroy:()=>{H.aa=null,H.l=!1}},$=H;var q=n(53988),z=n(13537);class K{constructor(e,t,n,i,r){this.triggerId=e,this.Xr=t,this.$r=n,this.Hr=i,this.Jr=r,this.triggerId=e,this.Xr=t,this.$r=n,this.Hr=i,this.Jr=r}static fromJson(e,t,n,i,r){return null==e||null==e.trigger_id?null:new K(e.trigger_id,t,n,i,r)}}class Y extends q.A{constructor(e,t,n,i,r){super(),this.tg=e,this.Ts=t,this.C=n,this.Fi=i,this.ig=r,this.tg=e,this.Ts=t,this.C=n,this.Fi=i,this.ig=r,this.sg=[],this.eg=[],this.hg=null,this.ng={},this.og={},this.triggers=[],this.lg=0,this.ag(),this.gg()}fg(){if(this.C){this.hg=this.C.ft(V.d.gt.aE)||this.hg,this.ng=this.C.ft(V.d.gt.iE)||this.ng,this.og=this.C.ft(V.d.gt.nE)||this.og;for(let e=0;e<this.triggers.length;e++){const t=this.triggers[e];t.id&&null!=this.og[t.id]&&t.ad(this.og[t.id])}}}ag(){if(!this.C)return;this.lg=this.C.ft(V.d.gt.oE)||0;const e=this.C.ft(V.d.gt.rE)||[],t=[];for(let n=0;n<e.length;n++)t.push(j.Rn(e[n]));this.triggers=t,this.fg()}gg(){const e=this,t=function(t,n,i,r,o){return function(){e.cg(t,n,i,r,o)}},n={};for(const e of this.triggers)e.id&&(n[e.id]=e);let i=!1;for(let e=0;e<this.triggers.length;e++){const r=this.triggers[e];if(r.id&&null!=this.ng[r.id]){const e=this.ng[r.id],o=[];for(let i=0;i<e.length;i++){const s=e[i],a=r.ud(s.Hr||0);if(a>0){let e,i;o.push(s),null!=s.ug&&(e=s.ug),null!=s.dg&&z.A.RE(s.dg)&&(i=z.A.Rn(s.dg));const c=[];if(s.pg&&(0,I.cy)(s.pg))for(let e=0;e<s.pg.length;e++){const t=n[s.pg[e]];null!=t&&c.push(t)}this.eg.push(window.setTimeout(t(r,s.Hr||0,e,i,c),a))}}this.ng[r.id].length>o.length&&(this.ng[r.id]=o,i=!0,0===this.ng[r.id].length&&delete this.ng[r.id])}}i&&this.C&&this.C.Bt(V.d.gt.iE,this.ng)}mg(){if(!this.C)return;const e=[];for(let t=0;t<this.triggers.length;t++)e.push(this.triggers[t].bt());this.lg=(new Date).valueOf(),this.C.Bt(V.d.gt.rE,e),this.C.Bt(V.d.gt.oE,this.lg)}bg(){this.C&&((this.C.ft(V.d.gt.oE)||0)>this.lg?this.ag():this.fg())}U(e){let t=!1;if(null!=e&&e.triggers){this.ig.Yr(),this.fg();const n={},i={};this.triggers=[];for(let r=0;r<e.triggers.length;r++){const o=j.fromJson(e.triggers[r]);if(o){o.id&&null!=this.og[o.id]&&(o.ad(this.og[o.id]),n[o.id]=this.og[o.id]),o.id&&null!=this.ng[o.id]&&(i[o.id]=this.ng[o.id]);for(let e=0;e<o.sd.length;e++)if(o.sd[e]._c(M.A.As,null)){t=!0;break}this.triggers.push(o)}}(0,I.n4)(this.og,n)||(this.og=n,this.C&&this.C.Bt(V.d.gt.nE,this.og)),(0,I.n4)(this.ng,i)||(this.ng=i,this.C&&this.C.Bt(V.d.gt.iE,this.ng)),this.mg(),t&&(a.A.info("Trigger with test condition found, firing test."),this.Ce(M.A.As)),this.Ce(M.A.OPEN);const r=this.sg;let o;this.sg=[];for(let e=0;e<r.length;e++)o=Array.prototype.slice.call(r[e]),this.Ce(...o)}}cg(e,t,n,i,r){const o=i=>{this.fg();const r=(new Date).valueOf();e.dd(t)||(!1===navigator.onLine&&e.type===j.Or.Cr&&i.imageUrl?a.A.info(`Not showing ${e.type} trigger action ${e.id} due to offline state.`):e.nd(r)&&this.wg(e,r,n)?0===this.Ts.hc()?a.A.info(`Not displaying trigger ${e.id} because neither automaticallyShowInAppMessages() nor subscribeToInAppMessage() were called.`):(this.Ts.X([i]),this.yg(e,r)):a.A.info(`Not displaying trigger ${e.id} because display time fell outside of the acceptable time window.`))},s=()=>{this.fg();const o=r.pop();if(null!=o)if(this.Tg(o,t,n,i,r),o.dd(t)){let e=`Server aborted in-app message display, but the timeout on fallback trigger ${o.id} has already elapsed.`;r.length>0&&(e+=" Continuing to fall back."),a.A.info(e),s()}else{a.A.info(`Server aborted in-app message display. Falling back to lower priority ${o.type} trigger action ${e.id}.`);const s=1e3*o.ed-((new Date).valueOf()-t);s>0?this.eg.push(window.setTimeout(()=>{this.cg(o,t,n,i,r)},s)):this.cg(o,t,n,i,r)}};let c,l,u;switch(e.type){case j.Or.Cr:if(c=y(e.data),null==c){a.A.error(`Could not parse trigger data for trigger ${e.id}, ignoring.`);break}if(l=this.ig.Ir(c),l){a.A.error(l),s();break}o(c);break;case j.Or.md:if(u=K.fromJson(e.data,o,s,t,e.Jr||0),null==u){a.A.error(`Could not parse trigger data for trigger ${e.id}, ignoring.`);break}this.ig.qr(u,n,i);break;default:a.A.error(`Trigger ${e.id} was of unexpected type ${e.type}, ignoring.`)}}Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;if(!(0,I.BY)(M.A,e,"Cannot fire trigger action.","TriggerEvents"))return;if(this.Fi&&this.Fi.dc())return a.A.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),void this.sg.push(arguments);this.bg();const i=(new Date).valueOf(),r=i-(this.hg||0);let o=!0,s=!0;const c=[];for(let n=0;n<this.triggers.length;n++){const r=this.triggers[n],a=i+1e3*r.ed;if(r.nd(a)&&(null==r.startTime||r.startTime.valueOf()<=i)&&(null==r.endTime||r.endTime.valueOf()>=i)){let n=!1;for(let i=0;i<r.sd.length;i++)if(r.sd[i]._c(e,t)){n=!0;break}n&&(o=!1,this.wg(r,a,e)&&(s=!1,c.push(r)))}}if(o)return void a.A.info(`Trigger event ${e} did not match any trigger conditions.`);if(s)return void a.A.info(`Ignoring ${e} trigger event because a trigger was displayed ${r/1e3}s ago.`);c.sort((e,t)=>e.priority-t.priority);const l=c.pop();null!=l&&(a.A.info(`Firing ${l.type} trigger action ${l.id} from trigger event ${e}.`),this.Tg(l,i,e,n,c),0===l.ed?this.cg(l,i,e,n,c):this.eg.push(window.setTimeout(()=>{this.cg(l,i,e,n,c)},1e3*l.ed)))}changeUser(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.triggers=[],this.C&&this.C.Ut(V.d.gt.rE),!e){this.sg=[],this.hg=null,this.og={},this.ng={};for(let e=0;e<this.eg.length;e++)clearTimeout(this.eg[e]);this.eg=[],this.C&&(this.C.Ut(V.d.gt.aE),this.C.Ut(V.d.gt.nE),this.C.Ut(V.d.gt.iE))}}clearData(){this.triggers=[],this.hg=null,this.og={},this.ng={};for(let e=0;e<this.eg.length;e++)clearTimeout(this.eg[e]);this.eg=[]}wg(e,t,n){if(null==this.hg)return!0;if(n===M.A.As)return a.A.info("Ignoring minimum interval between trigger because it is a test type."),!0;let i=e.hd;return null==i&&(i=this.tg),t-this.hg>=1e3*i}Tg(e,t,n,i,r){this.fg(),e.id&&(this.ng[e.id]=this.ng[e.id]||[]);const o={};let s;o.Hr=t,o.ug=n,null!=i&&(s=i.bt()),o.dg=s;const a=[];for(const e of r)e.id&&a.push(e.id);o.pg=a,e.id&&this.ng[e.id].push(o),this.C&&this.C.Bt(V.d.gt.iE,this.ng)}yg(e,t){this.fg(),e.ad(t),this.hg=t,e.id&&(this.og[e.id]=t),this.C&&(this.C.Bt(V.d.gt.aE,t),this.C.Bt(V.d.gt.nE,this.og))}}const J={l:!1,provider:null,m:()=>(J.p(),J.provider||J.rg(),J.provider),rg:()=>{if(!J.provider){const e=r.Ay.ee(r.lw.Xh);J.provider=new Y(null!=e?e:30,$.ea().Oi(),r.Ay.j(),r.Ay.rn(),$.ea()),r.Ay._(J.provider)}},p:()=>{J.l||(J.rg(),r.Ay.h(J),J.l=!0)},destroy:()=>{J.provider=null,J.l=!1}}},46987:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},47245:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NormalJsonrpcTransformer=void 0;var i=n(13762),r=function(){function e(){}return e.prototype.transformRequest=function(e){return e},e.prototype.transformResponse=function(e){if(!this.isValidProtocol(e))throw new i.InvalidRpcError("Invalid response protocol");return this.transformRawResponseData(e)},e.prototype.isErrorResponse=function(e){return"object"==typeof e&&null!==e&&"error"in e},e.prototype.isValidProtocol=function(e){if("object"!=typeof e||!e)return!1;for(var t=0,n=["jsonrpc"];t<n.length;t++)if(!(n[t]in e))return!1;return!(!("result"in e)&&!this.isErrorResponse(e))},e.prototype.transformRawResponseData=function(e){var t={id:null,jsonrpc:"2.0"};return"error"in e?(t.error=e.error,t):(t.result=e.result,t)},e}();t.NormalJsonrpcTransformer=r},48244:(e,t,n)=>{"use strict";n.d(t,{Fn:()=>s,KG:()=>i,et:()=>l,mO:()=>a,uR:()=>c,uy:()=>o,xE:()=>r});const i="setCustomUserAttribute",r="Braze must be initialized before calling methods.",o=30,s=30,a=72e5,c=15,l=1},49981:(e,t,n)=>{!function(e){var t=function(){for(var e=["webkit","moz","ms"],t=document.createElement("div").style,n=("transform"in t?"transform":void 0),i=0,r=e.length;i<r;i++){var o=e[i]+"Transform";if(o in t){n=o;break}}return n}(),n=function(n,i){if(n.item=this,this.element=n,"IMG"===n.tagName?(this.fullWidth=n.width,this.fullHeight=n.height):(n.style.display="inline-block",this.fullWidth=n.offsetWidth,this.fullHeight=n.offsetHeight),n.style.position="absolute",i.mirror&&"IMG"===this.element.tagName){this.reflection=e(n).reflect(i.mirror).next()[0];var r=e(this.reflection);this.reflection.fullHeight=r.height(),r.css("margin-top",i.mirror.gap+"px"),r.css("width","100%"),n.style.width="100%",this.element=this.element.parentNode,this.element.item=this,this.element.alt=n.alt,this.element.title=n.title}t&&i.transforms&&(this.element.style[t+"Origin"]="0 0"),this.moveTo=function(e,n,r){this.width=this.fullWidth*r,this.height=this.fullHeight*r,this.x=e,this.y=n,this.scale=r;var o=this.element.style;o.zIndex=""+100*r|0,t&&i.transforms?o[t]="translate("+e+"px, "+n+"px) scale("+r+")":(i.mirror&&"IMG"===this.element.tagName&&(this.reflection.style.marginTop=i.mirror.gap*r+"px"),o.width=this.width+"px",o.left=e+"px",o.top=n+"px")}},i=window.performance&&window.performance.now?function(){return performance.now()}:function(){return+new Date},r=window.cancelAnimationFrame||window.cancelRequestAnimationFrame,o=window.requestAnimationFrame;!function(){for(var e=["webkit","moz","ms"],t=0,n=e.length;t<n&&!r;t++)r=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"],o=o&&window[e[t]+"RequestAnimationFrame"]}();var s=function(t,s){var a=this,c=e(t);this.items=[],this.xOrigin=null===s.xOrigin?.5*c.width():s.xOrigin,this.yOrigin=null===s.yOrigin?.1*c.height():s.yOrigin,this.xRadius=null===s.xRadius?c.width()/2.3:s.xRadius,this.yRadius=null===s.yRadius?c.height()/6:s.yRadius,this.farScale=s.farScale,this.rotation=this.destRotation=Math.PI/2,this.speed=s.speed,this.smooth=s.smooth,this.fps=s.fps,this.timer=0,this.autoPlayAmount=s.autoPlay,this.autoPlayDelay=s.autoPlayDelay,this.autoPlayTimer=0,this.frontItemClass=s.frontItemClass,this.onLoaded=s.onLoaded,this.onRendered=s.onRendered,this.onAnimationFinished=s.onAnimationFinished,this.itemOptions={transforms:s.transforms},s.mirror&&(this.itemOptions.mirror=e.extend({gap:2},s.mirror)),c.css({position:"relative",overflow:"hidden"}),this.renderItem=function(e,t){var n=this.items[e],i=Math.sin(t),r=this.farScale,o=r+(1-r)*(i+1)*.5;return n.moveTo(this.xOrigin+o*(Math.cos(t)*this.xRadius-.5*n.fullWidth),this.yOrigin+o*i*this.yRadius,o),n},this.render=function(){for(var t=this.items.length,n=2*Math.PI/t,i=this.rotation,r=this.nearestIndex(),o=0;o<t;o++){var s=this.renderItem(o,i);o===r?e(s.element).addClass(this.frontItemClass):e(s.element).removeClass(this.frontItemClass),i+=n}"function"==typeof this.onRendered&&this.onRendered(this)},this.playFrame=function(){var e=a.destRotation-a.rotation,t=i(),n=.002*(t-a.lastTime);a.lastTime=t,Math.abs(e)<.003?(a.rotation=a.destRotation,a.pause(),"function"==typeof a.onAnimationFinished&&a.onAnimationFinished()):(a.rotation=a.destRotation-e/(1+a.speed*n),a.scheduleNextFrame()),a.render()},this.scheduleNextFrame=function(){this.lastTime=i(),this.timer=this.smooth&&r?o(a.playFrame):setTimeout(a.playFrame,1e3/this.fps)},this.itemsRotated=function(){return this.items.length*(Math.PI/2-this.rotation)/(2*Math.PI)},this.floatIndex=function(){var e=this.items.length,t=this.itemsRotated()%e;return t<0?t+e:t},this.nearestIndex=function(){return Math.round(this.floatIndex())%this.items.length},this.nearestItem=function(){return this.items[this.nearestIndex()]},this.play=function(){0===this.timer&&this.scheduleNextFrame()},this.pause=function(){this.smooth&&r?r(this.timer):clearTimeout(this.timer),this.timer=0},this.go=function(e){this.destRotation+=2*Math.PI/this.items.length*e,this.play()},this.goTo=function(e){var t=this.items.length,n=e-this.floatIndex()%t;return 2*Math.abs(n)>t&&(n-=n>0?t:-t),this.destRotation=this.rotation,this.go(-n),n},this.deactivate=function(){this.pause(),clearInterval(this.autoPlayTimer),s.buttonLeft&&s.buttonLeft.unbind("click"),s.buttonRight&&s.buttonRight.unbind("click"),c.unbind(".cloud9")},this.autoPlay=function(){this.autoPlayTimer=setInterval(function(){a.go(a.autoPlayAmount)},this.autoPlayDelay)},this.enableAutoPlay=function(){c.bind("mouseover.cloud9",function(){clearInterval(a.autoPlayTimer)}),c.bind("mouseout.cloud9",function(){a.autoPlay()}),this.autoPlay()},this.bindControls=function(){s.buttonLeft&&s.buttonLeft.bind("click",function(){return a.go(-1),!1}),s.buttonRight&&s.buttonRight.bind("click",function(){return a.go(1),!1}),s.mouseWheel&&c.bind("mousewheel.cloud9",function(e,t){return a.go(t>0?1:-1),!1}),s.bringToFront&&c.bind("click.cloud9",function(t){var n=e(t.target).closest("."+s.itemClass);if(0!==n.length){var i=a.goTo(a.items.indexOf(n[0].item));Math.abs(i)>.5&&t.preventDefault()}})};var l=c.find("."+s.itemClass);this.finishInit=function(){for(var e=0;e<l.length;e++){var t=l[e];if("IMG"===t.tagName&&(void 0===t.width||void 0!==t.complete&&!t.complete))return}for(clearInterval(this.initTimer),e=0;e<l.length;e++)this.items.push(new n(l[e],this.itemOptions));c.bind("mousedown onselectstart",function(){return!1}),0!==this.autoPlayAmount&&this.enableAutoPlay(),this.bindControls(),this.render(),"function"==typeof this.onLoaded&&this.onLoaded(this)},this.initTimer=setInterval(function(){a.finishInit()},50)};e.fn.Cloud9Carousel=function(t){return this.each(function(){t=e.extend({xOrigin:null,yOrigin:null,xRadius:null,yRadius:null,farScale:.5,transforms:!0,smooth:!0,fps:30,speed:4,autoPlay:0,autoPlayDelay:4e3,bringToFront:!1,itemClass:"cloud9-item",frontItemClass:null,handle:"carousel"},t),e(this).data(t.handle,new s(this,t))})}}(n(44436)||window.Zepto)},50670:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcRequestWrapper=t.ErrorCode=t.Timeout=void 0;var a,c,l=n(57868),u=n(45424),d=n(11223),h=n(62959),p=n(64614);!function(e){e[e.TIMEOUT_5_SECONDS=5e3]="TIMEOUT_5_SECONDS",e[e.TIMEOUT_20_SECONDS=2e4]="TIMEOUT_20_SECONDS",e[e.TIMEOUT_25_SECONDS=25e3]="TIMEOUT_25_SECONDS"}(a=t.Timeout||(t.Timeout={})),function(e){e[e.SERVER_ERROR=500]="SERVER_ERROR"}(c=t.ErrorCode||(t.ErrorCode={}));var f=function(e){function t(t,n,i){void 0===i&&(i=null);var r=e.call(this)||this;return r.timeoutMs=a.TIMEOUT_5_SECONDS,r.requestData={id:i,jsonrpc:"2.0",method:t,params:n},r}return r(t,e),t.prototype.setTransformerAdapter=function(e){this.transformerAdapter=e},t.prototype.run=function(){return o(this,void 0,void 0,function(){var e,t,n,i,r,o,a;return s(this,function(s){switch(s.label){case 0:if(e=Date.now(),!this.url)throw new Error("Server request url not set");if(this.url.match(/https?:\/\//)||(this.url="http://".concat(this.url)),this.logRequestData(),!this.transformerAdapter)throw new Error("Transformer adapter is required");n=this.transformerAdapter.transformRequest(this.requestData),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,l.default.post(this.url,n,{headers:this.requestHeaders,timeout:this.timeoutMs})];case 2:return t=s.sent(),[3,4];case 3:throw i=s.sent(),this.transformError(i);case 4:if(r=t.data,this.logRawResponseData(r),o=this.transformerAdapter.transformResponse(r),this.logResponseData(o),this.isErrorResponse(o))throw a=this.getResponseError(o),this.logErrorResponse(a),a;return this.sendMetric("duration",Date.now()-e),[2,o.result]}})})},t.prototype.setCustomHeaders=function(e){this.requestHeaders=e},t.prototype.getResponseError=function(e){var t,n,i;if(!e.error)throw new Error("Trying to get error from non-error response");var r=e.error.message;r||(r="No error message, failed with code ".concat(null!==(n=null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.code)&&void 0!==n?n:"No code"));var o=null!==(i=e.error.code)&&void 0!==i?i:c.SERVER_ERROR,s=e.error.data;return new u.RpcReceivedError(r,o,s)},t.prototype.isErrorResponse=function(e){return"error"in e},t.prototype.sendMetric=function(e,t){this.metricsAdapter&&this.metricsAdapter.writeMetric(this.getApiMetricData(e,t))},t.prototype.transformError=function(e){return"code"in e&&(0,d.isTimeoutError)(e)?new h.ConnectionTimeoutError(e.message):e},t.prototype.logRequestData=function(){this.loggingAdapter&&this.loggingAdapter.logRequest(this.getApiLogData(),this.requestData)},t.prototype.logRawResponseData=function(e){this.loggingAdapter&&this.loggingAdapter.logResponse(this.getApiLogData(),e)},t.prototype.logResponseData=function(e){this.loggingAdapter&&this.loggingAdapter.logResponse(this.getApiLogData(),e)},t.prototype.logErrorResponse=function(e){if(this.loggingAdapter){var t=this.getApiLogData(),n=this.errorShouldBeLoggedAsInfo(e);this.loggingAdapter.logErrorResponse(t,e,n)}},t.prototype.getApiLogData=function(){return{method:this.requestData.method,url:this.url}},t.prototype.getApiMetricData=function(e,t){return{method:this.requestData.method,metricName:e,metricValue:t,url:this.url}},t.prototype.errorShouldBeLoggedAsInfo=function(e){return!1},t}(p.BaseApiWrapper);t.JsonRpcRequestWrapper=f},51181:(e,t,n)=>{var i,r;i=[n(44436)],void 0===(r=function(e){return e(function(){window.$errorTooltip=e(".error_tooltip"),e(".js-close-button").click(function(){window.$errorTooltip.length&&window.$errorTooltip.hide()})}),function(e,t,n,i){let r,o;void 0!==e&&e.length||console.error("arg `from` empty"),window.$errorTooltip.removeClass("left right terms"),t?window.$errorTooltip.addClass("right"):window.$errorTooltip.addClass("left"),i&&window.$errorTooltip.addClass("terms"),window.$errorTooltip.html(n),o=e.offset(),r=window.$errorTooltip.outerHeight(),t?window.$errorTooltip.css({top:o.top+(e.outerHeight()-r)/2,left:o.left-(window.$errorTooltip.outerWidth()+10)}):window.$errorTooltip.css({top:o.top+(e.outerHeight()-r)/2,left:o.left+e.outerWidth()+10}),window.$errorTooltip.show()}}.apply(t,i))||(e.exports=r)},51588:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46987);function r(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function o(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||o(e.parentRequest,t))}function s(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=r,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var i="",r=n(e,t);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach(function(e){var t="Object";null!==e.implementationType&&(t=s(e.implementationType)),i=i+"\n "+t,e.constraint.metaData&&(i=i+" - "+e.constraint.metaData)})),i},t.circularDependencyToException=function e(t){t.childRequests.forEach(function(t){if(o(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var i=r(t.serviceIdentifier);return n.push(i),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(i.CIRCULAR_DEPENDENCY+" "+n)}e(t)})},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",i=t.getNamedTag(),r=t.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==r&&r.forEach(function(e){n+=e.toString()+"\n"})," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=s},52661:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var i=n(93039),r=n(91691),o=n(79488),s=n(62406);const a=function(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i};var c=n(32287),l=n(6272),u=n(41720),d=n(13786);class h{constructor(e,t,n,i,r,o,s,a,c,l,d){this.un=e,this.an=t,this.hn=n,this.cn=r,this.fn=o,this.ln=s,this.B=a,this.dn=c,this.pn=l,this.C=d,this.un=e,this.an=t,this.hn=n,this.bn=i+"/safari/"+t,this.cn=r||"/service-worker.js",this.ln=s,this.B=a,this.dn=c||!1,this.pn=l||!1,this.C=d,this.yn=u.A.mn(),this.gn=u.A.vn()}wn(){return this.pn}kn(e,t,n,i,r){e.unsubscribe().then(e=>{e?this.Pn(t,n,i,r):(s.A.error("Failed to unsubscribe device from push."),"function"==typeof r&&r(!1))}).catch(e=>{s.A.error("Push unsubscription error: "+e),"function"==typeof r&&r(!1)})}Dn(e,t,n){var i;const r=(e=>{if("string"==typeof e)return e;if(0!==e.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return e.endpoint;let t=e.endpoint;const n=e;return n.Sn&&-1===e.endpoint.indexOf(n.Sn)&&(t=e.endpoint+"/"+n.Sn),t})(e);let o=null,a=null;const c=e;if(null!=c.getKey)try{const e=Array.from(new Uint8Array(c.getKey("p256dh"))),t=Array.from(new Uint8Array(c.getKey("auth")));o=btoa(String.fromCharCode.apply(null,e)),a=btoa(String.fromCharCode.apply(null,t))}catch(e){s.A.error((0,d.u)(e))}const l=(e=>{let t;return e.options&&(t=e.options.applicationServerKey)&&t.byteLength&&t.byteLength>0?btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(t)))).replace(/\+/g,"-").replace(/\//g,"_"):null})(c);null===(i=this.un)||void 0===i||i.An(r,t,o,a,l),r&&"function"==typeof n&&n(r,o,a)}jn(){var e;null===(e=this.un)||void 0===e||e.xn(!0)}Nn(e,t){var n;null===(n=this.un)||void 0===n||n.xn(!1),s.A.info(e),"function"==typeof t&&t(!1)}Un(e,t,n,i){var r;if("default"===t.permission)try{window.safari.pushNotification.requestPermission(this.bn,e,{api_key:this.an,device_id:(null===(r=this.hn)||void 0===r?void 0:r.ve().id)||""},t=>{"granted"===t.permission&&this.un&&this.un.setPushNotificationSubscriptionType(l.A.NotificationSubscriptionTypes.OPTED_IN),this.Un(e,t,n,i)})}catch(e){this.Nn("Could not request permission for push: "+e,i)}else"denied"===t.permission?this.Nn("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",i):"granted"===t.permission&&(s.A.info("Device successfully subscribed to push."),this.Dn(t.deviceToken,new Date,n))}requestPermission(e,t,n){const i=i=>{switch(i){case"granted":return void("function"==typeof e&&e());case"default":return void("function"==typeof t&&t());case"denied":return void("function"==typeof n&&n());default:s.A.error("Received unexpected permission result "+i)}};let r=!1;if("default"!==window.Notification.permission)i(Notification.permission);else{const e=window.Notification.requestPermission(e=>{r&&i(e)});e?e.then(e=>{i(e)}):r=!0}}Pn(e,t,n,i){const r={userVisibleOnly:!0};null!=t&&(r.applicationServerKey=t),e.pushManager.subscribe(r).then(e=>{s.A.info("Device successfully subscribed to push."),this.Dn(e,new Date,n)}).catch(e=>{u.A.isPushBlocked()?(s.A.info("Permission for push notifications was denied."),"function"==typeof i&&i(!1)):(s.A.error("Push subscription failed: "+e),"function"==typeof i&&i(!0))})}Wn(){if(this.dn)return navigator.serviceWorker.getRegistration(this.cn);const e=this.fn?{scope:this.fn}:void 0;return navigator.serviceWorker.register(this.cn,e).then(()=>navigator.serviceWorker.ready.then(e=>(e&&"function"==typeof e.update&&e.update().catch(e=>{s.A.info("ServiceWorker update failed: "+e)}),e)))}_n(e){this.dn||(e.unregister(),s.A.info("Service worker successfully unregistered."))}subscribe(e,t){if(!u.A.isPushSupported())return s.A.info(h.Tn),void("function"==typeof t&&t(!1));if(this.yn){if(!this.dn&&null!=window.location){let e=this.cn;-1===e.indexOf(window.location.host)&&(e=window.location.host+e),-1===e.indexOf(window.location.protocol)&&(e=window.location.protocol+"//"+e)}if(u.A.isPushBlocked())return void this.Nn("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",t);if(this.B&&!this.B.In()&&0===this.B.Et())return s.A.info("Waiting for VAPID key from server config before subscribing to push."),void this.B.Vn(()=>{this.subscribe(e,t)});const n=()=>{s.A.info("Permission for push notifications was denied."),"function"==typeof t&&t(!1)},i=()=>{let e="Permission for push notifications was ignored.";u.A.isPushBlocked()&&(e+=" The browser has automatically blocked further permission requests for a period (probably 1 week)."),s.A.info(e),"function"==typeof t&&t(!0)},d=u.A.isPushPermissionGranted(),h=()=>{!d&&this.un&&this.un.setPushNotificationSubscriptionType(l.A.NotificationSubscriptionTypes.OPTED_IN),this.Wn().then(n=>{if(null==n)return s.A.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush."),void("function"==typeof t&&t(!0));n.pushManager.getSubscription().then(i=>{var l;let u=null;if(null!=(null===(l=this.B)||void 0===l?void 0:l.In())&&(u=a(this.B.In())),i){let a,l=null,d=null;if(this.C&&(a=this.C.ft(c.d.gt.zn)),a&&!(0,r.cy)(a)){let e;try{e=o.A.Rn(a).En}catch(t){e=null}null==e||isNaN(e.getTime())||0===e.getTime()||(l=e,d=new Date(l),d.setMonth(l.getMonth()+6))}null!=u&&i.options&&i.options.applicationServerKey&&i.options.applicationServerKey.byteLength&&i.options.applicationServerKey.byteLength>0&&!(0,r.n4)(u,new Uint8Array(i.options.applicationServerKey))?(i.options.applicationServerKey.byteLength>12?s.A.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):s.A.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),this.kn(i,n,u,e,t)):i.expirationTime&&new Date(i.expirationTime).valueOf()<=(new Date).valueOf()?(s.A.info("Push subscription is expired, creating new subscription."),this.kn(i,n,u,e,t)):a&&(0,r.cy)(a)?this.kn(i,n,u,e,t):null==d?(s.A.info("No push subscription creation date found, creating new subscription."),this.kn(i,n,u,e,t)):d.valueOf()<=(new Date).valueOf()?(s.A.info("Push subscription older than 6 months, creating new subscription."),this.kn(i,n,u,e,t)):(s.A.info("Device already subscribed to push, sending existing subscription to backend."),this.Dn(i,l,e))}else this.Pn(n,u,e,t)}).catch(e=>{s.A.error("Error checking current push subscriptions: "+e)})}).catch(e=>{s.A.error("ServiceWorker registration failed: "+e)})};this.requestPermission(h,i,n)}else if(this.gn){if(null==this.ln||""===this.ln)return s.A.error("You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari"),void("function"==typeof t&&t(!0));const n=window.safari.pushNotification.permission(this.ln);this.Un(this.ln,n,e,t)}}unsubscribe(e,t){if(!u.A.isPushSupported())return s.A.info(h.Tn),void("function"==typeof t&&t());this.yn?navigator.serviceWorker.getRegistration(this.cn).then(n=>{n?n.pushManager.getSubscription().then(i=>{i?(this.jn(),i.unsubscribe().then(i=>{i?(s.A.info("Device successfully unsubscribed from push."),"function"==typeof e&&e()):(s.A.error("Failed to unsubscribe device from push."),"function"==typeof t&&t()),this._n(n)}).catch(e=>{s.A.error("Push unsubscription error: "+e),"function"==typeof t&&t()})):(s.A.info("Device already unsubscribed from push."),"function"==typeof e&&e())}).catch(e=>{s.A.error("Error unsubscribing from push: "+e),"function"==typeof t&&t()}):(s.A.info("Device already unsubscribed from push."),"function"==typeof e&&e())}):this.gn&&(this.jn(),s.A.info("Device unsubscribed from push."),"function"==typeof e&&e())}}h.Tn="Push notifications are not supported in this browser.";const p={l:!1,aa:null,ea:()=>(p.p(),p.aa||(p.aa=new h(i.Ay.mr(),i.Ay.Ma(),i.Ay.ue(),i.Ay.Z(),i.Ay.ee(i.lw._a),i.Ay.ee(i.lw.Aa),i.Ay.ee(i.lw.Ba),i.Ay.v(),i.Ay.ee(i.lw.Ca),i.Ay.ee(i.lw.Da),i.Ay.j())),p.aa),p:()=>{p.l||(i.Ay.h(p),p.l=!0)},destroy:()=>{p.aa=null,p.l=!1}},f=p},52797:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2209),r=n(96478),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},53988:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(){}U(e){}changeUser(){}clearData(){}}},54252:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46987),r=n(58478),o=n(13089);t.postConstruct=function(){return function(e,t,n){var s=new o.Metadata(r.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,e.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,s,e.constructor)}}},55586:(e,t,n)=>{"use strict";n.d(t,{DA:()=>d,EQ:()=>a,Jd:()=>u,S3:()=>l,UK:()=>r,YX:()=>o,Zo:()=>s,jU:()=>c});var i=n(91691);function r(e){let t=e/1e3;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t=Math.floor(t)),t}function o(e){return 1e3*e}function s(e){if(null==e)return null;const t=parseInt(e.toString());return isNaN(t)?null:new Date(1e3*t)}function a(e){return null!=e&&(0,i.$P)(e)?e.toISOString().replace(/\.[0-9]{3}Z$/,""):e}function c(e){return null==e||""===e?null:new Date(e)}function l(e){return null==e||""===e?(new Date).valueOf():e}function u(e){return((new Date).valueOf()-e.valueOf())/1e3}function d(e){return(e.valueOf()-(new Date).valueOf())/1e3}},56561:(e,t,n)=>{"use strict";n.d(t,{B9:()=>E,Dz:()=>f,To:()=>T,Z2:()=>b,ZJ:()=>g,fB:()=>y,nx:()=>p,rK:()=>w,uZ:()=>m,xs:()=>S});var i=n(91691),r=n(82551),o=n(62406),s=n(55586),a=n(93520),c=n(48244);const l=/^[^\x00-\x1F\x22]+$/,u=/[$.]/,d=["$add","$update","$remove","$identifier_key","$identifier_value","$new_object","$time","$google_ad_personalization","$google_ad_user_data"],h=new RegExp(/^.+@.+\..+$/),p=/^brazeActions:\/\/v\d+\//;function f(e,t,n){const i=null!=e&&"string"==typeof e&&(""===e||null!=e.match(l));return i||o.A.error(`Cannot ${t} because ${n} "${e}" is invalid.`),i}function g(e){return null!=e&&e.match(u)&&-1===d.indexOf(e)&&o.A.warn("Custom attribute keys cannot contain '$' or '.'"),f(e,"set custom user attribute","the given key")}function m(e){const t=typeof e;return null==e||"number"===t||"boolean"===t||(0,i.$P)(e)||"string"===t}function v(e,t,n){const r=-1!==n;if(r&&n>50)return o.A.error("Nested attributes cannot be more than 50 levels deep."),!1;const a=r?n+1:-1;if((0,i.cy)(e)&&(0,i.cy)(t)){for(let n=0;n<e.length&&n<t.length;n++)if((0,i.$P)(e[n])&&(t[n]=(0,s.EQ)(e[n])),!v(e[n],t[n],a))return!1}else{if(!(0,i.Gv)(e))return m(e);for(const n of(0,i.HP)(e)){const o=e[n];if(r&&!g(n))return!1;if((0,i.$P)(o)&&(t[n]=(0,s.EQ)(o)),!v(o,t[n],a))return!1}}return!0}function _(e,t,n,r,s){let a;return a=(0,i.Gv)(e)||(0,i.cy)(e)?v(e,t,s?1:-1):m(e),a||o.A.error(`Cannot ${n} because ${r} "${e}" is invalid.`),a}function w(e,t,n){const i="string"==typeof e||null===e&&arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i||o.A.error(`Cannot ${t} because ${n} "${e}" is invalid.`),i}function y(e,t,n,a,l){if(null==e&&(e={}),"object"!=typeof e||(0,i.cy)(e))return o.A.error(`${t} requires that ${n} be an object. Ignoring ${l}.`),[!1,null];let u,d;t===c.KG?(u=76800,d="75KB"):(u=51200,d="50KB");const h=JSON.stringify(e);if((0,r.N)(h)>u)return o.A.error(`Could not ${a} because ${n} was greater than the max size of ${d}.`),[!1,null];let p;try{p=JSON.parse(h)}catch(e){return o.A.error(`Could not ${a} because ${n} did not contain valid JSON.`),[!1,null]}for(const n in e){if(t===c.KG&&!g(n))return[!1,null];if(!f(n,a,`the ${l} property name`))return[!1,null];const r=e[n];if(t===c.KG||null!=r){if((0,i.$P)(r)&&(p[n]=(0,s.EQ)(r)),!_(r,p[n],a,`the ${l} property "${n}"`,t===c.KG))return[!1,null]}else delete e[n],delete p[n]}return[!0,p]}function b(e,t){let n=!1,r=!1;const s=()=>{o.A.error("Custom attribute arrays must be either string arrays or object arrays.")};for(const o of t)if("string"==typeof o){if(r)return s(),[!1,!1];if(!f(o,`set custom user attribute "${e}"`,"the element in the given array"))return[!1,!1];n=!0}else{if(!(0,i.Gv)(o))return s(),[!1,!1];if(n)return s(),[!1,!1];if(!y(o,c.KG,"attribute value",`set custom user attribute "${e}"`,"custom user attribute"))return[!1,!1];r=!0}return[n,r]}function E(e){return"string"==typeof e&&null!=e.toLowerCase().match(h)}function S(e){if(!(a.V.properties.type in e))return!1;switch(e[a.V.properties.type]){case a.V.types.io:if(a.V.properties.eo in e)return!0;break;case a.V.types.logCustomEvent:case a.V.types.setEmailNotificationSubscriptionType:case a.V.types.setPushNotificationSubscriptionType:case a.V.types.setCustomUserAttribute:case a.V.types.addToSubscriptionGroup:case a.V.types.removeFromSubscriptionGroup:case a.V.types.addToCustomAttributeArray:case a.V.types.removeFromCustomAttributeArray:case a.V.types.co:case a.V.types.mo:if(a.V.properties.so in e)return!0;break;case a.V.types.requestPushPermission:return!0;default:return!1}return!1}function T(e){let t=!1;return Object.keys(a.V.types).forEach(n=>{a.V.types[n]!==e.toString()||(t=!0)}),t}},56648:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={Du:"invalid_api_key",Tu:"blacklisted",ku:"no_device_identifier",Au:"invalid_json_response",bu:"empty_response",__:"sdk_auth_error"}},56869:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(63539);class r{constructor(){this.Mi={}}Dt(e){if("function"!=typeof e)return null;const t=i.A.ce();return this.Mi[t]=e,t}removeSubscription(e){delete this.Mi[e]}removeAllSubscriptions(){this.Mi={}}hc(){return Object.keys(this.Mi).length}X(e){const t=[];for(const n in this.Mi){const i=this.Mi[n];t.push(i(e))}return t}}},58478:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct"},59584:(e,t)=>{"use strict";var n;t.S=void 0,(n=t.S||(t.S={})).TRIUMPH="triumph",n.TOTALBATTLE="totalbattle"},59836:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});const i={CustomEvent:"ce",Pr:"p",wc:"pc",Ac:"ca",Su:"i",qu:"ie",ts:"cci",rs:"ccic",Mt:"ccc",Wt:"ccd",Fl:"ss",Dl:"se",Ki:"si",Li:"sc",Qi:"sbc",Mc:"sfe",Do:"iec",bc:"lr",vc:"uae",ss:"ci",Ot:"cc",Sc:"lcaa",yc:"lcar",Hn:"inc",On:"add",Gn:"rem",$n:"set",Bn:"ncam",jc:"sgu",yr:"ffi",ro:"bi",ct:"bc"}},60136:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},61840:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},62056:(e,t,n)=>{"use strict";e.exports=function(){if("object"==typeof globalThis)return globalThis;var e;try{e=this||new Function("return this")()}catch(e){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return e}()},62317:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(29043),r=function(){function e(e){this.guid=i.guid(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=r},62406:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const i={init:function(e){void 0===e&&void 0!==i.zg||(i.zg=!!e),i.l||(i.l=!0)},destroy:function(){i.l=!1,i.zg=void 0,i.vd=void 0},setLogger:function(e){"function"==typeof e?(i.init(),i.vd=e):i.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){i.init(),i.zg?(console.log("Disabling Braze logging"),i.zg=!1):(console.log("Enabled Braze logging"),i.zg=!0)},info:function(e){if(i.zg){const t="Braze: "+e;null!=i.vd?i.vd(t):console.log(t)}},warn:function(e){if(i.zg){const t="Braze SDK Warning: "+e+" (v5.9.1)";null!=i.vd?i.vd(t):console.warn(t)}},error:function(e){if(i.zg){const t="Braze SDK Error: "+e+" (v5.9.1)";null!=i.vd?i.vd(t):console.error(t)}}},r=i},62408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=n},62959:function(e,t){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionTimeoutError=void 0;var r=function(e){function t(n){var i=e.call(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i.name="ConnectionTimeoutError",i}return i(t,e),t}(Error);t.ConnectionTimeoutError=r},63539:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={ce:function(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t};return e()+e(!0)+e(!0)+e()}}},64614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseApiWrapper=void 0;var n=function(){function e(){}return e.prototype.setLoggingAdapter=function(e){this.loggingAdapter=e},e.prototype.setMetricsAdapter=function(e){this.metricsAdapter=e},e.prototype.setCmdAdapters=function(e){this.loggingAdapter&&e.setLoggingAdapter(this.loggingAdapter),this.metricsAdapter&&e.setMetricsAdapter(this.metricsAdapter)},e}();t.BaseApiWrapper=n},65985:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46987),r=n(58478),o=n(13089),s=n(1797),a=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=a,t.inject=function(e){return function(t,n,a){if(void 0===e)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(t.name));var c=new o.Metadata(r.INJECT_TAG,e);"number"==typeof a?s.tagParameter(t,n,a,c):s.tagProperty(t,n,c)}}},68014:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),i=new RegExp("("+t+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],r(n),r(i))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n)||[],i=1;i<t.length;i++)t=(e=r(t,i).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=o(n[0]);r!==n[0]&&(t[n[0]]=r)}n=i.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),a=0;a<s.length;a++){var c=s[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},68043:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(58478),r=n(13089),o=n(1797);t.named=function(e){return function(t,n,s){var a=new r.Metadata(i.NAMED_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},68259:(e,t,n)=>{var i,r,o;r=[n(44436)],void 0===(o="function"==typeof(i=function(e){var t=/\+/g;function n(e){return s.raw?e:encodeURIComponent(e)}function i(e){return s.raw?e:decodeURIComponent(e)}function r(e){return n(s.json?JSON.stringify(e):String(e))}function o(n,i){var r=s.raw?n:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),s.json?JSON.parse(e):e}catch(e){}}(n);return e.isFunction(i)?i(r):r}var s=e.cookie=function(t,a,c){if(arguments.length>1&&!e.isFunction(a)){if("number"==typeof(c=e.extend({},s.defaults,c)).expires){var l=c.expires,u=c.expires=new Date;u.setMilliseconds(u.getMilliseconds()+864e5*l)}return document.cookie=[n(t),"=",r(a),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var d=t?void 0:{},h=document.cookie?document.cookie.split("; "):[],p=0,f=h.length;p<f;p++){var g=h[p].split("="),m=i(g.shift()),v=g.join("=");if(t===m){d=o(v,a);break}t||void 0===(v=o(v))||(d[m]=v)}return d};s.defaults={},e.removeCookie=function(t,n){return e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t)}})?i.apply(t,r):i)||(e.exports=o)},68943:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(58478),r=n(13089),o=n(1797);t.targetName=function(e){return function(t,n,s){var a=new r.Metadata(i.NAME_TAG,e);o.tagParameter(t,n,s,a)}}},70235:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46987),r=n(2209),o=n(38108),s=n(51588),a=n(1824),c=function(e,t,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):n}},l=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,o=t.childRequests,u=t.target&&t.target.isArray(),d=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(u&&d)return o.map(function(t){return l(e)(t)});var h=null;if(!t.target.isOptional()||0!==n.length){var p=n[0],f=p.scope===r.BindingScopeEnum.Singleton,g=p.scope===r.BindingScopeEnum.Request;if(f&&p.activated)return p.cache;if(g&&null!==e&&e.has(p.guid))return e.get(p.guid);if(p.type===r.BindingTypeEnum.ConstantValue)h=p.cache;else if(p.type===r.BindingTypeEnum.Function)h=p.cache;else if(p.type===r.BindingTypeEnum.Constructor)h=p.implementationType;else if(p.type===r.BindingTypeEnum.DynamicValue&&null!==p.dynamicValue)h=c("toDynamicValue",p.serviceIdentifier,function(){return p.dynamicValue(t.parentContext)});else if(p.type===r.BindingTypeEnum.Factory&&null!==p.factory)h=c("toFactory",p.serviceIdentifier,function(){return p.factory(t.parentContext)});else if(p.type===r.BindingTypeEnum.Provider&&null!==p.provider)h=c("toProvider",p.serviceIdentifier,function(){return p.provider(t.parentContext)});else{if(p.type!==r.BindingTypeEnum.Instance||null===p.implementationType){var m=s.getServiceIdentifierAsString(t.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+m)}h=a.resolveInstance(p.implementationType,o,l(e))}return"function"==typeof p.onActivation&&(h=p.onActivation(t.parentContext,h)),f&&(p.cache=h,p.activated=!0),g&&null!==e&&!e.has(p.guid)&&e.set(p.guid,h),h}}};t.resolve=function(e){return l(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},70831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(58478),r=n(13089),o=n(1797);t.multiInject=function(e){return function(t,n,s){var a=new r.Metadata(i.MULTI_INJECT_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},71702:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(58478),r=n(13089),o=n(1797);t.unmanaged=function(){return function(e,t,n){var s=new r.Metadata(i.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,s)}}},75455:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46987),r=n(2209),o=n(276),s=n(96478),a=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+i.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(i.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=r.BindingTypeEnum.Function,t},e.prototype.toAutoFactory=function(e){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},new s.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue(function(t){return t.container.get(e)})},e}();t.BindingToSyntax=a},76547:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(58478),r=n(13089),o=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||o(n,t))};t.traverseAncerstors=o;var s=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new r.Metadata(e,t),n}};t.taggedConstraint=s;var a=s(i.NAMED_TAG);t.namedConstraint=a,t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var i=t.bindings[0].implementationType;return e===i}return!1}}},77452:function(e,t,n){var i;!function(r,o){"use strict";var s="function",a="undefined",c="object",l="model",u="name",d="type",h="vendor",p="version",f="architecture",g="console",m="mobile",v="tablet",_="smarttv",w="wearable",y={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b={rgx:function(e,t){for(var n,i,r,a,l,u,d=0;d<t.length&&!l;){var h=t[d],p=t[d+1];for(n=i=0;n<h.length&&!l;)if(l=h[n++].exec(e))for(r=0;r<p.length;r++)u=l[++i],typeof(a=p[r])===c&&a.length>0?2==a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3==a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):o:this[a[0]]=u?a[1].call(this,u,a[2]):o:4==a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):o):this[a]=u||o;d+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(y.has(t[n][i],e))return"?"===n?o:n}else if(y.has(t[n],e))return"?"===n?o:n;return e}},E={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},S={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[u,p],[/(opios)[\/\s]+([\w\.]+)/i],[[u,"Opera Mini"],p],[/\s(opr)\/([\w\.]+)/i],[[u,"Opera"],p],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[u,p],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[u,"IE"],p],[/(edge)\/((\d+)?[\w\.]+)/i],[u,p],[/(yabrowser)\/([\w\.]+)/i],[[u,"Yandex"],p],[/(puffin)\/([\w\.]+)/i],[[u,"Puffin"],p],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[u,"UCBrowser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],p],[/(micromessenger)\/([\w\.]+)/i],[[u,"WeChat"],p],[/(QQ)\/([\d\.]+)/i],[u,p],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[u,p],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[u,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[p,[u,"Facebook"]],[/(headlesschrome) ([\w\.]+)/i],[p,[u,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[u,/(.+)/,"$1 WebView"],p],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[u,/(.+(?:g|us))(.+)/,"$1 $2"],p],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[p,[u,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[u,p],[/(dolfin)\/([\w\.]+)/i],[[u,"Dolphin"],p],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[u,"Chrome"],p],[/(coast)\/([\w\.]+)/i],[[u,"Opera Coast"],p],[/fxios\/([\w\.-]+)/i],[p,[u,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[p,[u,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[p,u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[u,[p,b.str,E.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[u,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[u,"Netscape"],p],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[u,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,y.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[f,/ower/,"",y.lowerize]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[f,y.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[l,h,[d,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[h,"Apple"],[d,v]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[h,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[h,l,[d,v]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[l,[h,"Amazon"],[d,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[l,b.str,E.device.amazon.model],[h,"Amazon"],[d,m]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,h,[d,m]],[/\((ip[honed|\s\w*]+);/i],[l,[h,"Apple"],[d,m]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[h,l,[d,m]],[/\(bb10;\s(\w+)/i],[l,[h,"BlackBerry"],[d,m]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[l,[h,"Asus"],[d,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[h,"Sony"],[l,"Xperia Tablet"],[d,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[l,[h,"Sony"],[d,m]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[h,l,[d,g]],[/android.+;\s(shield)\sbuild/i],[l,[h,"Nvidia"],[d,g]],[/(playstation\s[34portablevi]+)/i],[l,[h,"Sony"],[d,g]],[/(sprint\s(\w+))/i],[[h,b.str,E.device.sprint.vendor],[l,b.str,E.device.sprint.model],[d,m]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[h,l,[d,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[h,[l,/_/g," "],[d,m]],[/(nexus\s9)/i],[l,[h,"HTC"],[d,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[l,[h,"Huawei"],[d,m]],[/(microsoft);\s(lumia[\s\w]+)/i],[h,l,[d,m]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[h,"Microsoft"],[d,g]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[h,"Microsoft"],[d,m]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[l,[h,"Motorola"],[d,m]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[h,"Motorola"],[d,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[h,y.trim],[l,y.trim],[d,_]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[h,"Samsung"],[d,_]],[/\(dtv[\);].+(aquos)/i],[l,[h,"Sharp"],[d,_]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[h,"Samsung"],l,[d,v]],[/smart-tv.+(samsung)/i],[h,[d,_],l],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[h,"Samsung"],l,[d,m]],[/sie-(\w+)*/i],[l,[h,"Siemens"],[d,m]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[h,"Nokia"],l,[d,m]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[l,[h,"Acer"],[d,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[l,[h,"LG"],[d,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[h,"LG"],l,[d,v]],[/(lg) netcast\.tv/i],[h,l,[d,_]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[l,[h,"LG"],[d,m]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[h,"Lenovo"],[d,v]],[/linux;.+((jolla));/i],[h,l,[d,m]],[/((pebble))app\/[\d\.]+\s/i],[h,l,[d,w]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[h,l,[d,m]],[/crkey/i],[[l,"Chromecast"],[h,"Google"]],[/android.+;\s(glass)\s\d/i],[l,[h,"Google"],[d,w]],[/android.+;\s(pixel c)\s/i],[l,[h,"Google"],[d,v]],[/android.+;\s(pixel xl|pixel)\s/i],[l,[h,"Google"],[d,m]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[l,/_/g," "],[h,"Xiaomi"],[d,m]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[l,[h,"Meizu"],[d,v]],[/android.+a000(1)\s+build/i],[l,[h,"OnePlus"],[d,m]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[l,[h,"RCA"],[d,v]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[l,[h,"Dell"],[d,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[l,[h,"Verizon"],[d,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[h,"Barnes & Noble"],l,[d,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[l,[h,"NuVision"],[d,v]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[h,"ZTE"],l,[d,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[l,[h,"Swiss"],[d,m]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[l,[h,"Swiss"],[d,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[l,[h,"Zeki"],[d,v]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[h,"Dragon Touch"],l,[d,v]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[l,[h,"Insignia"],[d,v]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[l,[h,"NextBook"],[d,v]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[h,"Voice"],l,[d,m]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[h,"LvTel"],l,[d,m]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[l,[h,"Envizen"],[d,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[h,l,[d,v]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[l,[h,"MachSpeed"],[d,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[h,l,[d,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[l,[h,"Rotor"],[d,v]],[/android.+(KS(.+))\s+build/i],[l,[h,"Amazon"],[d,v]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[h,l,[d,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[d,y.lowerize],h,l],[/(android.+)[;\/].+build/i],[l,[h,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[u,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[u,p],[/rv\:([\w\.]+).*(gecko)/i],[p,u]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[u,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[u,[p,b.str,E.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[u,"Windows"],[p,b.str,E.os.windows.version]],[/\((bb)(10);/i],[[u,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[u,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[u,"Symbian"],p],[/\((series40);/i],[u],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[u,"Firefox OS"],p],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[u,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[u,"Chromium OS"],p],[/(sunos)\s?([\w\.]+\d)*/i],[[u,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[u,p],[/(haiku)\s(\w+)/i],[u,p],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[p,/_/g,"."],[u,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[u,"Mac OS"],[p,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[u,p]]},T=function(e,t){this[u]=e,this[p]=t},A=function(e){this[f]=e},C=function(e,t,n){this[h]=e,this[l]=t,this[d]=n},I=T,O=T,N=function(e,t){if("object"==typeof e&&(t=e,e=o),!(this instanceof N))return new N(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?y.extend(S,t):S,s=new T,a=new A,c=new C,l=new I,u=new O;return this.getBrowser=function(){return b.rgx.call(s,n,i.browser),s.major=y.major(s.version),s},this.getCPU=function(){return b.rgx.call(a,n,i.cpu),a},this.getDevice=function(){return b.rgx.call(c,n,i.device),c},this.getEngine=function(){return b.rgx.call(l,n,i.engine),l},this.getOS=function(){return b.rgx.call(u,n,i.os),u},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,s=new T,a=new A,c=new C,l=new I,u=new O,this},this};N.VERSION="0.7.14",N.BROWSER={NAME:u,MAJOR:"major",VERSION:p},N.CPU={ARCHITECTURE:f},N.DEVICE={MODEL:l,VENDOR:h,TYPE:d,CONSOLE:g,MOBILE:m,SMARTTV:_,TABLET:v,WEARABLE:w,EMBEDDED:"embedded"},N.ENGINE={NAME:u,VERSION:p},N.OS={NAME:u,VERSION:p},typeof t!==a?(e.exports&&(t=e.exports=N),t.UAParser=N):n.amdO?(i=function(){return N}.call(t,n,t,e))===o||(e.exports=i):r&&(r.UAParser=N);var P=r&&(r.jQuery||r.Zepto);if(typeof P!==a){var k=new N;P.ua=k.getResult(),P.ua.get=function(){return k.getUA()},P.ua.set=function(e){k.setUA(e);var t=k.getResult();for(var n in t)P.ua[n]=t[n]}}}("object"==typeof window?window:this)},78056:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(29043);t.ContainerModule=function(e){this.guid=i.guid(),this.registry=e};t.AsyncContainerModule=function(e){this.guid=i.guid(),this.registry=e}},78615:(e,t,n)=>{"use strict";n(58478);var i=n(88469);t.mc=i.Container;var r=n(2209);r.BindingScopeEnum,r.BindingTypeEnum,r.TargetTypeEnum;var o=n(78056);o.AsyncContainerModule,o.ContainerModule;var s=n(6813);t._G=s.injectable,n(88696).tagged,n(68043).named;var a=n(65985);a.inject,a.LazyServiceIdentifer,n(8792).optional,n(71702).unmanaged,n(70831).multiInject,n(68943).targetName,n(54252).postConstruct,n(31635).MetadataReader,n(29043).guid,n(1797).decorate;var c=n(76547);c.traverseAncerstors,c.taggedConstraint,c.namedConstraint,c.typeConstraint,n(51588).getServiceIdentifierAsString,n(28191).multiBindToService},78699:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(29043),r=function(){function e(e,t,n,r,o){this.guid=i.guid(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,i){var r=new e(t,this.parentContext,this,n,i);return this.childRequests.push(r),r},e}();t.Request=r},79488:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(55586);class r{constructor(e,t,n,i,r){this.endpoint=e,this.En=t,this.publicKey=n,this.Vl=i,this.fl=r,this.endpoint=e||null,this.En=t||null,this.publicKey=n||null,this.Vl=i||null,this.fl=r||null}bt(){return{e:this.endpoint,c:this.En,p:this.publicKey,u:this.Vl,v:this.fl}}static Rn(e){return new r(e.e,(0,i.jU)(e.c),e.p,e.u,e.v)}}},82304:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function r(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var i,o,s=[];for(o in"string"!=typeof t&&(t="?"),e)if(n.call(e,o)){if((i=e[o])||null!=i&&!isNaN(i)||(i=""),o=r(o),i=r(i),null===o||null===i)continue;s.push(o+"="+i)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=i(t[1]),s=i(t[2]);null===o||null===s||o in r||(r[o]=s)}return r}},82551:(e,t,n)=>{"use strict";n.d(t,{N:()=>r,u:()=>o});var i=n(62406);function r(e){let t=e.length;for(let n=e.length-1;n>=0;n--){const i=e.charCodeAt(n);i>127&&i<=2047?t++:i>2047&&i<=65535&&(t+=2),i>=56320&&i<=57343&&n--}return t}function o(e){try{e=e.replace(/-/g,"+").replace(/_/g,"/");const t=window.atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);const i=new Uint16Array(n.buffer);return String.fromCharCode(...i)}catch(e){return i.A.error("Unable to decode Base64: "+e),null}}},83156:(e,t,n)=>{"use strict";n.d(t,{C:()=>i});const i=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e)},85408:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7247),r=n(76547),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=r.namedConstraint(e),new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=r.taggedConstraint(e)(t),new i.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return r.typeConstraint(e)(t.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return r.namedConstraint(e)(t.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return r.taggedConstraint(e)(t)(n.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return r.traverseAncerstors(t,r.typeConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!r.traverseAncerstors(t,r.typeConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return r.traverseAncerstors(t,r.namedConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!r.traverseAncerstors(t,r.namedConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return r.traverseAncerstors(n,r.taggedConstraint(e)(t))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!r.traverseAncerstors(n,r.taggedConstraint(e)(t))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return r.traverseAncerstors(t,e)},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!r.traverseAncerstors(t,e)},new i.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},86009:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var i=n(32287);function r(e){const t=null==e?void 0:e.ft(i.d.gt._E);let n;return t&&(n={label:t.l,name:t.a}),n}},88469:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(98044),s=n(46987),a=n(2209),c=n(58478),l=n(31635),u=n(12242),d=n(70235),h=n(75455),p=n(29043),f=n(51588),g=n(1492),m=n(20986),v=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=a.BindingScopeEnum.Transient;else if(t.defaultScope!==a.BindingScopeEnum.Singleton&&t.defaultScope!==a.BindingScopeEnum.Transient&&t.defaultScope!==a.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.guid=p.guid(),this._bindingDictionary=new m.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return e.merge=function(t,n){var i=new e,r=u.getBindingDictionary(i),o=u.getBindingDictionary(t),s=u.getBindingDictionary(n);function a(e,t){e.traverse(function(e,n){n.forEach(function(e){t.add(e.serviceIdentifier,e.clone())})})}return a(o,r),a(s,r),i},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),i=0,r=e;i<r.length;i++){var o=r[i],s=n(o.guid);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(this,void 0,void 0,function(){var t,n,i,o,s;return r(this,function(r){switch(r.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,i=e,r.label=1;case 1:return n<i.length?(o=i[n],s=t(o.guid),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(t){var n,i=(n=t.guid,function(e){return e.moduleId===n});e._bindingDictionary.removeByCondition(i)})},e.prototype.bind=function(e){var t=this.options.defaultScope||a.BindingScopeEnum.Transient,n=new o.Binding(e,t);return this._bindingDictionary.add(e,n),new h.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+f.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new m.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,c.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var i=!1;if(this._bindingDictionary.hasKey(e)){var r=this._bindingDictionary.get(e),o=u.createMockRequest(this,e,t,n);i=r.some(function(e){return e.constraint(o)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,t,n)),i},e.prototype.snapshot=function(){this._snapshots.push(g.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(function(e,t){return t(e)},n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,a.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,a.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,c.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,a.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,a.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,c.NAMED_TAG,t)},e.prototype.resolve=function(t){var n=new e;return n.bind(t).toSelf(),n.parent=this,n.get(t)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(i){var r=e.rebind.bind(e)(i);return t(r,n),r}};return function(i){return{bindFunction:(r=i,function(n){var i=e.bind.bind(e)(n);return t(i,r),i}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:n(i),unbindFunction:function(t){e.unbind.bind(e)(t)}};var r}},e.prototype._get=function(e,t,n,i,r,o){var a=null,c={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:r,serviceIdentifier:i,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(c)))throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(c);return a},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=u.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),d.resolve(n)}},e}();t.Container=v},88696:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(13089),r=n(1797);t.tagged=function(e,t){return function(n,o,s){var a=new i.Metadata(e,t);"number"==typeof s?r.tagParameter(n,o,s,a):r.tagProperty(n,o,a)}}},90175:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,s:()=>s});var i=n(62406),r=n(56648),o=n(13786);const s=e=>{const t={},n=e.toString().split("\r\n");if(!n)return t;let i,r;for(const e of n)e&&(i=e.slice(0,e.indexOf(":")).toLowerCase().trim(),r=e.slice(e.indexOf(":")+1).trim(),t[i]=r);return t},a={Y:e=>{let t,n;try{const o=()=>{i.A.error("This browser does not have any supported ajax options!")};let s=!1;if(window.XMLHttpRequest&&(s=!0),!s)return void o();t=new XMLHttpRequest;const a=n=>{"function"==typeof e.error&&e.error(t.status),"function"==typeof e.nt&&e.nt(!1,n)};t.onload=()=>{let n=!1;if(4!==t.readyState)return;n=t.status>=200&&t.status<300||304===t.status;const i=t.getAllResponseHeaders();if(n){if("function"==typeof e.tt){let o;try{o=JSON.parse(t.responseText)}catch(n){const o={error:""===t.responseText?r.A.bu:r.A.Au,response:t.responseText};(0,e.tt)(o,i)}o&&e.tt(o,i)}"function"==typeof e.nt&&e.nt(!0,i)}else a(i)},t.onerror=()=>{a(t.getAllResponseHeaders())},t.ontimeout=()=>{a()},n=JSON.stringify(e.data),t.open("POST",e.url,!0),t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("X-Requested-With","XMLHttpRequest");const c=e.headers||[];for(const e of c)t.setRequestHeader(e[0],e[1]);t.send(n)}catch(e){i.A.error(`Network request error: ${(0,o.u)(e)}`)}}}},91691:(e,t,n)=>{"use strict";n.d(t,{$P:()=>a,BY:()=>o,Gv:()=>c,HP:()=>l,cy:()=>s,n4:()=>u,zu:()=>r});var i=n(62406);function r(e){const t=[];let n;for(const i in e)n=i,Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&t.push(e[n]);return t}function o(e,t,n,o){const s=r(e);return-1!==s.indexOf(t)||(i.A.error(`${n} Valid values from ${o} are "${s.join('"/"')}".`),!1)}function s(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function a(e){return"[object Date]"===Object.prototype.toString.call(e)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}function u(e,t){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;const n=e.toString();if(n!==t.toString())return!1;switch(n){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}const i="[object Array]"===n;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;const n=e.constructor,i=t.constructor;if(n!==i&&!("function"==typeof n&&n instanceof n&&"function"==typeof i&&i instanceof i)&&"constructor"in e&&"constructor"in t)return!1}const r=[],o=[];let s=r.length;for(;s--;)if(r[s]===e)return o[s]===t;if(r.push(e),o.push(t),i){if(s=e.length,s!==t.length)return!1;for(;s--;)if(!u(e[s],t[s]))return!1}else{const n=l(e);let i;if(s=n.length,l(t).length!==s)return!1;for(;s--;)if(i=n[s],!Object.prototype.hasOwnProperty.call(t,i)||!u(e[i],t[i]))return!1}return r.pop(),o.pop(),!0}},93039:(e,t,n)=>{"use strict";n.d(t,{lw:()=>W,Ay:()=>H});var i=n(32287),r=n(56869),o=n(10866),s=n(62406);class a{constructor(e,t,n){this.C=e,this.gh=t,this.Fh=n,this.C=e,this.gh=t||!1,this.Fh=n,this.kh=new r.A,this.fh=0,this.wh=1}jh(){return this.gh}xh(){return this.C.ft(i.d.gt.qh)}setSdkAuthenticationSignature(e){const t=this.xh();this.C.Bt(i.d.gt.qh,e);const n=o.A.Ls.Fs;new o.A(n,s.A).setItem(n.Ms.yh,this.wh,e),t!==e&&this.it()}Bh(){this.C.Ut(i.d.gt.qh);const e=o.A.Ls.Fs;new o.A(e,s.A).ge(e.Ms.yh,this.wh)}subscribeToSdkAuthenticationFailures(e){return this.Fh.Dt(e)}Gh(e){this.Fh.X(e)}Hh(){this.kh.removeAllSubscriptions()}Jh(){this.fh+=1}Kh(){return this.fh}it(){this.fh=0}}var c=n(53988),l=n(14971);class u{constructor(e){this.id=e,this.id=e}Nr(){const e={};return null!=this.browser&&(e.browser=this.browser),null!=this.tc&&(e.browser_version=this.tc),null!=this.os&&(e.os_version=this.os),null!=this.resolution&&(e.resolution=this.resolution),null!=this.language&&(e.locale=this.language),null!=this.timeZone&&(e.time_zone=this.timeZone),null!=this.userAgent&&(e.user_agent=this.userAgent),e}}const d={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"};var h=n(6423),p=n(63539),f=n(91691),g=n(13786);class m{constructor(e,t){this.C=e,this.Qa=t,this.C=e,null==t&&(t=(0,f.zu)(d)),this.Qa=t}ve(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.C.tu(i.d.iu.Na);null==t&&(t=new h.A(p.A.ce()),e&&this.C.uu(i.d.iu.Na,t));const n=new u(t.eu);for(let e=0;e<this.Qa.length;e++)switch(this.Qa[e]){case d.BROWSER:n.browser=l.A.browser;break;case d.BROWSER_VERSION:n.tc=l.A.version;break;case d.OS:n.os=this.ec();break;case d.RESOLUTION:n.rc=screen.width+"x"+screen.height;break;case d.LANGUAGE:n.language=l.A.language;break;case d.TIME_ZONE:n.timeZone=this.sc(new Date);break;case d.USER_AGENT:n.userAgent=l.A.userAgent}return n}ec(){if(l.A.ic())return l.A.ic();const e=this.C.ft(i.d.gt.oc);return e&&e.os_version?e.os_version:l.A.ec()}sc(e){let t=!1;if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions){const e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(null!=e&&""!==e)return e}}catch(e){s.A.info("Intl.DateTimeFormat threw an error, cannot detect user's time zone:"+(0,g.u)(e)),t=!0}if(t)return"";const n=e.getTimezoneOffset();return this.nc(n)}nc(e){const t=Math.trunc(e/60),n=Math.trunc(e%60);let i="GMT";return 0!==e&&(i+=e<0?"+":"-",i+=("00"+Math.abs(t)).slice(-2)+":"+("00"+Math.abs(n)).slice(-2)),i}}var v=n(56648),_=n(13537),w=n(55586),y=n(7126),b=n(59836),E=n(28975),S=n(48244),T=n(86009),A=n(90175);class C{constructor(e,t,n,i,r,o,s,a,c,l,u,d){this.hn=e,this.C=t,this.Pa=n,this.Cs=i,this.T=r,this.B=o,this.an=s,this.La=a,this.Ta=c,this.Ra=l,this.appVersion=u,this.au=d,this.du=e=>null==e?"":`${e} `,this.hn=e,this.C=t,this.Pa=n,this.Cs=i,this.T=r,this.B=o,this.an=s,this.La=a,this.Ta=c,this.Ra=l,this.appVersion=u,this.au=d,this.fu=["npm"],this.vu=[]}H(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.hn.ve(!n),o=r.Nr(),s=this.C.ft(i.d.gt.oc);(0,f.n4)(s,o)||(e.device=o),e.api_key=this.an,e.time=(0,w.UK)((new Date).valueOf(),!0);const a=this.C.ft(i.d.gt.pu)||[],c=this.C.ft(i.d.gt.Ru)||"";this.fu.length>0&&(!(0,f.n4)(a,this.fu)||c!==this.T.St())&&(e.sdk_metadata=this.fu),e.sdk_version=this.Ta,this.Ra&&(e.sdk_flavor=this.Ra),e.app_version=this.appVersion,e.app_version_code=this.au,e.device_id=r.id;const l=this.Cs.getUserId();if(t&&null!==l&&(e.user_id=l),!l&&!this.Pa.jh()){const t=(0,T.b)(this.C);t&&(e.alias=t)}return e}st(e,t,n){const i=t.auth_error,r=t.error;if(!i&&!r)return!0;if(i){let t;this.Pa.Jh();const r={errorCode:i.error_code};for(const e of n)(0,f.cy)(e)&&"X-Braze-Auth-Signature"===e[0]&&(r.signature=e[1]);e.respond_with&&e.respond_with.user_id?r.userId=e.respond_with.user_id:e.user_id&&(r.userId=e.user_id);const o=i.reason;return o?(r.reason=o,t=`due to ${o}`):t=`with error code ${i.error_code}.`,this.Pa.jh()||(t+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),s.A.error(`SDK Authentication failed ${t}`),this.gu(e.events||[],e.attributes||[]),this.Pa.Gh(r),!1}if(r){let n,i=r;switch(i){case v.A.bu:return n="Received successful response with empty body.",y.A.ut(b.w.qu,{e:n}),s.A.info(n),!1;case v.A.Au:return n="Received successful response with invalid JSON",y.A.ut(b.w.qu,{e:n+": "+t.response}),s.A.info(n),!1;case v.A.Du:i=`The API key "${e.api_key}" is invalid for the baseUrl ${this.La}`;break;case v.A.Tu:i="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case v.A.ku:i="No device identifier. Please contact support@braze.com"}s.A.error("Backend error: "+i)}return!1}yu(e,t,n,i){return!!(e&&0!==e.length||t&&0!==t.length||n||i)}wu(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=[],s=e=>e||"",a=s(this.Cs.getUserId());let c=this.Gr(e,t);const l=[],u=[];let d,h=null;if(n.length>0){const e=[];for(const t of n){if(d=t.Nr(),this.Pa.jh()){if(a&&!d.user_id){h||(h={}),h.events||(h.events=[]),h.events.push(d);continue}if(s(d.user_id)!==a){u.push(d);continue}}e.push(d)}e.length>0&&(c.events=e)}if(i.length>0){const e=[];for(const t of i)t&&(this.Pa.jh()&&s(t.user_id)!==a?l.push(t):e.push(t));e.length>0&&(c.attributes=e)}if(this.gu(u,l),c=this.H(c,!1,r),h){h=this.H(h,!1,r);const e={requestData:h,headers:this.J(h,E.A.O.Nu)};o.push(e)}if(c&&!this.yu(c.events,c.attributes,e,t))return h?o:null;const p={requestData:c,headers:this.J(c,E.A.O.Nu)};return o.push(p),o}gu(e,t){if(e){const t=[];for(const n of e){const e=_.A.fromJson(n);e.time=(0,w.YX)(e.time),t.push(e)}this.C.Vo(t)}if(t)for(const e of t)this.C.Cu(e)}et(e,t){let n="HTTP error ";null!=e&&(n+=e+" "),n+=t,s.A.error(n)}zr(e){return y.A.ut(b.w.Su,{n:e})}Gr(e,t,n){const i={};e&&(i.feed=!0),t&&(i.triggers=!0);const r=null!=n?n:this.Cs.getUserId();if(r&&(i.user_id=r),!i.user_id&&!this.Pa.jh()){const e=(0,T.b)(this.C);e&&(i.alias=e)}return i.config={config_time:this.B.Et()},{respond_with:i}}Bu(e){const t=(new Date).valueOf();let n=S.mO.toString();const i=E.A.zu(this.C,e);return-1!==i&&(n=(t-i).toString()),n}J(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[["X-Braze-Api-Key",this.an]],r=this.Bu(t);i.push(["X-Braze-Last-Req-Ms-Ago",r]);const o=E.A.ju(this.C,t).toString();i.push(["X-Braze-Req-Attempt",o]);let s=!1;if(null!=e.respond_with&&e.respond_with.triggers&&(i.push(["X-Braze-TriggersRequest","true"]),s=!0),null!=e.respond_with&&e.respond_with.feed&&(i.push(["X-Braze-FeedRequest","true"]),s=!0),t===E.A.O.wi){i.push(["X-Braze-ContentCardsRequest","true"]);let e=E.A.ju(this.C,E.A.O.wi);e&&!n||(e=1,E.A.Mu(this.C,E.A.O.wi,e));const t=Math.max(0,e-1);i.push(["BRAZE-SYNC-RETRY-COUNT",t.toString()]),s=!0}if(t===E.A.O.Le&&(i.push(["X-Braze-FeatureFlagsRequest","true"]),s=!0),s&&i.push(["X-Braze-DataRequest","true"]),this.Pa.jh()){const e=this.Pa.xh();null!=e&&i.push(["X-Braze-Auth-Signature",e])}return i}Xu(e,t,n,i){const r=window.setTimeout(()=>{s.A.info(`Retrying rate limited ${this.du(i)}SDK request.`),this.V(t,n,i)},e);this.vu.push(r)}fo(){for(const e of this.vu)window.clearTimeout(e);this.vu=[]}V(e,t,n,r){if(!this.$u(n))return s.A.info(`${this.du(n)}SDK request being rate limited.`),void("function"==typeof r&&r());const o=this.Fu();if(!o.Lu)return s.A.info(`${this.du(n)}SDK request being rate limited. Request will be retried in ${Math.trunc(o.Eu/1e3)} seconds.`),void this.Xu(o.Eu,e,t,n);this.C.Bt(i.d.gt.Ku,(new Date).valueOf());const a=e.device;a&&a.os_version instanceof Promise?a.os_version.then(n=>{e.device.os_version=n,t(o.Iu)}):t(o.Iu)}Pu(e){const t=e?(0,A.s)(e):null;if(!t||!t["retry-after"])return null;const n=t["retry-after"];if(isNaN(n)&&!isNaN(Date.parse(n)))return{type:"date",value:Date.parse(n)};if(!isNaN(parseFloat(n.toString())))return{type:"timestamp",value:1e3*parseFloat(n.toString())};{const e="Received unexpected value for retry-after header in /sync response";y.A.ut(b.w.qu,{e:e+": "+n})}return null}rt(e,t,n,i,r,o){if(E.A.ju(this.C,n)>=S.uR)return;let s;o=o||0;const a=this.Pu(e);r();const c=e=>{const r=window.setTimeout(()=>{t()},e);i(r),E.A.Uu(this.C,n)};if(a&&!isNaN(a.value)){switch(a.type){case"date":s=a.value-(new Date).getTime()+o,s<0&&t();break;case"timestamp":s=a.value+o}c(s)}else o?c(o):E.A.vi(this.C,n)}xu(e){var t;null===(t=this.C)||void 0===t||t.Bt(i.d.gt.Hu,e)}Ou(e,t){let n=this.Gu();null==n&&(n={}),n[e]=t,this.C.Bt(i.d.gt._u,n)}Wu(){var e;return null===(e=this.C)||void 0===e?void 0:e.ft(i.d.gt.Hu)}Gu(){var e;return null===(e=this.C)||void 0===e?void 0:e.ft(i.d.gt._u)}Yu(e,t,n,i){let r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(o){const e=this.Gu();r=null==e||isNaN(e[o])?t:e[o]}else r=this.Wu(),(null==r||isNaN(r))&&(r=t);const s=(e-i)/1e3;return r=Math.min(r+s/n,t),r}Ju(e,t){return Math.max(0,(1-e)*t*1e3)}Qu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var n,r,o,s,a;const c={Lu:!0,Iu:-1,Eu:0};if(null==e&&(e=!0),!e&&!t)return c;let l,u,d=null;if(e)d=null===(n=this.C)||void 0===n?void 0:n.ft(i.d.gt.Ku);else{const e=E.A.Vu(this.C);if(null==e||null==e[t])return c;d=e[t]}if(null==d||isNaN(d))return c;if(e?(l=(null===(r=this.B)||void 0===r?void 0:r.Zu())||-1,u=(null===(o=this.B)||void 0===o?void 0:o.tl())||-1):(l=(null===(s=this.B)||void 0===s?void 0:s.el(t))||-1,u=(null===(a=this.B)||void 0===a?void 0:a.il(t))||-1),-1===l||-1===u)return c;const h=(new Date).valueOf();let p=this.Yu(h,l,u,d,t);return p<1?(c.Lu=!1,c.Eu=this.Ju(p,u),c):(p=Math.trunc(p)-1,c.Iu=p,e?this.xu(p):this.Ou(t,p),c)}Fu(){return this.Qu(!0)}$u(e){const t=this.Qu(!1,e);return!(t&&!t.Lu)}it(){this.Pa.it()}Z(){return this.La}addSdkMetadata(e){for(const t of e)-1===this.fu.indexOf(t)&&this.fu.push(t)}}var I=n(83156),O=n(98853),N=n(41720);class P{constructor(e,t,n,i,o,s,a,c,l,u){this.an=e,this.baseUrl=t,this.T=n,this.hn=i,this.Cs=o,this.B=s,this.C=a,this.$l=c,this.Pa=l,this.S=u,this.an=e,this.baseUrl=t,this.Tl=0,this.dE=a.IE()||0,this.Ml=null,this.T=n,this.hn=i,this.Cs=o,this.B=s,this.C=a,this.Pa=l,this.S=u,this.$l=c,this.Pl=new r.A,this.Ol=null,this.Ul=50,this._l=!1}Kl(e,t){return!e&&!t&&this.Pa.Kh()>=this.Ul}Xl(e){let t=this.T.zl();if(e.length>0){const n=this.Cs.getUserId();for(const i of e){const e=!i.userId&&!n||i.userId===n;i.type===b.w.Fl&&e&&(t=!0)}}return t}Ql(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];r&&this.Yl();const d=this.C.AE(),h=this.C.OE();let p=!1;const f=function(t,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const l=(new Date).valueOf();E.A.W(e.C,E.A.O.Nu,l),-1!==s&&n.push(["X-Braze-Req-Tokens-Remaining",s.toString()]);let u=!1;A.A.Y({url:e.baseUrl+"/data/",data:t,headers:n,tt:r=>{null!=t.respond_with&&t.respond_with.triggers&&(e.Tl=Math.max(e.Tl-1,0)),e.S.st(t,r,n)?(e.Pa.it(),e.B.gl(r),null!=t.respond_with&&t.respond_with.user_id!=e.Cs.getUserId()||(null!=t.device&&e.C.Bt(i.d.gt.oc,t.device),null!=t.sdk_metadata&&(e.C.Bt(i.d.gt.pu,t.sdk_metadata),e.C.Bt(i.d.gt.Ru,e.T.St())),e.$l(r),E.A.Mu(e.C,E.A.O.Nu,1),"function"==typeof o&&o())):r.auth_error&&(u=!0)},error:()=>{u=!0,null!=t.respond_with&&t.respond_with.triggers&&(e.Tl=Math.max(e.Tl-1,0)),e.S.gu(t.events,t.attributes),"function"==typeof a&&a()},nt:(t,n)=>{"function"==typeof c&&c(!u);const i=e.S.Pu(n);let o=0;if(i)switch(i.type){case"date":o=Math.max(i.value-(new Date).valueOf(),0);break;case"timestamp":o=i.value}if(r&&!p){if(u){E.A.Uu(e.C,E.A.O.Nu);let t=e.Ml;(null==t||t<1e3*e.dE)&&(t=1e3*e.dE);const n=Math.min(3e5,(0,I.C)(1e3*e.dE,3*t))+o;e.Zl(n)}else e.Zl(Math.max(1e3*e.dE,o));p=!0}}})},g=this.Xl(d),m=n||g;if(this.Kl(l,g))return void s.A.info("Declining to flush data due to 50 consecutive authentication failures");if(r&&!this.S.yu(d,h,t,m))return this.Zl(),void("function"==typeof c&&c(!0));const v=this.S.wu(t,m,d,h,u);m&&this.Tl++;let _=!1;if(v)for(const e of v)this.S.V(e.requestData,t=>f(e.requestData,e.headers,t),E.A.O.Nu,a),_=!0;this.Pa.jh()&&r&&!_?this.Zl():g&&(s.A.info("Invoking new session subscriptions"),this.Pl.X())}dc(){return this.Tl>0}Zl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3*this.dE;this._l||(this.Yl(),this.Ol=window.setTimeout(()=>{if(document.hidden){const e="visibilitychange",t=()=>{document.hidden||(document.removeEventListener(e,t,!1),this.Ql())};document.addEventListener(e,t,!1)}else this.Ql()},e),this.Ml=e)}Yl(){null!=this.Ol&&(clearTimeout(this.Ol),this.Ol=null)}initialize(){this._l=!1,this.Zl()}destroy(){this.Pl.removeAllSubscriptions(),this.Pa.Hh(),this.Yl(),this._l=!0,this.Ql(void 0,void 0,!1,void 0,void 0,void 0,void 0,!0),this.Ol=null}on(e){return this.Pl.Dt(e)}openSession(){const e=this.T.St()!==this.T.Qo();e&&(this.C.TE(i.d.iu.Na),this.C.TE(i.d.iu.su)),this.Ql(void 0,!1,void 0,()=>{this.C.Ut(i.d.gt.Ge)}),this.Qn(),e&&Promise.resolve().then(n.bind(n,52661)).then(e=>{if(this._l)return;const t=e.default.ea();if(null!=t&&(N.A.isPushPermissionGranted()||N.A.isPushBlocked())){const e=()=>{t.wn()?s.A.info("Push token maintenance is disabled, not refreshing token for backend."):t.subscribe()},n=(t,n)=>{n&&e()},r=()=>{const t=this.C.ft(i.d.gt.zn);(null==t||t)&&e()},a=o.A.Ls.Fs;new o.A(a,s.A).cr(a.Ms.cu,n,r)}})}mc(){this.C.Ut(i.d.gt.Xe),this.C.Ut(i.d.gt.Hs),this.C.Ut(i.d.gt.Kr)}fc(){var e,t;this.C.Ut(i.d.gt.Ku),this.C.Ut(i.d.gt.lE);const n=E.A.O;for(const t in n){const i=n[t];this.S.Ou(i,null===(e=this.B)||void 0===e?void 0:e.el(i))}this.S.xu(null===(t=this.B)||void 0===t?void 0:t.Zu())}changeUser(e,t,n){const r=this.Cs.getUserId();if(r!==e){this.T.Il(),this.mc(),null!=r&&this.Ql(void 0,!1,void 0,void 0,void 0),this.Cs.ou(e),n?this.Pa.setSdkAuthenticationSignature(n):this.Pa.Bh();for(let e=0;e<t.length;e++)t[e].changeUser(null==r);this.S.fo(),null!=r&&this.C.Ut(i.d.gt.Zt),this.C.Ut(i.d.gt.oc),this.C.Ut(i.d.gt._E),this.fc(),this.openSession(),s.A.info('Changed user to "'+e+'".')}else{let t="Doing nothing.";n&&this.Pa.xh()!==n&&(this.Pa.setSdkAuthenticationSignature(n),t="Updated SDK authentication signature"),s.A.info(`Current user is already ${e}. ${t}`)}}requestImmediateDataFlush(e){this.Yl(),this.T.Qo(),this.Ql(void 0,void 0,void 0,void 0,()=>{s.A.error("Failed to flush data, request will be retried automatically.")},e,!0)}requestFeedRefresh(){this.T.Qo(),this.Ql(!0)}br(e,t){this.T.Qo(),s.A.info("Requesting explicit trigger refresh."),this.Ql(void 0,!0,void 0,e,t)}Cn(e,t){const n=b.w.vc,r={a:e,l:t},o=y.A.ut(n,r);return o&&(s.A.info(`Logged alias ${e} with label ${t}`),this.C.Bt(i.d.gt._E,r)),o}Ln(e,t,n){if(this.B.hu(t))return s.A.info(`Custom Attribute "${t}" is blocklisted, ignoring.`),new O.A;const i={key:t,value:n},r=y.A.ut(e,i);if(r){const e="object"==typeof n?JSON.stringify(n,null,2):n;s.A.info(`Logged custom attribute: ${t} with value: ${e}`)}return r}setLastKnownLocation(e,t,n,i,r,o){const a={latitude:t,longitude:n};null!=i&&(a.altitude=i),null!=r&&(a.ll_accuracy=r),null!=o&&(a.alt_accuracy=o);const c=y.A.ut(b.w.bc,a,e||void 0);return c&&s.A.info(`Set user last known location as ${JSON.stringify(a,null,2)}`),c}lr(e,t){const n=this.T.Qo();return new _.A(this.Cs.getUserId(),b.w.wc,e,n,{cid:t})}kc(e,t){return new o.A(e,t)}Qn(){const e=o.A.Ls.Fs;this.kc(e,s.A).setItem(e.Ms.Nu,1,{baseUrl:this.baseUrl,data:{api_key:this.an,device_id:this.hn.ve().id},userId:this.Cs.getUserId(),sdkAuthEnabled:this.Pa.jh()})}vr(e){for(const t of e)if(t.api_key===this.an)this.S.gu(t.events,t.attributes);else{const e=o.A.Ls.Fs;new o.A(e,s.A).setItem(e.Ms.kr,p.A.ce(),t)}}Kn(e,t,n){if(this.B.hu(e))return s.A.info(`Custom Attribute "${e}" is blocklisted, ignoring.`),new O.A;let i,r;return null===t&&null===n?(i=b.w.yc,r={key:e}):(i=b.w.Sc,r={key:e,latitude:t,longitude:n}),y.A.ut(i,r)}Mn(e,t){const n={group_id:e,status:t};return y.A.ut(b.w.jc,n)}}class k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{enabled:!1},a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{enabled:!1,refresh_rate_limit:void 0},c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{enabled:!0,capacity:S.uy,refill_rate:S.Fn,endpoint_overrides:{}},l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;this.dl=e,this.Rl=t,this.Cl=n,this.El=i,this.yl=r,this.fl=o,this.vl=s,this.De=a,this.bl=c,this.banners=l,this.dl=e,this.Rl=t,this.Cl=n,this.El=i,this.yl=r,this.fl=o,this.vl=s,this.De=a,this.bl=c,this.banners=l}bt(){return{s:"5.9.1",l:this.dl,e:this.Rl,a:this.Cl,p:this.El,m:this.yl,v:this.fl,c:this.vl,f:this.De,grl:this.bl,b:this.banners}}static Rn(e){let t=e.l;return"5.9.1"!==e.s&&(t=0),new k(t,e.e,e.a,e.p,e.m,e.v,e.c,e.f,e.grl,e.b)}}class R{constructor(e){this.C=e,this.C=e,this.sl=new r.A,this.rl=new r.A,this.ul=new r.A,this.al=new r.A,this.hl=null,this.ol=null}cl(){if(null==this.ol){const e=this.C.ft(i.d.gt.ml);this.ol=null!=e?k.Rn(e):new k}return this.ol}Et(){return this.cl().dl}gl(e){var t,n;if(null!=e&&null!=e.config){const r=e.config;if(r.time>this.cl().dl){const e=e=>null==e?this.cl().bl:e,o=new k(r.time,r.events_blacklist,r.attributes_blacklist,r.purchases_blacklist,r.messaging_session_timeout,r.vapid_public_key,r.content_cards,r.feature_flags,e(r.global_request_rate_limit),r.banners);let s=!1;null!=o.fl&&this.In()!==o.fl&&(s=!0);let a=!1;null!=o.vl.enabled&&this.yi()!==o.vl.enabled&&(a=!0);let c=!1;null!=o.De.enabled&&this.ke()!==o.De.enabled&&(c=!0);let l=!1;null!=(null===(t=o.banners)||void 0===t?void 0:t.enabled)&&this.zt()!==(null===(n=o.banners)||void 0===n?void 0:n.enabled)&&(l=!0),this.ol=o,this.C.Bt(i.d.gt.ml,o.bt()),s&&this.sl.X(),a&&this.rl.X(),c&&this.ul.X(),l&&this.al.X()}}}Vn(e){const t=this.sl.Dt(e);return this.hl&&this.sl.removeSubscription(this.hl),this.hl=t,t}gi(e){return this.rl.Dt(e)}Ke(e){return this.ul.Dt(e)}A(e){return this.al.Dt(e)}je(e){return-1!==this.cl().Rl.indexOf(e)}hu(e){return-1!==this.cl().Cl.indexOf(e)}Dr(e){return-1!==this.cl().El.indexOf(e)}wl(){return this.cl().yl}In(){return this.cl().fl}yi(){return this.cl().vl.enabled||!1}Ll(){const e=this.cl().bl;return!(!e||null==e.enabled)&&e.enabled}Zu(){if(!this.Ll())return-1;const e=this.cl().bl;return null==e.capacity||e.capacity<10?-1:e.capacity}tl(){if(!this.Ll())return-1;const e=this.cl().bl;return null==e.refill_rate||e.refill_rate<=0?-1:e.refill_rate}Bl(e){const t=this.cl().bl.endpoint_overrides;return null==t?null:t[e]}el(e){const t=this.Bl(e);return null==t||isNaN(t.capacity)||t.capacity<=0?-1:t.capacity}il(e){const t=this.Bl(e);return null==t||isNaN(t.refill_rate)||t.refill_rate<=0?-1:t.refill_rate}ke(){return this.cl().De.enabled&&null==this.Oe()?(y.A.ut(b.w.qu,{e:"Missing feature flag refresh_rate_limit."}),!1):this.cl().De.enabled||!1}Oe(){return this.cl().De.refresh_rate_limit}zt(){var e;return(null===(e=this.cl().banners)||void 0===e?void 0:e.enabled)||null}ne(){var e;return(null===(e=this.cl().banners)||void 0===e?void 0:e.max_placements)||0}}class L{constructor(e,t,n,i){this.C=e,this.Cs=t,this.B=n,this.Sl=i,this.C=e,this.Cs=t,this.B=n,this.jl=1e3,(null==i||isNaN(i))&&(i=1800),i<this.jl/1e3&&(s.A.info("Specified session timeout of "+i+"s is too small, using the minimum session timeout of "+this.jl/1e3+"s instead."),i=this.jl/1e3),this.Sl=i}xl(e,t){return new _.A(this.Cs.getUserId(),b.w.Dl,e,t.eu,{d:(0,w.UK)(e-t.Gl)})}St(){const e=this.C.tu(i.d.iu.Nl);return null==e?null:e.eu}zl(){const e=(new Date).valueOf(),t=this.B.wl();if(null==t)return!1;const n=this.C.ft(i.d.gt.Hl),r=null==n||e-n>1e3*t;return r&&this.C.Bt(i.d.gt.Hl,e),r}Wl(e,t){return null==t||null==t.kl||!(e-t.Gl<this.jl)&&t.kl<e}Qo(){const e=(new Date).valueOf(),t=e+1e3*this.Sl,n=this.C.tu(i.d.iu.Nl);if(this.Wl(e,n)){let r="Generating session start event with time "+e;if(null!=n){let e=n.ql;e-n.Gl<this.jl&&(e=n.Gl+this.jl),this.C.Al(this.xl(e,n)),r+=" (old session ended "+e+")"}r+=". Will expire "+t.valueOf(),s.A.info(r);const o=new h.A(p.A.ce(),t);return this.C.Al(new _.A(this.Cs.getUserId(),b.w.Fl,e,o.eu)),this.C.uu(i.d.iu.Nl,o),null==this.C.ft(i.d.gt.Hl)&&this.C.Bt(i.d.gt.Hl,e),o.eu}if(null!=n)return n.ql=e,n.kl=t,this.C.uu(i.d.iu.Nl,n),n.eu}Il(){const e=this.C.tu(i.d.iu.Nl);null!=e&&(this.C.Jl(i.d.iu.Nl),this.C.Al(this.xl((new Date).valueOf(),e)))}}const x={Ya:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(i.d.gt.ac,"true"),localStorage.getItem(i.d.gt.ac)&&(localStorage.removeItem(i.d.gt.ac),n=!0)}catch(e){if(!(e instanceof Error&&("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&localStorage.length>0))throw e;n=!0}}catch(e){s.A.info("Local Storage not supported!")}const r=x.cc(),o=new i.A.lc(e,r&&!t,n);let a;return a=n?new i.A.gc(e):new i.A.uc,new i.A(o,a)},cc:function(){return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}},M=x;var D=n(45823),j=n(82551),U=n(79488),B=n(6272);class F{constructor(e,t){this.B=e,this.C=t,this.B=e,this.C=t}getUserId(){const e=this.C.tu(i.d.iu.su);if(null==e)return null;let t=e.eu,n=(0,j.N)(t);if(n>B.A.ur){for(;n>B.A.ur;)t=t.slice(0,t.length-1),n=(0,j.N)(t);e.eu=t,this.C.uu(i.d.iu.su,e)}return t}ou(e){const t=null==this.getUserId();this.C.uu(i.d.iu.su,new h.A(e)),t&&this.C.ru(e)}setCustomUserAttribute(e,t){if(this.B.hu(e))return s.A.info('Custom Attribute "'+e+'" is blocklisted, ignoring.'),!1;const n={};return n[e]=t,this.nu(B.A.lu,n,!0)}nu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=this.C.mu(this.getUserId(),e,t);let o="",a=e,c=t;return n&&(o=" custom","object"==typeof t&&(a=Object.keys(t)[0],c=t[a],"object"==typeof c&&(c=JSON.stringify(c,null,2)))),!i&&r&&s.A.info(`Logged${o} attribute ${a} with value ${c}`),r}An(e,t,n,r,a){this.nu("push_token",e,!1,!0),this.nu("custom_push_public_key",n,!1,!0),this.nu("custom_push_user_auth",r,!1,!0),this.nu("custom_push_vapid_public_key",a,!1,!0);const c=o.A.Ls.Fs,l=new o.A(c,s.A),u=new U.A(e,t,n,r,a);this.C.Bt(i.d.gt.zn,u.bt()),l.setItem(c.Ms.cu,c.be,!0)}xn(e){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),e){const e=o.A.Ls.Fs,t=new o.A(e,s.A);this.C.Bt(i.d.gt.zn,!1),t.setItem(e.Ms.cu,e.be,!1)}}}const G=function(){return window.location.href},V={Yo:"allowCrawlerActivity",Zo:"baseUrl",Wh:"noCookies",Vh:"devicePropertyAllowlist",Da:"disablePushTokenMaintenance",$h:"enableLogging",Yh:"enableSdkAuthentication",Ca:"manageServiceWorkerExternally",Xh:"minimumIntervalBetweenTriggerActionsInSeconds",Zh:"sessionTimeoutInSeconds",Qh:"appVersion",Ea:"appVersionNumber",_a:"serviceWorkerLocation",Ba:"safariWebsitePushId",Zn:"localization",er:"contentSecurityNonce",re:"allowUserSuppliedJavascript",Go:"inAppMessageZIndex",Ko:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",mh:"requireExplicitInAppMessageDismissal",Ia:"doNotLoadFontAwesome",Na:"deviceId",Aa:"serviceWorkerScope",Oa:"sdkFlavor",tn:"openCardsInNewTab"},W={Yo:"allowCrawlerActivity",Zo:"baseUrl",Wh:"noCookies",Vh:"devicePropertyAllowlist",Da:"disablePushTokenMaintenance",$h:"enableLogging",Yh:"enableSdkAuthentication",Ca:"manageServiceWorkerExternally",Xh:"minimumIntervalBetweenTriggerActionsInSeconds",Zh:"sessionTimeoutInSeconds",Qh:"appVersion",Ea:"appVersionNumber",_a:"serviceWorkerLocation",Ba:"safariWebsitePushId",Zn:"localization",er:"contentSecurityNonce",re:"allowUserSuppliedJavascript",Go:"inAppMessageZIndex",Ko:"openInAppMessagesInNewTab",tn:"openCardsInNewTab",en:"openNewsFeedCardsInNewTab",mh:"requireExplicitInAppMessageDismissal",Ia:"doNotLoadFontAwesome",Na:"deviceId",Aa:"serviceWorkerScope",Oa:"sdkFlavor"},H=new class{constructor(){this.an="",this.Ta="",this.Ra=void 0,this.Pa=null,this.hn=null,this.S=null,this.Fi=null,this.B=null,this.T=null,this.C=null,this.Cs=null,this.La="",this.isInitialized=!1,this.Ua=!1,this.Wa=new r.A,this.Va=new r.A,this.options={},this.Fa=[],this.Ka=[],this.Mi=[],this.Ta="5.9.1"}Ga(e){this.Wa.Dt(e)}Nh(e){this.Va.Dt(e)}initialize(e,t){if(this.nn())return s.A.info("Braze has already been initialized with an API key."),!0;this.options=t||{};let o=this.ee(W.$h);const c=function(e){null==e&&(e="");const t=e.split("?").slice(1).join("?"),n={};if(null!=t){const e=t.split("&");for(let t=0;t<e.length;t++){const i=e[t].split("=");""!==i[0]&&(n[i[0]]=i[1])}}return n}(G());if(c&&"true"===c.brazeLogging&&(o=!0),s.A.init(o),s.A.info(`Initialization Options: ${JSON.stringify(this.options,null,2)}`),null==e||""===e||"string"!=typeof e)return s.A.error("Braze requires a valid API key to be initialized."),!1;this.an=e;let u=this.ee(W.Zo);if(null==u||""===u||"string"!=typeof u)return s.A.error("Braze requires a valid baseUrl to be initialized."),!1;!1===/^https?:/.test(u)&&(u=`https://${u}`);const p=u;if(u=document.createElement("a"),u.href=p,"/"===u.pathname&&(u=`${u}api/v3`),this.La=u.toString(),l.A.Ja&&!this.ee(W.Yo))return s.A.info("Ignoring activity from crawler bot "+navigator.userAgent),this.Ua=!0,!1;const g=this.ee(W.Wh)||!1;if(this.C=M.Ya(e,g),g&&this.C.Ha(e),new i.A.se(null,!0).gr(i.d.me))return s.A.info("Ignoring all activity due to previous opt out"),this.Ua=!0,!1;for(const e of(0,f.HP)(this.options))-1===(0,f.zu)(V).indexOf(e)&&s.A.warn(`Ignoring unknown initialization option '${e}'.`);const v=["mparticle","wordpress","tealium"];if(null!=this.ee(W.Oa)){const e=this.ee(W.Oa);-1!==v.indexOf(e)?this.Ra=e:s.A.error("Invalid sdk flavor passed: "+e)}let _=this.ee(V.Vh);if(null!=_)if((0,f.cy)(_)){const e=[];for(let t=0;t<_.length;t++)(0,f.BY)(d,_[t],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&e.push(_[t]);_=e}else s.A.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),_=null;const w=this.ee(W.Na);if(w){const e=new h.A(w);this.C.uu(i.d.iu.Na,e)}this.hn=new m(this.C,_),this.B=new R(this.C),this.Cs=new F(this.B,this.C),this.T=new L(this.C,this.Cs,this.B,this.ee(W.Zh));const y=new r.A;return this.Pa=new a(this.C,this.ee(W.Yh),y),this.F(y),this.S=new C(this.hn,this.C,this.Pa,this.Cs,this.T,this.B,this.an,this.La,this.Ta,this.Ra||"",this.ee(W.Qh),this.ee(W.Ea)),this.Fi=new P(this.an,this.La,this.T,this.hn,this.Cs,this.B,this.C,e=>{if(this.nn())for(const t of this.ar())t.U(e)},this.Pa,this.S),this.Fi.initialize(),g||this.C.Xa(),s.A.info(`Initialized for the Braze backend at "${this.ee(W.Zo)}" with API key "${this.an}".`),D.B.p(),this.B.Ke(()=>{var e;this.isInitialized&&(null===(e=this.B)||void 0===e?void 0:e.ke())&&n.e(106).then(n.bind(n,4106)).then(e=>{this.isInitialized&&(0,e.default)()})}),this.Fi.on(()=>{var e;this.isInitialized&&(null===(e=this.B)||void 0===e?void 0:e.ke())&&n.e(106).then(n.bind(n,4106)).then(e=>{this.isInitialized&&(0,e.default)(void 0,void 0,!0)})}),this.Wa.X(this.options),this.isInitialized=!0,window.dispatchEvent(new CustomEvent("braze.initialized")),!0}destroy(e){if(s.A.destroy(),this.nn()){this.Va.X(),this.Va.removeAllSubscriptions();for(const e of this.Fa)e.destroy();this.Fa=[];for(const e of this.Ka)e.clearData(!1);this.S&&this.S.fo(),this.Ka=[],this.removeAllSubscriptions(),this.Mi=[],null!=this.Fi&&this.Fi.destroy(),this.Fi=null,this.Pa=null,this.hn=null,this.S=null,this.B=null,this.T=null,this.Cs=null,this.options={},this.Ra=void 0,this.isInitialized=!1,this.Ua=!1,e&&(this.C=null)}}rr(){return!(this.Za()||!this.nn()&&(console.warn(S.xE),1))}Ma(){return this.an}Sr(){return this.Pa}Z(){return this.La}ue(){return this.hn}g(){return this.S}ee(e){return this.options[e]}ar(){return this.Ka}rn(){return this.Fi}v(){return this.B}P(){return this.T}j(){return this.C}mr(){if(this.Cs&&this.Fi)return new B.A(this.Cs,this.Fi)}ir(){return this.Cs}tr(){return!0===this.ee(W.re)}h(e){let t=!1;for(const n of this.Fa)n===e&&(t=!0);t||this.Fa.push(e)}_(e){let t=!1;for(const n of this.Ka)n.constructor===e.constructor&&(t=!0);e instanceof c.A&&!t&&this.Ka.push(e)}F(e){e instanceof r.A&&this.Mi.push(e)}removeAllSubscriptions(){if(this.rr())for(const e of this.Mi)e.removeAllSubscriptions()}removeSubscription(e){if(this.rr())for(const t of this.Mi)t.removeSubscription(e)}fe(e){this.Ua=e}nn(){return this.isInitialized}Za(){return this.Ua}fi(){return this.Ta}}},93520:(e,t,n)=>{"use strict";n.d(t,{$6:()=>l,V:()=>a,dy:()=>p,jj:()=>u,mY:()=>c,qj:()=>h});var i=n(62406),r=n(13786),o=n(82551),s=n(56561);const a={types:{io:"container",logCustomEvent:"logCustomEvent",setEmailNotificationSubscriptionType:"setEmailNotificationSubscriptionType",setPushNotificationSubscriptionType:"setPushNotificationSubscriptionType",setCustomUserAttribute:"setCustomUserAttribute",requestPushPermission:"requestPushPermission",addToSubscriptionGroup:"addToSubscriptionGroup",removeFromSubscriptionGroup:"removeFromSubscriptionGroup",addToCustomAttributeArray:"addToCustomAttributeArray",removeFromCustomAttributeArray:"removeFromCustomAttributeArray",co:"openLink",mo:"openLinkInWebView"},properties:{type:"type",eo:"steps",so:"args"}},c={Mr:"unknownBrazeAction",wr:"noPushPrompt"},l=(e,t)=>{switch(e){case c.Mr:return`${t} contains an unknown braze action type and will not be displayed.`;case c.wr:return`${t} contains a push prompt braze action, but is not eligible for a push prompt. Ignoring.`;default:return""}};function u(e){try{const t=e.match(s.nx),n=t?t[0].length:null,r=n?e.substring(n):null;if(null==n||n>e.length-1||!r)return void i.A.error(`Did not find base64 encoded brazeAction in url to process : ${e}`);const a=(0,o.u)(r);return a?JSON.parse(a):void i.A.error(`Failed to decode base64 encoded brazeAction: ${r}`)}catch(t){return void i.A.error(`Failed to process brazeAction URL ${e} : ${(0,r.u)(t)}`)}}function d(e,t){let n=!1;if(t)for(const i of t)if(n=n||e(i),n)return!0;return!1}function h(e){const t=a.properties.type,n=a.properties.eo;try{if(null==e)return!0;const i=e[t];return i===a.types.io?d(h,e[n]):!(0,s.To)(i)}catch(e){return!0}}function p(e){if(!e||!(0,s.xs)(e))return!1;const t=a.properties.type,n=a.properties.eo,i=e[t];return i===a.types.io?d(p,e[n]):i===a.types.requestPushPermission}},96478:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7247),r=n(85408),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},96899:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plan=function(e,t){this.parentContext=e,this.rootRequest=t}},98044:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2209),r=n(29043),o=function(){function e(e,t){this.guid=r.guid(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},98853:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.tt=e,this.$e=t,this.tt=e,this.$e=t}ns(e){this.tt=this.tt&&e.tt,this.$e.push(...e.$e)}}}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return o[e].call(n.exports,n,n.exports,a),n.exports}a.m=o,a.amdO={jQuery:!0},e=[],a.O=(t,n,i,r)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,i,r]=e[u],s=!0,c=0;c<n.length;c++)(!1&r||o>=r)&&Object.keys(a.O).every(e=>a.O[e](n[c]))?n.splice(c--,1):(s=!1,r<o&&(o=r));if(s){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,i,r]},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var r=Object.create(null);a.r(r);var o={};t=t||[null,n({}),n([]),n(n)];for(var s=2&i&&e;("object"==typeof s||"function"==typeof s)&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach(t=>o[t]=()=>e[t]);return o.default=()=>e,a.d(r,o),r},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,n)=>(a.f[n](e,t),t),[])),a.u=e=>(138===e?"webgl-supply":e)+"-modern."+{26:"27671528af85dd1e23ac",104:"84ce3e9f2ea49b432667",106:"760246d9472ce2f938a8",138:"cf29523ff892fd15f509",196:"d0571798e6d5b1b1d9a4",624:"c7d666370a02af6208c8",657:"64af22f721f060e1bd44"}[e]+".chunk.js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},r="rubens_web:",a.l=(e,t,n,o)=>{if(i[e])i[e].push(t);else{var s,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+n){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+n),s.src=e),i[e]=[t];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var r=i[e];if(delete i[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=239,a.p="static/j/",(()=>{var e={239:0};a.f.j=(t,n)=>{var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise((n,r)=>i=e[t]=[n,r]);n.push(i[2]=r);var o=a.p+a.u(t),s=new Error;a.l(o,n=>{if(a.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,i[1](s)}},"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[o,s,c]=n,l=0;if(o.some(t=>0!==e[t])){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);if(c)var u=c(a)}for(t&&t(n);l<o.length;l++)r=o[l],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},n=self.webpackChunkrubens_web=self.webpackChunkrubens_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c=a.O(void 0,[958],()=>a(33575));c=a.O(c)})();
//# sourceMappingURL=site-unauth-modern.1ba7c580cc86ba6f5bfb.js.map